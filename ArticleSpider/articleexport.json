[{"front_image_path": "full/4ccab0a38c3c13879135519b200e0c60ce7498bb.jpg", "url_object_id": "3020491df0f8c0be11c80716e2019c4c", "praise_nums": "2", "title": "技术面试中常被问到是否参与开源，那如何清晰展示 GitHub 项目呢？", "tags": "IT技术,Github,开源", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2013/03/124.jpg"], "url": "http://blog.jobbole.com/112322/", "comment_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/buntamarui\">小米云豆粥</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://thehftguy.com/2016/10/24/heres-how-to-make-a-good-github-project-for-your-resume/\">thehftguy</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>你面试的公司找你要 GitHub 链接，猎头找你要 GitHub 链接。“你参与过开源项目么？”是目前 IT 技术面试中的常见问题之一。</p>\n<p>既然他们要 GitHub，你就得给。本文将阐述如何在面试中展示你在 GitHub 上的项目。</p>\n<p>以下的建议有两个用途：应聘者可以学习怎么写软件的简介（不一定非要是GitHub）；招聘者（程序员）可以学习可以从哪些关键点来评价一个程序员的水平和软件的质量。</p>\n<figure id=\"attachment_3948\" class=\"wp-caption aligncenter\"><img class=\"aligncenter size-medium wp-image-3948\" src=\"https://thehftguy.files.wordpress.com/2016/10/github-submit-application1.png?w=300&amp;h=239\" alt=\"submit application form with a GitHub link\" width=\"300\" height=\"239\">\n<figcaption class=\"wp-caption-text\">When having a GitHub is mandatory, just like having a name.</figcaption>\n</figure>\n<h3>链接一个特定的项目</h3>\n<p>在你的简历和每一份申请里面都放上你的GitHub链接。</p>\n<p>该链接要直链到一个项目。不要给你GitHub的主页地址，那个页面没有有用信息，很难让人继续浏览。</p>\n<p>你必须只展示一个项目。一个就够了，不需要更多。</p>\n<p>这个项目将是你的“登录页面”，是招聘者看到的第一个页面。他们很少去看其他页面（也没有这个必要）所以该页面本身就应该展示一切信息。如果他们去看了其他页面，说明这个主页成功引起了他们的兴趣，他们想知道更多项目细节。</p>\n<p>我们要写一个可以充分展示你的能力，并能给人留下好的第一印象的项目页面。</p>\n<h3>项目结构</h3>\n<p>用5秒时间看软件的架构就可以知道项目优劣。</p>\n<p>你一眼就能看出来一个程序员没有经验，他们的项目往往没有结构。项目文件要么在随便一个地方或者都在根目录。</p>\n<p><strong>一个好的项目结构必须将源代码，测试，库文件，可执行文件分开放在不同的文件夹中</strong>。</p>\n<p>命名的细节，例如是用‘doc’还是用‘docs’并不重要。这里是GitHub项目的<a href=\"https://GitHub.com/kriasoft/Folder-Structure-Conventions\">文件夹结构</a>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59bb77666c289637254771\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n.\r\n├── build                   # Compiled files (alternatively `dist`)\r\n├── docs                    # Documentation files (alternatively `doc`)\r\n├── src                     # Source files (alternatively `lib` or `app`)\r\n├── test                    # Automated tests (alternatively `spec` or `tests`)\r\n├── tools                   # Tools and utilities\r\n├── LICENSE\r\n└── README.md\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59bb77666c289637254771-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb77666c289637254771-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59bb77666c289637254771-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb77666c289637254771-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59bb77666c289637254771-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb77666c289637254771-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59bb77666c289637254771-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb77666c289637254771-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59bb77666c289637254771-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59bb77666c289637254771-1\"><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb77666c289637254771-2\">├──<span class=\"crayon-h\"> </span><span class=\"crayon-v\">build</span><span class=\"crayon-h\">                   </span><span class=\"crayon-p\"># Compiled files (alternatively `dist`)</span></div><div class=\"crayon-line\" id=\"crayon-59bb77666c289637254771-3\">├──<span class=\"crayon-h\"> </span><span class=\"crayon-v\">docs</span><span class=\"crayon-h\">                    </span><span class=\"crayon-p\"># Documentation files (alternatively `doc`)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb77666c289637254771-4\">├──<span class=\"crayon-h\"> </span><span class=\"crayon-v\">src</span><span class=\"crayon-h\">                     </span><span class=\"crayon-p\"># Source files (alternatively `lib` or `app`)</span></div><div class=\"crayon-line\" id=\"crayon-59bb77666c289637254771-5\">├──<span class=\"crayon-h\"> </span><span class=\"crayon-v\">test</span><span class=\"crayon-h\">                    </span><span class=\"crayon-p\"># Automated tests (alternatively `spec` or `tests`)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb77666c289637254771-6\">├──<span class=\"crayon-h\"> </span><span class=\"crayon-v\">tools</span><span class=\"crayon-h\">                   </span><span class=\"crayon-p\"># Tools and utilities</span></div><div class=\"crayon-line\" id=\"crayon-59bb77666c289637254771-7\">├──<span class=\"crayon-h\"> </span><span class=\"crayon-i\">LICENSE</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb77666c289637254771-8\">└──<span class=\"crayon-h\"> </span><span class=\"crayon-v\">README</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">md</span></div><div class=\"crayon-line\" id=\"crayon-59bb77666c289637254771-9\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p>\n<figure id=\"attachment_4111\" class=\"wp-caption alignnone\"><img class=\"alignnone size-full wp-image-4111\" src=\"https://thehftguy.files.wordpress.com/2016/10/github-project-structure.png?w=809\" alt=\"software project structure\">\n<figcaption class=\"wp-caption-text\">A well-organized project</figcaption>\n</figure>\n<h3>有一个项目简介文件</h3>\n<p>项目简介文件可以提供：</p>\n<ul>\n<li>项目目标</li>\n<li>截屏或视频</li>\n<li>使用说明</li>\n<li>软件下载页面</li>\n</ul>\n<h3>在简介文件里面放软件界面截屏</h3>\n<p>一张图比一千个字更能说明问题。</p>\n<p>人们不会因为要看软件界面就去安装软件。请提供软件界面截图。</p>\n<h3>在简介中放视频</h3>\n<p>一张图能抵一千个字，那么一个视频顶一千张图。</p>\n<figure id=\"attachment_3846\" class=\"wp-caption alignnone\"><img class=\"alignnone size-full wp-image-3846\" src=\"https://thehftguy.files.wordpress.com/2016/10/github-snake-gif.gif?w=809\" alt=\"snake game preview animated gif\" width=\"600\" height=\"370\">\n<figcaption class=\"wp-caption-text\">Great demo from <a href=\"https://GitHub.com/DyegoCosta/snake-game\" target=\"_blank\" rel=\"noopener\">a random snake project on GitHub</a></figcaption>\n</figure>\n<p><strong>注意</strong>：GitHub不允许插入视频，你可以使用动态图。</p>\n<h3>网页链接或安装文件链接</h3>\n<p>如果该项目是网络应用，请提供网页地址。当然，所有人都应该能访问该地址。</p>\n<p>如果该项目是单机程序，请提供安装文件下载地址。如果安装文件看上去不专业，用户是不会安装它的。很多时候，是否专业跟发布方式有关。</p>\n<h3>整合GitHub工具</h3>\n<p>GitHub提供了一整套免费工具用于编连，打包，测试和其他功能。这些工具在专业软件开发中都是必须的。</p>\n<p>以前想要实现这些功能非常困难，但如今通过GitHub一切都非常简单。你没有理由不用它们。</p>\n<p><img class=\" size-full wp-image-3871 aligncenter\" style=\"height: auto; max-width: 100%; clear: both; margin: 0.8em auto;\" src=\"https://thehftguy.files.wordpress.com/2016/10/github-integration-icons.png?w=809\" alt=\"GitHub-integration-icons\"></p>\n<p>这是一个由C++实现的四子棋的例子。按钮从左到右代表：</p>\n<ol>\n<li>在Linux上编连（<a href=\"https://travis-ci.org/\" target=\"_blank\" rel=\"noopener\">Travis CI</a>）</li>\n<li>在Windows上编连（<a href=\"https://www.appveyor.com/\" target=\"_blank\" rel=\"noopener\">AppVeyor</a>）</li>\n<li>单元测试和测试覆盖分析（<a href=\"https://coveralls.io/\" target=\"_blank\" rel=\"noopener\">Coveralls</a>）</li>\n</ol>\n<h3>如何处理源代码？</h3>\n<p>“没人在乎你的源代码——得知这个事实的时候我也很吃惊。我在整理代码上花了不少时间，但发现没人在乎。重要的不是代码，而是产品” （<a href=\"https://mortoray.com/2015/04/20/nobody-cares-about-your-code/\">出处</a>）</p>\n<p>比起猜，读一段软件功能描述要快10倍。比起自己弄明白软件用法，观看一个介绍基本用法的视频可以快100倍。比起逆向工程，读设计图表要快1000倍。你可以通过读源代码来搞清楚一切，但这个过程要费事得多。读源代码（解码源代码）是非常耗时的。只有在走投无路的时候才应该用。</p>\n<p>经验教训1：没人在乎你的代码，也不会有人去读你的代码。</p>\n<p>经验教训2：别指望别人会去读你的代码，也别强迫别人去读代码。</p>\n<h3>如果我没有像样的大项目要怎么办？</h3>\n<p>挺好的。简单的项目更容易展示，更容易解释，面试官也更容易理解。比如大家都知道四子棋是怎么回事。</p>\n<p>即使第一眼看上去很简单，但每一个项目都包含了很多工作量：写一个好的用户界面，调整颜色，允许两个人一起游戏，加上对下一步棋的走子建议，加上 AI 选手等等。</p>\n<p>这个游戏规则很简单但是要把它做成好的软件要做很多工作。这些都是你在面对面的面试中可以跟面试官深入探讨的地方。</p>\n<p>你知道玩四子棋的时候先走的选手一定会赢么？【如果他不犯错的话】你知道如果第一个选手第一步棋不走中间的话，第二个选手一定可以将棋走成平局么？</p>\n<p>来源：<a href=\"http://www.informatik.uni-trier.de/~fernau/DSL0607/Masterthesis-Viergewinnt.pdf\" target=\"_blank\" rel=\"noopener\">A Knowledge-based Approach of Connect-Four</a>, <em>The Game is Solved: White Wins</em>, Victor Allis</p>\n<h3>面试官真的会去看GitHub么？</h3>\n<p>事实上<strong>他们不会</strong>。</p>\n<figure id=\"attachment_4010\" class=\"wp-caption aligncenter\"><img class=\" size-full wp-image-4010 aligncenter\" src=\"https://thehftguy.files.wordpress.com/2016/10/github-traffic.png?w=809\" alt=\"GitHub traffic statistics\">\n<figcaption class=\"wp-caption-text\">GitHub Traffic Statistics</figcaption>\n</figure>\n<p>我们测试过了。这个图是我们发出一堆简历之后的数据统计。这三个点击是我自己点的。在写这篇文章的时候我没有登录就去点了GitHub。我的错。</p>\n<p>从我上次找工作的经验来说，经过十几个电话面试（每次电话有一个技术人员）和几个现场面试（4到7个技术人员），只有一个人去看了我的GitHub页面。</p>\n<p>结论：没人关心GitHub，没人会看GitHub。每人都会问，是因为别人也在这样做。</p>\n<p>好处：既然没有人真的去看，你也可以拒绝参加这场GitHub的假面舞会。你可以用这个<a href=\"https://GitHub.com/leachim6/hello-world\"> hello world 终极版本库</a> 去回应所有的GitHub要求。这个版本库包含用一百种语言实现的“Hello world”。</p>\n<h3>小抄</h3>\n<ol>\n<li>项目要有结构</li>\n<li>要有项目简介文件</li>\n<li>写一段说明软件功能的介绍</li>\n<li>放上软件界面截图和使用说明视频</li>\n<li>提供安装文件下载地址或者网络应用的网址</li>\n<li>整合发开工具（CI，单元测试，打包工具等等）</li>\n</ol>\n<p>这世上还有其他软件工程的好范例，不仅仅局限于GitHub。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/07/2ec965670e006b5d53c221a7cdcf0108.jpg\">\n            \n                            <img src=\"http://jbcdn2.b0.upaiyun.com/2016/07/a5e36df34a1aea088f06fb503c7ce93d.jpg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112322\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112322votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112322\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/buntamarui\">小米云豆粥</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/buntamarui\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/09/5bfa690c5bc8a2dc2344cffdebf5f50b.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            数据科学进修中，Python小码农。不用QQ，有事站内信联系。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/buntamarui\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/buntamarui/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/buntamarui/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 30</a> · <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/ammie/\"><i class=\"fa fa-weibo\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/bchen4\"><i class=\"fa fa-github\"></i></a> <a title=\"Linked主页\" target=\"_blank\" href=\"https://www.linkedin.com/\"><i class=\"fa fa-linkedin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 3, "create_date": "2017-09-15"},{"front_image_path": "full/70c7b887c37d9154dc2b5636ed919464c716d375.jpg", "url_object_id": "96e68d41a1e51a9614a929fce93c1d53", "praise_nums": "2", "title": "100:10:1方法 : 我是这样参与开源的", "tags": "IT技术,开源", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/09/f1a3d556b79a7fae23ad3ecc6f972164.jpg"], "url": "http://blog.jobbole.com/112320/", "comment_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/q1857502771\">暖日生烟</a> 翻译，<a href=\"http://www.jobbole.com/members/young605867996\">Lada</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://blog.fogus.me/2015/11/04/the-100101-method-my-approach-to-open-source/\">Michael Fogus</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【导读】：据本文作者 Michael Fogus 博客上的简介，他是一位 Clojure 开发者和狂热用户，并且是 Clojure 的贡献者（Clojure 本身也是一个开源项目）。平常在 Clojure 和 ClojureScript 花费时间很多。他喜欢棒球、象棋、哲学、恐怖电影、阅读和写作。出过两本书《Functional JavaScript》和《The joy of Clojure》。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fjbxewni6rj206y06ymx6.jpg\" width=\"250\" height=\"250\"></p>\n<hr>\n<p>许多年里我一直全心投入于开源运动，不过那时候我很少在空闲时写代码，在 Sourceforge、GoogleCode、GitHub 之类的代码托管平台，也找不到我的项目（repo）。<sup>【1】</sup>然而随着时间流逝，我逐渐意识到向全球公开代码的责任，毫不夸张的说，这吸引住了我。</p>\n<p>除了很多“已发布”的代码是低水准的这一事实之外，无论<a href=\"https://en.wikipedia.org/wiki/Authorial_intent\">有意</a>与<a href=\"https://en.wikipedia.org/wiki/Reader-response_criticism\">否</a>，将代码公布于众的行为意味着与某些人签订契约<sup>【2】</sup>，这些人可以为自己的目的使用公开的代码。当然，我并不一定反对这种社会契约，相反，在发布代码的时候我最终改变了主意，以致于我在我的方法中变得更保守了。这个我现在正在使用的方法叫做“100:10:1 方法”，此术语是由开发者 Nick Bentley 创造。<sup>【3】</sup></p>\n<h3>100:10:1 方法究竟是什么？</h3>\n<p>我不会重复赘述此方法的细节，你可以通过阅读 《<a href=\"https://nickbentleygames.wordpress.com/2014/05/12/the-100-10-1-method-for-game-design/\" target=\"_blank\">The 100:10:1 method – the heart of my game design process</a>》来了解。但我会试着从我的开源软件开发方法这一背景下来概括它。</p>\n<p>具体操作分三部分，步骤如下：</p>\n<h3>写下 100 种疯狂的想法</h3>\n<p>首先，准备一本笔记本和一支笔，为开发有意思的开源项目写下 100 种想法即可。这些有关项目的想法可以涉及各种主题，深度和质量。我想过的有，野生语言的创意、已有项目的新功能、系统设计、协议、缺损文件、有趣的 forks、代码简化、游戏、原型、论文想法的实现、第二个系统等等。</p>\n<p><img class=\"aligncenter\" src=\"http://wx2.sinaimg.cn/mw690/a17d6bb7gy1fisza9ufvoj208c03b3yl.jpg\"></p>\n<p>在使用 100:10:1 方法之前，我总是会用疯狂的想法填满我的笔记本。它们通常是东一点西一点，从不会聚集在一个地方。在几页纸上写下这 100个想法后，我的注意力立马集中在它们身上。这样我就可以好好筛选比较为第二步做准备。</p>\n<h3><span id=\"pos_placeholder\" style=\"width: 0px; height: 0px; margin: 0px; padding: 0px;\"></span>为这 10 个想法创造最小可行性产品（MVP）</h3>\n<p>我面前的这 100 个想法，让我了解到我不止当时对追求它们充满兴趣，并且我感觉它们可以使我和他人同时获益。<sup>【4】</sup>从原始的 100 个想法里，我挑出了确定想探索和专研下去的 10 个。在这 10 个项目里，我挑不出一个更好的了，因此我想同时为它们各自编写一个最小可行“项目”。</p>\n<p><img class=\"aligncenter\" src=\"http://wx4.sinaimg.cn/mw690/a17d6bb7gy1fisza9oxcdj208c04pjrl.jpg\" width=\"300\" height=\"169\"></p>\n<p>你可能马上会想到同时开发 10 个项目这件事本身就是一个负担。这不能说是一个错误的评估。然而，我意识到对于我选择的大多数项目，要找到最可行的实现方式是非常难的，如果有也得耗费几个月甚至数年时间。你看，我曾一度认为发布开源软件是把潜在可用的工具给予他人的一种方法。很遗憾的是，随着时间推移，这个观点已经退化到能做到将代码公开就不错了。我现在的想法是，在业余时间写代码仅仅是一个探索，有没有结果也无所谓了。</p>\n<p>同时开发 10 个项目有个好处就是，当我在一个上遇到了瓶颈可以轻易的转移到另一个更有灵感的项目去。作为一个除编程外拥有丰富爱好、社区和家庭生活的人，用一堆选择来对抗我的三分钟热度无疑是非常有用的。拥有 10 个并行的项目意味着总有一个能让我在短时间内感兴趣。我知道当所有兴趣集中在一个任务上时，工作会变的更有效率。无论怎样最后总有一个项目会见到希望<sup>【5】</sup>，当它到来时我已经准备好了进入最后一个阶段。</p>\n<h3>全力开发选中的项目，使其成为一个可以合法发布的软件</h3>\n<p>在开发 10 个项目的过程中，其中一个不可避免会成为有价值的东西。<sup>【6】</sup>万事俱备后，我会将其变为一个高质量的软件产品。<sup>【7】</sup>这意味着要完成所有内容，确保一个健壮的系统，有可靠的例子、测试、文档、稳定的API、博客文章或演讲，甚至可能有网络。<sup>【8】</sup></p>\n<p><img class=\"aligncenter\" src=\"http://wx3.sinaimg.cn/mw690/a17d6bb7gy1fiszaa656cj206004c3yj.jpg\" width=\"216\" height=\"156\"></p>\n<p>在此之前为了我自己而开发的项目，可能要经历大量的工作才能使其成为值得与他人分享的东西。这当然取决于软件本身的复杂度，很可能最后一步要花最长的时间来完成。同样最后阶段也是我最容易彻底放弃的时候。因为我发现了一个大麻烦，如果我不愿为我的代码写文档、例子和测试的话，在未来的数十年想要维护它是根本不可能的。</p>\n<h3>总结</h3>\n<p>这个方法我已经用了一段时间，在此之前，使用类似的方法同样取得了不错的成果。Zeder 和 Patagonia 也是用 100:10:1 方法或类似方法进行开发的。我现在有的一个叫 Tathata 的 Clojure 库，即将进入最后阶段。或许 10 个项目<sup>【9】</sup>里会有一个成功，不过即使失败了，我还会再挑选更多的 10 个去尝试。</p>\n<p><img class=\"aligncenter\" src=\"http://wx4.sinaimg.cn/mw690/a17d6bb7gy1fiszaaj4n9j208c04rt9y.jpg\" width=\"300\" height=\"171\"></p>\n<p>我有足够的时间，准确的说是一辈子。:F</p>\n<p>感谢 Carin Meier、Rich Hickey、Justin Gehtland 和 Paul deGrandis 阅读，并为这篇文章提供修改意见。</p>\n<hr>\n<p>1.事实证明，我的其他爱好(游戏设计、Sabremetrics、写作等)在过去也有类似的趋势，但就像开源编码一样，它们也已经达到100:10:1的理想状态。</p>\n<p>2.不幸的是，人们似乎也倾向于将开源视为一种道德声明。</p>\n<p>3.“100:10:1 方法”这个名字来自尼克·本特利在他的一篇文章中所描述的游戏设计方法。虽然我自己对开源代码的看法已经有点类似于尼克的观点，但他的文章让我的方法有了一个名字和基本结构。无论你在哪儿，Mr. Bentley，谢谢你!</p>\n<p>4.如果我们不创建开源代码来造福他人，那又有什么意义呢？</p>\n<p>5.有时候一个项目会从根上就腐烂，在这种情况下，我会毫不犹豫的废弃它，并将其他替代品放进 100 的列表中。100 的链表是一个动态链表，所有东西可以随存随取。</p>\n<p>6.或者不一定？我担心个啥！</p>\n<p>7.当那一个已经浮出水面了，我仍然不会放弃其他 9 个，不过仅仅是在更表层，MVP 式的水平上开发。如果某个想法失败了，我还会从 100 个中挑选其他的代替。这个方法当然是没有任何硬性规定的。</p>\n<p>8.当然还有最终的名字和标志:p。</p>\n<p>9.如你所见，我将100:10:1 方法应用于其他的创造性的爱好。从编码、音乐、写作到游戏设计，它适用于任何创造性事情。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112320\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112320votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112320\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/q1857502771\">暖日生烟</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/q1857502771\">\r\n\t\t\t<img src=\"http://q.qlogo.cn/qqapp/208656/06EB1B2C5C7835017E628CFB8E25D68F/100\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/q1857502771\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/q1857502771/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/q1857502771/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 11</a> · <a title=\"QQ：826672619\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：xzs826672619\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/NinoMiao\"><i class=\"fa fa-github\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 4, "create_date": "2017-09-15"},{"front_image_path": "full/baced409c07eeea2ff08af3899c6a96f6a93a6a5.jpg", "url_object_id": "39e9518a9d5fa1c6e5ff1afda070376e", "praise_nums": "6", "title": "如何向 6 岁的孩子解释何为编程", "tags": "趣文小说,儿童,编程,趣文", "front_image_url": ["http://wx3.sinaimg.cn/mw690/6941baebly1fjb5w7x6khj208406imx4.jpg"], "url": "http://blog.jobbole.com/112375/", "comment_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a> 翻译，<a href=\"http://www.jobbole.com/members/young605867996\">Lada</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://dev.to/tkaczanowski/explaining-programming-to-6-years-old-kids\">Tomek Kaczanowski</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>任务：<strong>向一组六岁的孩子解释你的工作（我自己的女儿也在其中）。</strong></p>\n<p>难度等级：高。</p>\n<p><img src=\"http://wx3.sinaimg.cn/mw690/6941baebly1fjb5w7x6khj208406imx4.jpg\"></p>\n<p>关于这个任务/主题，之前网上已有许多人分享了他们对这种“讲座”的想法，你可以在 Stack Overflow 上找到一些非常有趣的例子（例如<a href=\"http://stackoverflow.com/questions/2455786/career-day-in-kindergarten-how-to-demonstrate-programming-in-20-minutes\">这里</a>）。其中许多人的想法是关于<strong>计算机是多么愚蠢</strong>，因为要取得成功，你需要非常准确地告诉它做事的方法和规律。我保证这样很有趣，但我也很怀疑，过后孩子们能对编程有什么了解。</p>\n<p>一个成功的演讲在我心里应该是这样的：</p>\n<ul>\n<li><strong>让他们通过提问和画画来持续参与其中。</strong>我在谈话期间画下的原画（白板纸）相当大。顺便一提，画画是一个能让年轻观众参与进来的好方法（他们玩得很开心，嘲笑代表程序员的稻草人，或者指出<span id=\"0KSFindDIV\" class=\"KSFIND_CLASS\">粉红猪小妹</span>（Peppa Pig）长得不是这样的等等）。我没有原始图纸（忘了拍照），但我又画了一次，让你看到这个想法。</li>\n<li><strong>所有演讲的内容要基于他们已知的事物</strong>（比如：YouTube、笔记本、平板、DVD）。现在每个孩子都在 YouTube 上观看卡通片，在平板上玩游戏，看到爸妈在笔记本上工作。他们也知道电影是保存在 CD/DVD 上的，以及（在涉及游戏和电影时）智能手机和平板非常相似。</li>\n</ul>\n<p>我从一个最基本的问题开始，“<strong>谁知道程序员是做什么的？</strong>”我知道他们昨天讨论过这个问题，所以对他们提出的一些想法，我并不感到惊讶。我给了他们我自己的定义：“程序员是编写计算机程序的人，他们掌握和计算机交流的语言，而且对计算机懂得很多。“</p>\n<p>然后我画了一个工作中的程序员。</p>\n<p><img src=\"http://wx2.sinaimg.cn/mw690/6941baebly1fjb5w8duw2j20dw089glp.jpg\"></p>\n<p>下一步是讨论<strong>计算机</strong>。所有的孩子都开始谈论他们父母的笔记本（他们反复提到同样的东西，这样真的很可爱）。讨论了一段时间后，我打断他们并指出，<strong>在不同地方还有很多计算机</strong>，比如智能手机或手表，还包括汽车和电梯。我把上面提到的每一项都画了出来，并用几个字简单地概述每一种情况下计算机的用途。我还问他们他们如何看待天气预报的工作（这时一个聪明的孩子回答：“卫星知道第二天的天气”），并告诉他们计算机得出的预测，基于上千的测量设备给出的测量结果。</p>\n<p><img src=\"http://wx3.sinaimg.cn/mw690/6941baebly1fjb5w8s86gj20dw0dfaag.jpg\"></p>\n<p>为了转到下一个话题<strong>计算机程序</strong>，我提到计算机之所以能做很多事，要归功于指导它们做这些事情的程序。</p>\n<p>话题随之转向 YouTube，我知道他们很了解它，我从他们熟悉的 UI 开始。</p>\n<p>我问他们 YouTube 上有多少部电影。有些人比较困惑，而有些人高喊“数百万”或“无限”。我问所有的电影是否都可以放在一张光盘上。然后我画出许多光盘，问他们“在给 YouTube 下达观看 《粉红猪小妹》某一集的指令后，你了解它是如何找到那个正确的光盘吗？”他们以沉默回应，所以我画了一个数据库，并快速描述了它的作用。</p>\n<p><img src=\"http://wx1.sinaimg.cn/mw690/6941baebly1fjb5w97wn4j20dw0ftmxv.jpg\"></p>\n<p>我想让他们知道，他们所看到的只是冰山一角，<strong>而程序员们还有很多要做的</strong>。我解释了我们必须如何处理以下各种事情：</p>\n<ul>\n<li>保护电影免受坏人的篡改（“如果有人改变了数据库会发生什么事情，你会看到一些足球比赛，而不是<span id=\"2KSFindDIV\" class=\"KSFIND_CLASS\">粉红猪小妹</span>。”，底下的孩子一片死寂 😁 ）</li>\n<li>制作备份（“一个光盘破裂了怎么办？那你永远不会在<span id=\"3KSFindDIV\" class=\"KSFIND_CLASS_SELECT\">粉红猪小妹</span>中，看到猪爸爸设法挂画这一情节了。“，底下又是一片死寂 😁 ）</li>\n<li>使得 YouTube 可以在不同的设备上运行（智能手机、平板、笔记本）</li>\n<li>展示广告</li>\n<li>计算观看每一部电影的人数</li>\n<li>显示相似电影的缩略图，等等</li>\n</ul>\n<p>这是一个提醒他们<strong>编程是团队合作</strong>的好时机。这些项目很大，需要不同领域的知识，所以很多人都参与了创作。在这一点上，我更新了第一张图，添加了另一个程序员，让他们俩坐得很近。</p>\n<p>下一个主题是<strong>计算机的工作原理</strong>，当然我一笔带过，没有详细展开。我是这样告诉他们的：</p>\n<ul>\n<li>鼠标和键盘是供人们发送命令给计算机的</li>\n<li>计算机屏幕是供计算机响应（命令）的</li>\n<li>每台计算机里都有一个处理器（你可以把它当成计算机的大脑）</li>\n<li>还有一些磁盘允许计算机存储信息</li>\n</ul>\n<p><img src=\"http://wx2.sinaimg.cn/mw690/6941baebly1fjb5wac6g5j20dw0db74q.jpg\"></p>\n<p>我把注意力集中在处理器上，告诉他们计算机使用<strong>一种只包含 0 和 1 的有趣语言</strong>。当我假装只用 A 和 B 开头的词说话时，我们获得了一点乐趣。然后我解释程序员之所以使用编程语言，是为了更容易与处理器沟通对话。</p>\n<p>然后我使用了一些最简单的<strong>编程语言进行示例</strong>（使用一些伪代码）。我本想再给他们看一些东西，但我觉得他们正在失去注意力，所以我甚至没有提出 for 循环。</p>\n<p><img src=\"http://wx4.sinaimg.cn/mw690/6941baebly1fjb5wap1zoj20dw06haa5.jpg\"></p>\n<p>为了完成我的演讲，我再次画出了我们所谈论过的符号。我一个一个地画出来，问他们“这是什么？”、“你还记得什么？”这样的问题。整个过程都非常棒。</p>\n<p><img src=\"http://wx3.sinaimg.cn/mw690/6941baebly1fjb5wb29ncj205k0hcmx8.jpg\"></p>\n<p>额外的说明、注意事项、提示及技巧：</p>\n<ul>\n<li>这比我想象的要<strong>有趣</strong>得多！我认真地对待这件事，进行了很好的准备，结果也得到了回报。孩子们很感兴趣，我想他们可能会记得一些事情。</li>\n<li><strong>画画</strong>是正确的方式。它能抓住他们的注意力。通过指着某一幅画，能让我提醒他们几分钟前我们就此讨论过的事情。</li>\n<li>要做好<strong>一遍遍重复</strong>的准备。当我问他们知道的语言时，一个孩子举起手说：“我知道一点英语”，然后他的同伴也一样，这一个，那一个，然后组里剩下的人一个接一个（或几个同时）举手，但几乎所有人说的都是英语。当你谈到他们喜欢的主题，比如卡通片时，场面会变得更加混乱。</li>\n<li>不管你做什么，有些孩子会变得<strong>无聊</strong>，因为他们的注意力周期实在太短了。</li>\n<li>注意<strong>书写。</strong>举个例子，当你写 1 时，他们会抗议这看起来像 7。</li>\n<li>在这次演讲中，我明白了<strong>纠正他们是毫无意义的</strong>。例如，我认为在他们眼中， YouTube 会将卡通片保存在 DVD 上，当你要求某个卡通片时，计算机会选择正确的光盘并播放。我个人觉得这种想法很好，我想让他们理解的是概念（搜索是怎样的，数据库做什么的），而不是技术细节，这才是我认为正确的方法。</li>\n<li>演讲花了大约 25 分钟，感觉没必要更长了。</li>\n</ul>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112375\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112375votetotal\">6</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112375\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/09/9667abaa540914200edd449974fb5538.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            我见青山多妩媚，料青山见我应如是        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/zhj318\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/zhj318/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 37</a> · <a title=\"QQ：574375911\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 2, "create_date": "2017-09-15"},{"front_image_path": "full/0c3f9ba3f4a5ba0b302eafe8fdee79036cb5f3b1.jpg", "url_object_id": "883f88d012ee53f414b39b6c2be2e158", "praise_nums": "1", "title": "MySQL 创始人：写代码比打游戏还爽，程序员应该多泡开源社区", "tags": "职场,MySQL", "front_image_url": ["https://pic.36krcnd.com/avatar/201708/31082811/du4b3zkobsgzg70e.jpeg!1200"], "url": "http://blog.jobbole.com/112366/", "comment_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://blog.openocean.vc/founder-stories-a-hackers-hacker-6d5054c90564\">OpenOcean</a>   译文出处：<a target=\"_blank\" href=\"http://36kr.com/p/5090841.html\">36氪</a>   </div><p>编者按：根据StackOverflow的最新调查，MySQL仍然是全世界最流行的数据库，受访的开发者中有44.3%的人在使用，超过了第二位的SQL Server 10多个百分点。可是你知道MySQL是怎么诞生的吗？openocean 的一篇有关MySQL开发者Michael “Monty” Widenius的传记为我们揭秘。</p>\n<p><span class=\"load-html-img loaded\"><img class=\"aligncenter\" src=\"https://pic.36krcnd.com/avatar/201708/31082811/du4b3zkobsgzg70e.jpeg!1200\" alt=\"MySQL创始人：写代码比打游戏还爽，程序员应该多泡开源社区\"></span></p>\n<p>大学计算机专业的数量总是会随着技术公司的兴衰而起伏，而现在，计算机科学正处在全盛时期。这意味着，不管怎样，计算机科学专业的毕业生绝大部分可能都会去敲2年的代码，再转到产品管理，然后过渡到企业、创业或者商学院，接着再转为既有公司的中层管理，32岁的时候结婚，有了2个孩子，一个儿子，一个女儿，一条狗，还有一栋2层的漂亮房子。对于大多数人来说，成为程序员就是一份朝九晚五的工作，一份有保障的6位数薪水来偿还高昂的学费，一种达到目的的手段，没人应该为此受到责备。但对于千千万万无论好坏的程序员来说，只有一个Monty Widenius。</p>\n<p>Monty是一位编程天才。19岁的时候，他从赫尔辛基理工大学辍学开始全职工作，因为大学已经没有什么东西可以教他了。在独自一人写完除了一个库以外的全部代码之后，33岁时，他发布了MySQL，后来后者成为了全世界最流行的开源数据库。55岁时，他藐视着对老年人的歧视，仍然是自己公司最好的程序员。</p>\n<p>Monty1962年出生于赫尔辛基，1978年他用暑假铺沥青挣来的钱买下自己的第一台个人计算机的。Monty迅速意识到自己相当擅长写代码——对于别人来说很复杂的事情他却觉得很简单，而且他对工作非常投入。Monty用一种在讲瑞典语的芬兰人中常见的浓厚口音说：“基本上这就像是在阅读一本真的非常非常好的书。或者像在玩视频游戏。你知道开始玩游戏然后嘣一声3小时的时间就过去了的那种感觉吗？写代码对我来说就是这种感觉。”</p>\n<p>当别人跑去聚会的时候，Monty却呆在家里编程。他把计算机从里到外都摸透了。他把BASIC的能力推到了极限。Monty说：“学校并不理解编程不是像语言或者历史这样的东西，它不是靠学就能学来的。所以学校是不够的。拔尖的黑客是万里挑一。他们奉献了所有能用的时间，10小时，16小时，每一天，年复一年周而复始。大多数人都不愿意做这样的事情。大多数人宁愿好好生活。”在Monty眼里，好的代码是写过一次就永远不需要再碰的那种。从性能角度来看它已经是最优化了，你可以不断增强，但永远都不需要重写。</p>\n<p>到1980年，17岁的Monty痴迷编程已经无法自拔，他需要把自己计算机的内存从8KB扩到16KB。由于芬兰没有商店卖他想要的东西，于是他弄了一条船去到瑞典Allan Larsson的计算机商店。通过Allan，Monty结识了David Axmark，三人沟通交流了多年，就各自项目互相帮忙，偶尔也会一起协作。1995年，他们一起成立了MySQL AB。Monty负责编程，David和Allan负责干完其他的事情。自1981年以来，Monty就一直以芬兰公司Tapio Laakso Oy程序员的身份在写MySQL前身的代码，他和Allan一起创办的数据仓库公司也要用到那个东西。然而，知道1995年，在Allan和David的游说之后Monty才决定在他写的东西之上增加一个SQL层。1996年10月，MySQL终于发布了，它得到了广泛的欢迎。MySQL快速、可靠并且易学，这主要是因为在多年的开发中Monty总是不断把正是客户的反馈整合进来。</p>\n<p>MySQL的初衷是存储和管理大数据。如果有人想要跟踪不同的数据点，他们互使用数据库，也就是有点像微软Excel那样的东西。然而，随着数据变得越来越大，查找Excel这样的数据库就会变得慢多了，也不再可靠。MySQL有能力存储大量数据，并且返回搜索结果极其迅速。“My”来自Monty女儿的名字，而“SQL”就是结构化查询语言（Structured Query Language）的意思，是一种跟数据库沟通的语言。</p>\n<p>对MySQL开源的决定出自1985年的另一次芬兰到瑞典的乘船旅行，这一次是在一场开源大会上。Monty说：“讨论没花多少分钟。我们都希望回馈给开源社区一点东西。哪怕有人想拷贝或者偷盗我们的代码，我们认为自己能挣的钱也不会比现在少。”开源项目使得开发者社区帮助把软件做得更好，但从商业角度来看不好的是货币化就要困难多了。为了避免这一点，Monty补充了一个条款，那就是如果任何企业用MySQL来赚钱的话，就需要付费授权。对此MySQL的代码里面并没有进行任何限制，但就靠这一荣誉制度MySQL实现了扩张并开始赚钱。Monty说：“我认为开源是开发软件的更好方式。但你仍然需要赚够钱来招聘员工，成立公司去跟闭源社区竞争。MySQL是第一款做到这一点的产品。”</p>\n<p>Monty在MySQL AB的职位是CTO，对于大多数成熟的公司来说，CTO其实已经很少再编程的了。然而，Monty从未停下来过，他的绝大部分时间都是在写代码。这种（很少管理的）做法会导致很多晚期阶段初创企业内爆，但哪怕公司人数已经达到550人，Monty在MySQL AB建立的独特文化也使得他可以避免天天开会的烦扰（事实上，Monty甚至都不接受议事日程邀请）。Monty说：“我总是招会自我驱动的人进来。所以我不需要告诉他们太多东西。而开源意味着你有开源社区，大家会给你提供代码，你可以看看那些代码的质量，看看他们是怎么跟社区互动的，跟你是怎么沟通的，他们会问什么问题，在这些情况下很容易就能看出一个人是好是坏。在一次面试里面是很难了解清楚编码者有多好的。”</p>\n<p>MySQL的成功是CTO Monty与CEO Mårten Mickos通力协作的结果。两人能力都很强且对公司非常重要，但方式不一样。Monty是技术专家，专注于员工生产出尽量完美的代码。Mårten是公司建设者，专注于交付东西并帮助团队发展。正是两人的联合愿景制造出了MySQL。但在一家没有免费洗衣、免费午餐、站立办公桌的公司里，是Monty的个人魅力吸引住了变成人才。Monty不是好交际的筹资人，讨好别人的人，博弈论大师，或者职业沟通者。他会写代码，而且写得很好。在Monty看来赢得开发者尊重是很简单的事情：“你干的是跟他们一样的事，而且干得更好。”</p>\n<p><strong>Monty给程序员的建议是，参与到开源社区去，花些时间到个人项目里面</strong>（“这些年来我开发了成百上千个程序：MySQL是其中被用得最多的一个，但其他的都只有我自己用。”）。他警告说，改变环境和代码库将意味着哪怕是最好的程序员也要去了解一堆的东西。在Sun被Oracle收购之后，Monty成立了MariaDB，这是MySQL的一个社区版的分支，开发的团队成员很多都是MySQL团队里面的，使用的也是一样的官方语言：“蹩脚的英语”。MySQL的许多热心的开源信徒跟着Monty去到了MariaDB。MariaDB更加面向开发者，允许由外人打补丁这样的事情发生，在很多Linux发行版中它都是默认的数据库。</p>\n<p>Monty对开源和开发者的承诺是坚定的——OpenOcean原先是Monty用自己在MySQL的所得成立的，使命是投身于开发者驱动、有技术深度的产品。他仍然在赫尔辛基自己家中主持开发者午餐，很快OpenOcean就将推出一个Slack频道让开发者可以直接向Monty提问。在几十年的时间里，Monty对塑造开源社区无私的形象做出的贡献无可争议的。但这里面大部分的功劳都应该归到成千上万无名的程序员和黑客身上，是他们投入的时间和能力造就了开源的繁荣，也是这批人才能确保开源革命的继续。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112366\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112366votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112366\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 3, "create_date": "2017-09-15"},{"front_image_path": "full/b906ccd28196f4dac2561cbd4120d442b442de87.jpg", "url_object_id": "858cdc33a650f25a8a2a59f7c919b4b8", "praise_nums": "3", "title": "完美主义对新手程序员的影响", "tags": "职场,程序员,职场", "front_image_url": ["http://wx1.sinaimg.cn/large/7cc829d3gy1fj9xymo8v2j20h70b3dj7.jpg"], "url": "http://blog.jobbole.com/112372/", "comment_nums": 3, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://medium.freecodecamp.org/why-striving-for-perfection-might-be-holding-you-back-as-a-newbie-web-developer-6e8ae257751f\">Rick West</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>我是一个完美主义者，或者，至少我喜欢这样自居。不管怎样，我绝对离完美主义者不远了。</p>\n<p>这样本来挺好的。然而，我最近意识到，它实际上阻碍我成为一个更出色的开发者。至少，它阻碍了我的进步，并妨碍了我的学习。</p>\n<p>像很多初级开发者和普通开发者，我有一个不完成副项目（side projects）的习惯。不是因为我懒或没时间，出于某种原因，我似乎从来不会把事情做完。</p>\n<p>然后就是受打击的地方了。</p>\n<p>在进行项目时，我一直努力追求完美，</p>\n<p>这就是问题的所在。</p>\n<p><em>怎么定义完美？完美是什么意思？完美真的是一个可以实现的目标吗？</em></p>\n<p>对我来说，我想交出一些了不起的东西，尽自己所能做出一些东西。</p>\n<p>想法是好的，但作为一个初级开发者，我面对的困境是，因为我每天都在学习，我的能力在不断增强。</p>\n<p>这样的话，我如何才能尽自己最大（且不断提高的）能力，将一个项目做到最好？！</p>\n<p>作为开发者，这是阻碍我进步的关键因素。我不知道要在哪里确定一条底线。我觉得很难对自己说“够了，可以继续前进了”。</p>\n<p><strong>而有时候，情况甚至会变得有些愚蠢…</strong></p>\n<p>6 个月前，我写了一个简单的 URL 缩短器，以熟悉 Symfony 框架。我花了几个晚上的时间，做出了一个基本的工作产品（Working Product），以及一个大的框架介绍。做得很开心？好吧，不尽然。</p>\n<p>信不信由你，3 个月后，我仍在对这个小项目修修补补：修改样式，用 Ajax 改进表单提交，我甚至考虑过用 Vue 或 React 来实现。</p>\n<p>随着我的能力和知识的不断增加，<strong>我完全无法继续前进</strong>。我不断看到能够改进的地方，并有了更好的改进方法。</p>\n<p>这在商业环境中是好事。在产品或项目上不断进行改进和迭代非常赞。</p>\n<p>但是，作为一个小小的学习项目，我明显用力过猛了，正在努力解决一个并不存在的问题。这不是尝试给 Bitly（知名短网址服务）造一个竞争对手，我只是利用这个小项目来加强自身的学习。事实上，根本没有人会看到这个项目！</p>\n<p>我并不是唯一会这么做的人，即使最有经验的开发者，也会在某个时候遇到类似的情况。当他们回顾几年前写的代码，他们可能会羞愧难当，甚至可能会对自己几个月前写的代码感到震惊。</p>\n<p><em><img id=\"pic\" class=\"M_cur_zoom_out aligncenter\" src=\"http://wx1.sinaimg.cn/large/7cc829d3gy1fj5iolq237j20je0j6nav.jpg\" width=\"572\" height=\"565\"></em></p>\n<p style=\"text-align: center;\"><em>（伯乐在线补充配图，Via：程序员的那些事）</em></p>\n<p>作为开发者，无论处于什么水平，你都在不断学习，这是野兽的天性。而经验告诉我们，你只有学会放手，才能继续前进。</p>\n<p>但说起来容易做起来难。作为一个初级的，或有抱负的开发者，“单单”继续前进就显得难得多了。在现实中，除非你的代码接受他人的审查，否则你完全不知道好与坏的标准。</p>\n<p>我的建议是，在你学习时，要创建一些东西，直到它看起来很得体，并能正常工作，此时你需要忘掉它继续前进。不要寻求完美，这是不存在的~ 你应该将时间花在学习并钻研更大、更好的事情上，而不是花在类似调整无关要紧的内边距这一类事情上。请务必相信我这个过来人的经验之谈！</p>\n<p><img id=\"pic\" class=\"aligncenter\" src=\"http://wx1.sinaimg.cn/large/7cc829d3gy1fj9xymo8v2j20h70b3dj7.jpg\"></p>\n<p>我最终明白了“<strong>完成比完美更好</strong>”这句话，这也是二八定律告诉我们的道理。（原因与结果、投入与产出、努力与报酬之间的关系往往是不平衡的，结果、产出或报酬的 80％ 取决于 20％ 的原因、投入或努力。）</p>\n<p>当你处于学习阶段时，所有的项目都不需要做到“完美”。它们本身就是用于学习的项目，做完尽管放手让它们去。</p>\n<p>瞎搞瞎弄、缝缝补补、或者试图压缩最后 10％ 的时间，这些都不是对有限时间的合理使用方式。</p>\n<p>在 Web 开发中，完美是不存在的。</p>\n<p>只有一种情况除外，那就是…完成，因为“完成即完美（done === perfect）”。</p>\n<p>随着时间的推移，你能做出更大、更好的东西！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112372\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112372votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112372\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 3 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/09/9667abaa540914200edd449974fb5538.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            我见青山多妩媚，料青山见我应如是        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/zhj318\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/zhj318/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 37</a> · <a title=\"QQ：574375911\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 3, "create_date": "2017-09-15"},{"front_image_path": "full/f42d1238aa0f889b8988c70dd7481c7a4bd3b456.jpg", "url_object_id": "16321b6a38d1ee394e7cc3ea90594078", "praise_nums": "1", "title": "树形结构数据存储方案（二）： 物化路径", "tags": "IT技术,数据库", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2012/03/database-logo.png"], "url": "http://blog.jobbole.com/112312/", "comment_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.biaodianfu.com/path-enumeration.html\">标点符</a>   </div><p>前一篇文章介绍了比较简单的<a href=\"http://blog.jobbole.com/112309/\">邻接列表模式</a>，物化路径其实更加容易理解，其实就是在创建节点时，将节点的完整路径进行记录。以下图为例：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/91ae30cffcfe91c0ebd3e6091f970295.jpg\" alt=\"tree\" width=\"231\" height=\"259\"></p>\n<p>按照Path Enumeration 进行存储后的结果如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/d1a1da59ee04bd6479425f929f1da5d0.png\" alt=\"Path-Enumeration\" width=\"252\" height=\"221\"></p>\n<p>此种方案借助了unix文件目录的思想，主要时以空间换时间。</p>\n<p>查询某一节点下的所有子节点:（以Fruit为例）</p>\n<div id=\"crayon-59a6b897c213a519548061-1\"></div>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baeeeb4badf022551075\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSET @path = (SELECT path FROM pathTree WHERE node_name = 'Fruit');\r\nSELECT * FROM pathTree WHERE path like CONCAT(@path,'/%');</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baeeeb4badf022551075-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baeeeb4badf022551075-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baeeeb4badf022551075-1\"><span class=\"crayon-i\">SET</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">path</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">SELECT </span><span class=\"crayon-e\">path </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">pathTree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">node_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Fruit'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baeeeb4badf022551075-2\"><span class=\"crayon-e \">SELECT *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">pathTree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-e\">path </span><span class=\"crayon-e\">like </span><span class=\"crayon-e\">CONCAT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">path</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'/%'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>如何查询直属子节点？需要采用MySQL的正则表达式查询：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baeeeb4bae8454199917\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSET @path = (SELECT path FROM pathTree WHERE node_name = 'Fruit');\r\nSELECT * FROM pathTree WHERE path REGEXP CONCAT(@path,'/','[0-9]$');</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baeeeb4bae8454199917-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baeeeb4bae8454199917-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baeeeb4bae8454199917-1\"><span class=\"crayon-i\">SET</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">path</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">SELECT </span><span class=\"crayon-e\">path </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">pathTree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">node_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Fruit'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baeeeb4bae8454199917-2\"><span class=\"crayon-e \">SELECT *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">pathTree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-e\">path </span><span class=\"crayon-e\">REGEXP </span><span class=\"crayon-e\">CONCAT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">path</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'/'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'[0-9]$'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>查询任意节点的所有上级：（以Yellow为例）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baeeeb4baec067585312\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSET @path = (SELECT path FROM pathTree WHERE node_name = 'Yellow');\r\nSELECT * FROM pathTree WHERE @path LIKE CONCAT(path, '%') AND path &lt;&gt; @path;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baeeeb4baec067585312-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baeeeb4baec067585312-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baeeeb4baec067585312-1\"><span class=\"crayon-i\">SET</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">path</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">SELECT </span><span class=\"crayon-e\">path </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">pathTree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">node_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Yellow'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baeeeb4baec067585312-2\"><span class=\"crayon-e \">SELECT *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">pathTree </span><span class=\"crayon-i\">WHERE</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">path </span><span class=\"crayon-e\">LIKE </span><span class=\"crayon-e\">CONCAT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">path</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'%'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">path</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">path</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>插入新增数据：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baeeeb4baf0352537807\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSET @parent_path = ( SELECT path FROM pathTree WHERE node_name = 'Fruit');\r\nINSERT INTO pathtree (path,node_name) VALUES (CONCAT(@parent_path,'/',LAST_INSERT_ID()+1),'White')</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baeeeb4baf0352537807-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baeeeb4baf0352537807-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baeeeb4baf0352537807-1\"><span class=\"crayon-i\">SET</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">parent_path</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SELECT </span><span class=\"crayon-e\">path </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">pathTree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">node_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Fruit'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baeeeb4baf0352537807-2\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">pathtree</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">path</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">node_name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">CONCAT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">parent_path</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'/'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">LAST_INSERT_ID</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'White'</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>此方案的缺点是树的层级太深有可能会超过PATH字段的长度，所以其能支持的最大深度并非无限的。</p>\n<p>如果层级数量是确定的，可以再将所有的列都展开，如下图，比较试用于类似行政区划、生物分类法（界、门、纲、目、科、属、种）这些层级确定的内容。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/08/579dacd5167f484176573e5603f755c3.png\" alt=\"Multiple-lineage-columns\" width=\"609\" height=\"239\"></p>\n<p>参考文章：</p>\n<ul>\n<li>https://communities.bmc.com/docs/DOC-9902</li>\n</ul>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112312\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112312votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112312\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 1, "create_date": "2017-09-15"},{"front_image_path": "full/0341d03d14d3de38ff2983a92d11b39e71e6c1aa.jpg", "url_object_id": "b225ce0ceb9f61bf1bed8b5e01b2f2f2", "praise_nums": "4", "title": "编程趋势：21 个热门和 21 个要降温的", "tags": "IT技术,编程,职业", "front_image_url": ["http://wx4.sinaimg.cn/large/7cc829d3gy1fj44vfij7hj20g40c3wfr.jpg"], "url": "http://blog.jobbole.com/112238/", "comment_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/wx232824506\">努力学python</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://www.infoworld.com/article/3188464/application-development/21-hot-programming-trends-and-21-going-cold.html\">Peter Wayner</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>InfoWorld 作者总结的 21 个热门编程趋势和 21 个要变冷的趋势，包含 Web 开发，移动开发，大数据，教育等方面。</p>\n<hr>\n<p>热门还是冷门？无论 Web 开发、主板开发还是培训教育，都需要了解应用开发过程中哪些技术正在兴起，哪些技术要过时了。</p>\n<p>程序员们喜欢嘲笑时尚界的潮流说变就变，像风一样捉摸不定。裙子时而短时而长，流行色频繁更替，领带越来越窄，越来越薄。但是在技术的世界中，严谨、科学、数学和精准原则却一直流行。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx4.sinaimg.cn/large/7cc829d3gy1fj44vfij7hj20g40c3wfr.jpg\"></p>\n<p><strong>这并不是说编程没有趋势。区别在于编程的潮流由更高的效率、更多的自定义和更便于使用来驱动。具备这些特点的新技术取代旧技术，这是一种精益求精的过程，而不是朝令夕改的奇思妙想。</strong></p>\n<p>下面是现代程序世界的热门技术和冷门技术列表。可能有人会不同的意见，也可能会有遗漏，而这正是编程的迷人之处：快速变化、激烈辩论、峰回路转。</p>\n<h3>热门：预处理器</h3>\n<h3>变冷：全语言堆栈</h3>\n<p>不久之前，人们创造一门新的编程语言需要进行许多工作（从源代码到机器代码转换过程的所有工作）。 然后一些人指出他们可以推翻前面的做法。 现在程序员有了想法以后只需要编写一个预处理器，预处理器可以使用丰富的库和 API 将新代码转换成旧版本的代码。</p>\n<p>Python 、JavaScript 这类的脚本语言曾经仅限于小项目，但现在许多重要的工作都开始使用这些语言。不喜欢 JavaScript 的程序员还开发了 CoffeeScript (一种可以再次编码的预处理器)，以避免使用繁琐的标点符号。它有几十种以不同方式预处理语法的方法。</p>\n<p>那些喜欢动态类型的程序员<strong>创建了 Groovy</strong>，Groovy 是 Java 省略掉过多标点符号的简化版本。现在好像有<strong>几十种语言</strong>（如 Scala 或 Clojure）在 JVM 上运行，但只有一个 JVM 。我们可以在 .Net 虚拟机上运行多种语言，为什么还要重新发明轮子？</p>\n<h3>热门：Docker</h3>\n<h3>变冷：Hypervisors（虚拟机）</h3>\n<p>这并不完全正确，hypervisors 也有它们的用武之地，而且许多 Docker容器运行在以 hypevisors 为基础的操作系统中。然而，Docker容器与虚拟机映像相比实在太小了，这使得它们更容易使用和部署。</p>\n<p>当开发人员可以使用 Docker容器时，它们更愿意使用 Docker容器，这要归功于它可以在部署过程中轻松操作。 像 Joyent 这样的聪明公司正在开发可以占用更多资源的技术，以便容器可以在“裸机”上运行。</p>\n<p>在数字商业时代需要足够敏捷来抓住新机会，同时还要有效地维护传统的内部部署系统。</p>\n<h3>热门：JavaScript MV* 框架</h3>\n<h3>变冷：JavaScript文件</h3>\n<p>很久以前，每个人都学习如何使用 JavaScript 弹出警告窗口或如何检查表格中的电子邮件地址是否包含 @符号。 现在，HTML AJAX 应用程序已经如此成熟，以至于很少有人会再从头开始编写这些功能。 采用精心制作的框架，然后编写一些胶水代码来实现业务逻辑要简单得多。</p>\n<p>现在有许多框架可以用来处理 app、网页等的事件和内容，这些<strong>框架包括</strong> Kendo, Sencha, jQuery Mobile, AngularJS, Ember, Backbone, Meteor JS 等。</p>\n<p>这些只是网络应用程序的框架。 还有一些框架旨在为智能手机/平板电脑提供跨平台开发技术。 <strong>NativeScript，PhoneGap</strong> 和 <strong>Ext JS</strong> 都是使用 HTML5 创建 app 的技术。</p>\n<h3>热门：CSS 框架</h3>\n<h3>变冷：通用层叠样式表</h3>\n<p>曾几何时，向网页添加一点格式意味着打开 CSS文件然后写入类似 font-style:italic 这样的命令，然后保存文件，就可以在一上午的紧张忙碌之后去吃午饭了。现在网页如此复杂以至于很难使用如此简单的命令完成一个文件。调整一个颜色可能会导致一切都无法正常运行。这就像他们评价阴谋家和生态学家一样：一切都是互相联系的。</p>\n<p>这就是 SASS 和 Compass 等 CSS框架的用武之地。 它们通过提供编程结构（如实变量，嵌套块和混合）来鼓励规范，可靠的编码。 这在编程层面中可能听起来并没有多新颖，但对于设计层来说这是一个巨大的飞跃。</p>\n<h3>热门：视频标签</h3>\n<h3>变冷：静态标签</h3>\n<p>曾经有段时间， 视频是指 YouTube 或 Vimeo 上观看的视频。它是一种存在于专有页面上的单独内容。然而随着越来越多的网站使用音频来构建区块，其过程与使用 静态 GIFs 或者 JPGs 进行构建区块一样，这种情况正在发生改变。突然之间，屏幕变得生动起来。</p>\n<p>设计师发现，现代视频标签只是另一个矩形，尽管矩形通常需要程序员使用更多的 JavaScript 代码来控制。 我们只是开始明白，在客厅沙发前面的盒子可以不再是我们获取视频的主要来源，而可以仅仅是一个装饰。</p>\n<h3>热门：类大数据(不使用 Hadoop 分析)</h3>\n<h3>变冷：大数据（使用 Hadoop）</h3>\n<p>每个人都希望自己看起来像是圈子里的大人物，如果他们在圈子里有没影响力，那么他们会寻找一个适合他们脱颖而出的圈子。 所以，当“大数据”开始在高管之间开始流行时，这些高管要求最大，最强大的<strong>大数据系统</strong>，就像购买游艇或摩天大楼一样。</p>\n<p>有趣的是，许多问题没有大到要用高级大数据解决方案来解决。当然，像谷歌或雅虎这种跟踪我们浏览的所有网页的公司是需要大数据解决方案的，他们的数据文件很大需要用 petabytes 或 yottabytes 来计量。但大多数公司的数据都可以轻松地用一个 PC机内存进行处理。我是用一台在 16GB 内存的 PC 机来写这篇文章的，这台 PC 足够处理十亿件几个字节的事件。在大多数算法中，数据不需要读入内存，因为直接从 SSD 获取就可以了。</p>\n<p>可能存在需要 Hadoop云几十台机器并行运算来实现快速响应的需求，但是许多需求在单台机器上处理即可，这样还可以避免产生麻烦的协调或通信问题。</p>\n<h3>热门：Spark</h3>\n<h3>变冷：Hadoop</h3>\n<p>可能并不是 Hadoop 不流行了，而是 Spark 太热门了，这使得 Hadoop 模型看起来有些老。Spark 借鉴了Hadoop 从大量数据中提取语义的做法的最佳思路，并通过一些改进使代码运行的更快。Spark 最大的优势在于它将数据保存在快速内存中而不是需要所有内容都写入分布式文件系统。</p>\n<p>当然，许多人正在通过使用 Spark 的处理速度对存储在 Hadoop 分布式文件系统的数据进行处理，因此，Spark 和 Hadoop 更像是合作伙伴而不是竞争对手。</p>\n<h3>热门：人工智能/机器学习</h3>\n<h3>变冷：大数据</h3>\n<p>没有人知道 “人工智能”的真正含义，它们对营销人员很有利，特别是在“大数据”广泛应用的今天。他们从人工智能中提取术语并且升级数字处理算法的复杂度来处理我们的 log 文件和点击流。通过从具有 50年历史的 AI研究中借鉴更复杂算法，我们比以往任何时候都更有可能从噪音中发现信号。从机器学习框架到认知计算的工具，再到 IBM 的沃森，总能解决你的问题。它们每个都提供自己机器的智能水平，我们可以使用它们进行更多的数据分析和取证。</p>\n<h3>热门：机器人</h3>\n<h3>变冷：虚拟现实</h3>\n<p>就在几分钟之前，我们还都将梦想寄托在虚拟现实中，虚拟现实可以通过一些视频卡在我们视网膜上绘制图形。这种情况仍然可能发生，但与此同时，机器人的世界也将迅速发展。每个学校都有一个机器人团队，家庭的每个角落充斥着机器人，机器人吸尘器已经是旧新闻了，无人机正在自由翱翔。</p>\n<p>这意味着程序要开始考虑如何写代码来控制新机器。目前，这意味着为 Raspberry Pi 这样的轻量级控制器写脚本，但是随着库文件发展的越来越复杂，必然会发生变化。比如，许多机器人专家喜欢研究 C语言实现的机器视觉平台OpenCV 中的代码。这意味着需要考虑新的规则，新的类库，新的协议，和许多其他新的主题。</p>\n<h3>热门：单页Web应用</h3>\n<h3>变冷：网站</h3>\n<p>还记得 URLs 指向满是静态文本和图片的网页的时代吗？把所有信息都放在被称为网站的单独网页中是多么地简单和古雅。设计团队在网站地图上花费几个小时的时间来使网站更易于导航。</p>\n<p>新的 web 应用通过数据库填充内容。当 web应用需要信息时，它从数据库获取信息并将其放入本地模板中。我们不需要使用构建 web页面的所有 web附加组件来标记数据。数据层与展示和格式化层完全分离。移动计算的兴起是另一个原因在于：单个响应式页面工作机制与app类似，可以减少从鱼龙混杂的应用商店中寻找想要的内容所浪费的时间。</p>\n<h3>热门：移动Web app</h3>\n<h3>变冷：原生移动 App</h3>\n<p>假如你有一个移动内容的好主意，那么需要为 IOS、Android、Windows 8甚至黑莓OS 或者其他的系统开发不同的版本。每个版本都需要一个独立的团队使用不同的编程语言实现。然后每个平台应用商店都需要使用自己的版本，才能把 app 分发给用户。</p>\n<p>或者，我们可以创建一个 HTML 应用，然后把它放到各个平台都可以运行的网站上。如果有变化，也不需要到应用商店去请求快速审核错误修复。 现在 HTML层速度越来越快，并且运行在速度越来越快的芯片上，以便于它可以在更复杂和互动性更高的应用程序上更好地与本地应用程序竞争。</p>\n<h3>热门：Android</h3>\n<h3>变冷：iOS</h3>\n<p>是不是几年前苹果专卖店门前还要排蜿蜒的长队？ 现在时代变了。 虽然 iPhone 和 iPad 还拥有大量热爱它们丰富而复杂的界面的铁杆粉丝，但从原始销售数量来看，Android更具优势 。 有报道甚至说 80％ 以上的手机都是 Android系统。</p>\n<p>原因可能就在于成本。 即使 iOS设备只需要花费很少的前，Android世界充斥的大量竞争也可以将产品的价格压缩到 iOS设备的五分之一。 省钱总是很有诱惑力的。</p>\n<p>但另一方面，也可能与开源有关。每个人都可以在市场上竞争，他们也是这样做的。我们有大大小小的安卓平板，安卓相机甚至安卓冰箱。没有人需要在创新之前先请示“妈妈，我可以吗?”。如果他们有一个好点子，做就可以了。</p>\n<p>不过，Apple 也在向安卓学习。iPhone 6 有了不同尺寸的屏幕，或许机会就在眼前。</p>\n<h3>热门：GPU</h3>\n<h3>变冷：CPU</h3>\n<p>当软件非常简单，可以很好的安排一系列指令时，CPU 是计算机的王者，因为它承担了所有的工作。 现在，视频游戏充满了可以并行运行的大量图形程序，显卡可以运行这些图形。 我们很容易花费 500美元、600美元甚至更多来购买各种显卡，一些重度的游戏玩家可能拥有不止一两个显卡。 这些显卡的价格是许多基本台式机显卡价格的两倍。 游戏玩家并不是唯一吹嘘他们的 GPU 的人。 计算机科学家现在将许多并行应用程序转换到 GPU 上运行，这样速度可以提高数百倍。</p>\n<h3>热门：GitHub主页</h3>\n<h3>变冷：个人简历</h3>\n<p>当然，我们可以通过阅读包括初中棋牌俱乐部副总裁的成就清单来了解候选人。 但阅读某人的实际代码则更加丰富和具有启发性。 他们注释写的清楚吗？ 他们把很多时间浪费在把内容写到作用寥寥的类里吗？他的架构真的有扩展空间吗？ 所有这些问题都可以从他们的代码的发现答案。</p>\n<p>这就是为什么参与开源项目对找工作越来越重要。 从专有项目共享代码是很难的，但开源代码可以随处可见。</p>\n<h3>热门：租用</h3>\n<h3>变冷：购买</h3>\n<p>当亚马逊在黑色星期五卖力推销电脑和其他电子产品时，却忘记了推销他们的云服务。在不久的将来，它很可能会这么做。以前，公司设立自己的数据中心并且聘请员工来维护购买的电脑。 现在，他们租赁电脑、数据中心、工作人员、甚至按小时租用软件。 任何人都不想处理购买带来的麻烦。这一切都是好主意，至少在网站发生病毒事件（你的点击将为所有物品支付费用）之前是这样的。尽管现在只有亚马逊发现了自动提供云的方法，趋势将会趋同。</p>\n<h3>热门：复杂云</h3>\n<h3>变冷：简约云</h3>\n<p>云计算早期阶段，供应商强调一键获得正在运行的机器是多么地容易。那时，简约是王道。</p>\n<p>现在选择正确的机器并找出合适的折扣方案可能比编写代码要花费更多的时间。 我们可以获得几十种机器配置文件，大多数云提供商都提供一些老型号的电脑。 所有供应商都提供不同性能水平的机器，因此我们需要对它们进行基准测试，以确定哪种性价比最高。 少用一些 RAM 来每小时节省 12美分有意义吗？ 如果需要几个月连续运行 100台机器，那么这很重要。</p>\n<p>更复杂的情况在于，云公司还会为提前付款或批量购买提供不同的折扣方案， 我们也必须把它们考虑在内。 购买一个云成本工程的在线课程就可以了解这些内容了。</p>\n<h3>热门：数据移动专家</h3>\n<h3>变冷：备份磁带</h3>\n<p>当数据很少时，我们不需要考虑如何移动它。 我们可以将其备份到磁带或者安装 RAID硬盘。 但是现在数据如此之大，以至于我们不得不考虑我们在哪里使用它们。这变得越来越重要，因为更多的服务发生在云端的某个地方，而不是 RAID阵列所在的机架。</p>\n<p>让我们来看看亚马逊的新款 Snowmobile ，这是一个可爱的内部名称，它是用于装载可容纳 100PB 数据硬盘的移动容器。 他们还制作了一个叫做 Snowball 的小盒子，可以容纳 80TB 。 两者都将像运送货物一样运送数据，而不是采用光纤信号。 一项估计表明，通过 1Gbps 的光纤线路下载 100PB 的数据需要 28 年，而货运卡车可能会在几天内将集装箱运送到全国各地。</p>\n<p>所有这一切说明，开发人员需要开始考虑从哪里采集数据、在哪里使用数据。我们采集了比以前更多的数据，把它们移动到正确的地方也比以前也更加重要。正如 Wayne Gretzky 所说，他的成功在于提前计划并且通过分析对趋势进行预测，而不是仅仅把注意力放在正在发生的事情上。</p>\n<h3>热门：语音</h3>\n<h3>变冷：网站</h3>\n<p>网站并没有真正死亡，只是新的音频接口方兴未艾。亚马逊、谷歌和苹果都在主推用语音来解决问题来替代通过敲打电脑键盘输入内容来解决。</p>\n<p>这对于程序员来说意味着更多的工作，因为所有这些机制都有新的 API ，比如 Alexa 控制灯光的新开关。 如果您的公司想要连接这些音频接口，您最好现在就开始了解。毕竟，键盘和 URL 已经是上个世纪的发明了。</p>\n<h3>热门：Node.js</h3>\n<h3>变冷：JavaEE，Ruby on Rails</h3>\n<p>服务器领域一直在线程模式上蓬勃发展，这使得操作系统允许开发人员各种任性、低效、放纵的行为。 无论采用愚蠢的循环还是更多的程序编码，操作系统将通过线程之间的切换平衡性能。</p>\n<p>然后Node.js 与 JavaScript 回调模型出现，这些代码运行速度非常快–比任何人期望JavaScript达到的速度都要快。突然间，创建新线程的开销变得明显，Node.js 繁荣起来。 使用 node.js 时，如果程序员的表现不好会出现问题，但这在很大程度上是对他们是很有好处的。约束程序员的可用资源会促使程序员开发出更快的代码。</p>\n<p>Node.js 还得益于它可以使前后台保持一致。两者运行相同的代码，这使得开发人员更容易迁移和重用函数。 因此，Node.js 已经成为互联网上最热门的堆栈。</p>\n<h3>热门：PHP7</h3>\n<h3>变冷：旧版PHP</h3>\n<p>过去，PHP 是实现动态网页的简单方法。 我们可以通过在HTML 标签之间嵌入简单的代码来实现一些变化。为了便于 Web 开发人员使用，它是如此的基础，但速度也慢得足以让硬件程序员嘲笑。</p>\n<p>这已成为过去，WordPress 和 Facebook 这样的 PHP 爱好者通过引入即时编译器技术(该技术使 Java 成为高性能解决方案)使得PHP代码比以往任何时候都快。 现在，像 HipHop虚拟机和 PHP 7.0 这样的工具的传输速度可能达到旧版本的两倍。Node.js 和 Java，准备接招吧。</p>\n<h3>热门：即时教育</h3>\n<h3>变冷：四年全日制</h3>\n<p>计算机辅助课程不再新鲜，每个人都可以观看视频讲座，并且可以加快或者放慢视频播放速度或者要求教授重复最后一点。在线论坛也改变了以前一个人主导讨论的旧形式。</p>\n<p>在线课程的本质和技术不仅颠覆了教育产业结构，还实现了随时随地学习的灵活性。这正在改变人们的观念，人们不再需要为与他们有关或无关的大量课程而投入四年高昂的学费。在你不知道自己是否需要在编译器上工作时，为什么要学习编译器课程？如果老板想从关系数据库切换到NoSQL引擎，那么我们可以将时间用于现代数据存储的课程上。只有在需要的时候才获得新信息，不要用快要腐烂的方法来扰乱思维。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/10/11eefac5bf4ae36c73b7b40eb087be7b.jpg\">\n            \n                            <img src=\"http://jbcdn2.b0.upaiyun.com/2016/10/02a9f7817f8dd0012ff1327fde5bdc94.jpg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112238\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112238votetotal\">4</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112238\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 7 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx232824506\">努力学python</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx232824506\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            应用软件开发，主要用python、sql        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/wx232824506\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/wx232824506/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/wx232824506/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 19</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 7, "create_date": "2017-09-15"},{"front_image_path": "full/f5d4611e2094787b56111e18af07ad9bad0e04f6.jpg", "url_object_id": "7a050b13630b4c2a96626bde9331cd01", "praise_nums": "2", "title": "提升 C++ 技能的 7 种方法", "tags": "C/C++,开发,C++", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2014/09/64a7802a3a60295a4726c49e90604108.png"], "url": "http://blog.jobbole.com/112246/", "comment_nums": 3, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://www.fluentcpp.com/2017/06/23/7-ways-better-cpp-summer/\">Jonathan Boccara</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>夏天时常会谈到大海、太阳、沙滩、大山或者你的家庭住宅。<strong>更充裕的时间</strong>也是夏天带来的好处之一。可能是因为你在休假，也可能是因为这段时间工作没有那么忙。无论是哪种情况，与一年中的其他季节相比，夏天的时间似乎更加宽裕。</p>\n<p>你有两个选择：1）把所有夏季空闲时间都用来休整，适当放松一下没什么不可以。2）或者你可以投入一部分空闲时间来提升你的技能，尤其是 C++，用 C++ 水平的提高（boost C++）来开始新的一年。</p>\n<p>如果你觉得选择1）更适合你，那么关掉手机和笔记本吧，真正地放松一下！但是如果你倾向于选择2），那么这篇文章就是为你准备的。</p>\n<p>有 7 种方法帮助你利用夏天真正提高 C++。之后我会给你一些小技巧来帮助你<strong>真正实现</strong>所选的目标。</p>\n<h3>1）开始一个项目</h3>\n<p>用 C++ 来建一个你自己的小项目是一个很好的试验方法，而且能通过这个项目真正理解程序的运行。另一个优点在于你可以完全自由地决定使用什么组件。这样你能够提升这一年没有权限/时间使用的语言特性和库组件。</p>\n<p>在我去年的夏季项目中，我实现了一些区间适配器，这让我学到了超多东西。所以我会把这个项目的细节告诉你，这样你能够得到一些灵感来构建你自己的项目：</p>\n<ul>\n<li>如果你不熟悉 C++ 中的区间（Ranges），请参考<a href=\"http://www.fluentcpp.com/2017/01/12/ranges-stl-to-the-next-level/\">《Ranges: the STL to the Next Level》</a></li>\n<li>实现 transform_iterator，</li>\n<li>实现变换区间适配器（transform range adaptor），</li>\n<li>实现 filter_iterator，</li>\n<li>实现筛选区间适配器（filter range adaptor），</li>\n<li>实现 zip 适配器（zip adaptor），然后结合变换区间适配器使用。Zip 适配器需要两个区间，并且返回到来自这两个区间的成对对象的视图</li>\n<li>为 zip 适配器一般化，要令 zip 适配器能够使用任意数量的区间，</li>\n<li>实现<a href=\"http://www.fluentcpp.com/2017/04/14/understand-ranges-better-with-the-new-cartesian-product-adaptor/\">笛卡尔积区间适配器（Cartesian product range adaptor）</a>，</li>\n<li>实现你自己的新区间适配器！</li>\n</ul>\n<p>是否完美，是否完整或者是否遵从上述指示都不重要，重要的是你要去<strong>试验</strong>。但是上面这些任务能给你带来的是：</p>\n<ul>\n<li>明确理解区间，而区间是当下一个非常流行的 C++ 特性，</li>\n<li>练习变参模板（variadic templates）的使用，</li>\n<li>初步接触模板元编程（template metaprogramming），</li>\n</ul>\n<p>并且这些都是逐渐才能体会到的。</p>\n<p>如果你在这种项目上有任何需要帮助的地方，我都愿意效劳。另外我在这个项目上的所有尝试都写在 <a href=\"https://github.com/joboccara/ranges\">GitHub 的代码仓库</a>中了，希望对你们有用。</p>\n<h3>2）读一本好书</h3>\n<p>我会发布一个 C++ 的书单，但是我现在要给你一个选择。我认为作为一个程序员要读的第一本书就是 Steve McConnell 的《<a href=\"https://www.amazon.cn/gp/product/B0061XKRXA/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;camp=536&amp;creative=3200&amp;creativeASIN=B0061XKRXA&amp;linkCode=as2&amp;tag=vastwork-23\" target=\"_blank\">代码大全</a>》。尽管这本书不是专注于 C++ 的，但是它把写好代码要注意的几乎所有方面都教给你了。从写一个 if 语句（没错，有好多方法把 if 语句搞砸）到分配类责任，再到代码审查，《代码大全》涵盖了软件架构的所有方面。在读完这本书以后你永远不会还用一样的方法来编程。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/9a741bac0b81b0471c32da6d8611496f.jpg\"><img class=\"aligncenter wp-image-112252 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/9a741bac0b81b0471c32da6d8611496f.jpg\" alt=\"Code-complete-246x300\" width=\"246\" height=\"300\"></a></p>\n<p>如果你还没有读过《代码大全》，你应该去看看 Scott Meyers 的《<a href=\"https://www.amazon.cn/gp/product/B004G72P24/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;camp=536&amp;creative=3200&amp;creativeASIN=B004G72P24&amp;linkCode=as2&amp;tag=vastwork-23\" target=\"_blank\">Effective C++</a>》。我建议《Effective C++》要读<strong>两遍</strong>。我已经读过三遍了，但是我想两遍的效果应该一样好。尽管这本书是在 C++11 之前写的，但是大部分内容在今天也仍然是有用的。而且《<a href=\"https://www.amazon.cn/gp/product/B016OFO492/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;camp=536&amp;creative=3200&amp;creativeASIN=B016OFO492&amp;linkCode=as2&amp;tag=vastwork-23\" target=\"_blank\">Effective Modern C++</a>》涵盖了C++11 和 C++14 中的特性，可以作为这本书的补充材料。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/59eb3be85b04e023cb4b9a0561c76068.jpg\"><img class=\"aligncenter wp-image-112253 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/59eb3be85b04e023cb4b9a0561c76068.jpg\" alt=\"Code-complete-246x300\" width=\"243\" height=\"300\"></a></p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/3efe96caf01c1d258a4158313c5ba2c6.png\"><img class=\"aligncenter wp-image-112255 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/3efe96caf01c1d258a4158313c5ba2c6.png\" alt=\"Effective-modern-C-249x300\" width=\"249\" height=\"300\"></a></p>\n<p>今年夏天我要看的是 Eric Evans 的著名书籍——《<a href=\"https://www.amazon.cn/gp/product/B01GZ6T12K/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;camp=536&amp;creative=3200&amp;creativeASIN=B01GZ6T12K&amp;linkCode=as2&amp;tag=vastwork-23\" target=\"_blank\">领域驱动设计</a>》（Domain Driven Design）。《领域驱动设计》涵盖了领域专家和开发人员之间的密集交流，建立领域模型以及在讨论模型与代码时使用<strong>同一种语言</strong>。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/ee2d35e20bea6c8b6dba2692c6d53deb.jpg\"><img class=\"aligncenter wp-image-112256 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/ee2d35e20bea6c8b6dba2692c6d53deb.jpg\" alt=\"Code-complete-246x300\" width=\"227\" height=\"300\"></a></p>\n<p>尽管这本书的内容很有价值，但是读起来并不容易。我发现一个有用的小技巧：对每一小节<strong>先读第一段，再读最后一段，最后读其余部分</strong>。这样你能更好地理解作者的写作方向，节省时间。</p>\n<p>我希望通过显示代码中的域，来找到使代码具有表达性的灵感。当然啦，我会在博客上分享这些灵感的。</p>\n<p>这只是一个选择，我还会做一个更全面的书单。</p>\n<h3>3）学习一个新的语言</h3>\n<p>虽然听起来很稀奇，但是学习一种新的语言可以让你对你所的专注语言获得更深层次的理解，而且是最有效的方法之一。并且新的语言和你自己使用的语言差别越大，效果越好。</p>\n<p>新的观点认为，其他编程语言会让你对编程有更一般的理解。由于你太熟悉自己所用的语言，往往会忽略它的特性，而用不同的方法解决问题能够使这些特性凸显出来。即使你不会使用新语言来写产品代码，所接触到的新概念也能为你提供可以应用到主语言中的思路。</p>\n<p>如果你用的是 C++，那么我推荐你去学习一下 Haskell 语言。Haskell 是一种<strong>函数型编程</strong>语言。如果你还没有试用过函数型编程，那么你能从它的概念中获得启发，并从新的角度看待 C++，尤其是 STL。</p>\n<p>我已经花了很长时间比较网络上各种学习 Haskell 的资源。2013 年（单指那一年）<a href=\"http://www.seas.upenn.edu/~cis194/spring13/lectures.html\">宾夕法尼亚大学的课程</a>是我找到的最好的资源。它解释得很清楚，没有太多理论，课程练习也很良心而且有指导性，并且它还是免费的。</p>\n<p>一旦你学完这门课程，你可以在<a href=\"https://github.com/tonymorris/fp-course\"> data61 课程</a>中获得很多 Haskell 的练习，包括填空补充代码。你能够通过这些练习来整理不寻常的函数型编程的相关知识。</p>\n<p>如果你想了解更多函数型编程语言以及它们在 C++中的应用，我推荐 Quentin Duval 的博客：<a href=\"https://deque.blog/\">deque.blog</a>。</p>\n<p>今年夏天我要学习的语言是 <strong>Lisp</strong> 。我明白它是一种非常强大的语言，能够全面提升对编程的理解。一些语言是从它衍生出来的。它不会消失一定是有原因的！</p>\n<p>我还没有完成对网上资源的调查，但是我计划使用《<a href=\"https://www.amazon.cn/gp/product/B0011AP7RY/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;camp=536&amp;creative=3200&amp;creativeASIN=B0011AP7RY&amp;linkCode=as2&amp;tag=vastwork-23\" target=\"_blank\">计算机程序的构造和解释</a>》（Structure and Interpretation of Computer Programs）。如果你有任何关于学习 Lisp 的想法，请告诉我！</p>\n<h3>4）提升使用 STL 的能力</h3>\n<p>STL 是 C++ 中处理容器和算法的部分。它很强大而且并不难用，却没有它应有的名气。要想掌握 STL 需要有相当的知识积累，但是这是值得的。它是一个神奇的方法，能使你的 C++ 代码更具有表达性也更健壮。</p>\n<p>我正在整理帮你掌握 STL 的资料，叫做 <a href=\"http://www.fluentcpp.com/stl/\">STL 学习资源</a>。还没有完成，但是有很大一部分已经做完了，我想足够让你在这个夏天的大部分时间都很充实了。</p>\n<h3>5）紧跟现代C++的特性</h3>\n<p>C++11，C++14 和C++17给C++ 和标准库带来了很多新的特性。即使你现在，比如今年夏天，没有在产品代码中使用它们，它们也都来了。并且你可以立即把它们应用在你的项目中（看上面的第1条）。</p>\n<p>有些特性很好掌握，比如 <strong>lambdas</strong>。尽管精通 lambda 表达式需要掌握很多细节上的东西，但是学会它们的基础用法不需要花太多精力。</p>\n<p>所以部分特性很好理解，只需要一些好资源和时间来熟悉它们。比如 Scott Meyers 的《<a href=\"https://www.amazon.cn/gp/product/B016OFO492/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;camp=536&amp;creative=3200&amp;creativeASIN=B016OFO492&amp;linkCode=as2&amp;tag=vastwork-23\" target=\"_blank\">Effective Modern C++</a>》（见上面的第2点）涵盖了 C++11和 C++14 的大部分特性。</p>\n<p>我特别喜欢Bartek博客上的一份 <a href=\"http://www.bfilipek.com/2017/01/cpp17features.html\">C++17 特性列表</a>，它可以帮你快速上手 C++17 新特性。内容详实，而且你可以通过给一个特定的特性添加信息来贡献自己的一份力量。Bartolomiej 提供了所有的资源和 Github 权限，所以你能够非常轻松地添加信息。这样即使你还不了解 C++17 也能够贡献自己的力量，并且<strong>在这个过程中学到很多东西</strong>。</p>\n<p>如果你不练习的话，是无法理解很多特性的。尤其是<strong>变参模板</strong>，它是现代标准 C++ 的一个重要特性。上面第一点中的项目和其他任何包含变参模板的项目都可以作为练习。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/f468e87715fe3659f2a508a9c5ef91ed.jpg\"><img class=\"aligncenter wp-image-112257 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/f468e87715fe3659f2a508a9c5ef91ed.jpg\" alt=\"Code-complete-246x300\" width=\"640\" height=\"360\"></a></p>\n<h3>6）提高你对 boost 的了解</h3>\n<p>Boost 是设计良好的 C++ 库的集合，可移植且开源。很多现代 C++ 的特性都源自 Boost。</p>\n<p>了解 Boost 的内容很重要。有两个原因：第一，在代码中确实需要它们，因为 boost 主要应用于综合使用；第二，更重要的原因是即使你在产品代码中没有使用 boost，它可以给你一个通用的精心设计的 API 和 C++ 代码模型。<strong>留心 boost 中的内容可以给你自己的设计带来灵感</strong>。</p>\n<p>学习大量的 boost 库的一个方法是阅读 Boris Schäling 的书——《<a href=\"https://www.amazon.cn/gp/product/0982219199/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;camp=536&amp;creative=3200&amp;creativeASIN=0982219199&amp;linkCode=as2&amp;tag=vastwork-23\" target=\"_blank\">The boost C++ Libraries</a>》。这本书有<a href=\"https://theboostcpplibraries.com/\">电子版</a>，但是纸质版可以放进沙滩包供你躺在沙滩上阅读（真的，我去年夏天就读的这本书）。不过这本书是基于 boost 1.55.0 的，所以它包含了很多库，但并不是所有。</p>\n<p>特别地，它没有包含 Boost Hana。Boost Hana 是一个流行的现代 C++ 元程序库。实际上，学习 Boost Hana 可以作为今年夏天的一个目标。</p>\n<p>我询问了 Louis Dionne（Boost Hana 的创始人）怎么样才能有效地学习 Boost Hana。从<a href=\"http://www.boost.org/doc/libs/1_61_0/libs/hana/doc/html/index.html\">官方指导</a>入手是一个好的开始，而且你可以看他的<a href=\"https://youtu.be/Oc4enqNH-Mc\"> ACCU 演讲</a>（或者<a href=\"https://www.youtube.com/watch?v=X_p9X5RzBJE\">Meeting C++ keynote</a>，内容相似）来获取初步的介绍。这里是<a href=\"http://ldionne.com/talks/\"> Louis 的所有演讲</a>，大多数都与元编程和 HANA 有关，可以帮助加深你的了解。</p>\n<h3>7）观看网络视频</h3>\n<p>C++ 社区上有超多网络视频，尤其是年会的视频。今年夏天是观看这些视频的好时机。</p>\n<p>下面是一些我觉得有近期指导性的演讲：</p>\n<ul>\n<li>Patrice Roy – <a href=\"https://youtu.be/Fno6suiXLPs\">异常处理（The Exception Situation）</a>。这个演讲让你对在 C++ 中使用异常处理对你的代码意味着什么有一个大致了解。该演讲结构合理，而且 Patrice 的演讲风格很让人愉快。</li>\n<li>Arthur O’Dwyer – <a href=\"https://youtu.be/vwrXHznaYLA\">Template Normal Programming</a>。在这个演讲中，Arthur 在不用模板元编程的情况下，展示了关于模板的所有知识，同样有板有眼。</li>\n<li>Stephan T. Lavave  – <a href=\"https://www.youtube.com/watch?v=JhgWFYfdIho\"> tuple＜＞：新特点以及它的用法（tuple＜＞: What’s New and How it Works）</a>。这里有很多关于 tuples 的有用信息和练习帮助你更了解标准库。</li>\n<li>Howard Hinnant – <a href=\"https://youtu.be/P32hvk8b13M\">chrono 导论（A ＜chrono＞ Tutorial）</a>。这个演讲教你使用 chrono 库，告诉你它是怎么用强类型来完成安全又表达清楚的代码。</li>\n<li>David Sankel –<a href=\"https://youtu.be/DiisKQAkGM4\"> Monoids, Monads, and Applicative Functors: Repeated Software Patterns</a>。David Sankel 展示了纯函数概念如何应用于 C++。</li>\n<li>David Sankel – <a href=\"https://youtu.be/k3O4EKX4z1c\">Variants：过去，现在和未来（Variants: Past, Present, and Future）</a>。一个关于 variant 的优秀展示，并且 variant 在 C++17 中被放进标准库里了。</li>\n<li>Dietmar Kühl – <a href=\"https://youtu.be/xWmdcvTedbc\">Constant Fun</a>。一个关于 constexpr 的优秀展示。</li>\n<li>Jason Turner –<a href=\"https://www.youtube.com/channel/UCxHAlbZQNFU2LgEtiqd2Maw\"> C++周刊（C++ Weekly）</a>。在这个周系列中，Jason 制作了一些短视频（5 到 10 分钟），每个视频都展示了一个 C++ 的精彩应用。我通常把这系列视频描述为“精彩 5 分钟”。</li>\n</ul>\n<p>这个列表绝没有包括所有优秀的视频。我看到过其他好视频，并且会有很多我没看过的。但是我觉得这个列表里的视频是个好开始。</p>\n<h3>实现你的夏季目标</h3>\n<p>现在已经有<strong>很多事要做</strong>啦。一个夏天之内不可能做完这些所有事情。所以你应该选择其中一部分来做，并且<strong>提前定好目标</strong>。不要从一件事情跳到另一件事情上，否则夏天会很快过去而且你也完不成任何一件事。</p>\n<p>此外，要想完成你的目标，你需要<strong>集中注意力</strong>。一个实用的方法是使用<a href=\"https://en.wikipedia.org/wiki/Pomodoro_Technique\">番茄工作法</a>，我是用 <a href=\"https://kanbanflow.com/\">kanbanflow</a> 来实现的。我现在就在使用这个方法而且结果也不错。</p>\n<p>我今年夏天的目标是读完《领域驱动设计》并且对 Lisp 有适当的理解。你的目标是什么呢？</p>\n<p>现在就选择<strong>两个目标</strong>吧，写在评论区内让我了解一下你们的选择。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112246\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112246votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112246\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 9 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 3 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/chenyahui\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/chenyahui/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 11</a> · <a title=\"QQ：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 9, "create_date": "2017-09-15"},{"front_image_path": "full/5630c3d4f4f3f685aa06d550f00a4cdef5d9a492.jpg", "url_object_id": "f82b2deb2e66636ba145fc06d7391f6f", "praise_nums": "3", "title": "谷歌用两年时间研究了 180 个团队，发现高效团队有这五个特征", "tags": "职场,Google,团队", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/10/ec8b7891ca44138c9a9a09ee180cf33b.jpg"], "url": "http://blog.jobbole.com/112239/", "comment_nums": 5, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/young605867996\">Lada</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://rework.withgoogle.com/blog/five-keys-to-a-successful-google-team/\">rework.withgoogle</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><div>\n<h3>Google 成功团队的五大关键</h3>\n<p>小群聚、工作小组、委员会、自治体，无论它叫什么，身处其中，你都是 Google 的一份子，并且你无论在哪工作，都离不开团队。因此，如果我们知道什么能让管理者高效，那么为什么我们不知道什么能让团队高效呢？</p>\n<blockquote><p>更新：点击此处查看：工作指南——<a href=\"https://rework.withgoogle.com/guides/understanding-team-effectiveness/\">理解团队效能</a>之 Google 团队效能的调查全报道，以及有助于营造团队安全感的工具。</p></blockquote>\n<p>我们中的一群人在谷歌的人力运营部（我们称之为 HR）着手使用数据和严格的分析来回答这个问题：<strong><b>是什么让谷歌</b></strong><strong><b>的</b></strong><strong><b>团队</b></strong><strong><b>高效？</b></strong>今天的早些时候，我们与<a href=\"http://bigstory.ap.org/article/8c60341cc1da47e084b8e17e62e83c98/google-searches-itself-build-more-productive-teams\">美联社</a>分享了我们的研究，现在也在这里分享这些发现。</p>\n<p>过去两年我们对 200+ Googlers（谷歌员工）的采访，观察了 180+ 个谷歌活跃团队的 250 多种属性。我们曾非常自信能找到一流团队，一个完美混合了个人特质和必备技能的团队：一个 Rhodes 学者、两个外向的人、一个牛逼的 AngularJS 工程师，还有一个博士。你看看，这就是梦之队的配置，对吧?</p>\n<p>但我们大错特错了。<strong><span id=\"pos_placeholder\" style=\"width: 0px; height: 0px; margin: 0px; padding: 0px;\"></span>一个团队中有什么人，远不如团队成员是如何相互影响、组织工作、看待贡献更重要。</strong>因为神奇的算法，我们发现了更多。</p>\n<p>我们了解到了在 Google 区分成功团队和其他团队的五大关键因素：</p>\n<ol>\n<li><b></b><strong><b>安全感（<strong><b>Psychological safety）</b></strong>：</b></strong>在这个团队里，我们敢冒险，而且不会对此感到不安和难堪？</li>\n<li><b></b><strong><b>可靠性（<strong><b>Dependability</b></strong>）：</b></strong>我们能指望他人准时完成高质量的工作吗？</li>\n<li><b></b><strong><b>结构与清晰度（<strong><b>Structure &amp; clarity</b></strong>）：</b></strong>目标、角色和执行计划都是清楚明确的吗？</li>\n<li><b></b><strong><b>工作意义（<strong><b>Meaning of work）</b></strong>：</b></strong>我们都是在做对各自来说个人意义重大的工作吗？</li>\n<li><b></b><strong><b>工作影响（<strong><b>Impact of work</b></strong>）：</b></strong>我们从根本上认为自己所做的工作重要吗？</li>\n</ol>\n<p>如果上面 5 个问题，你的回答全是“yes”，那么恭喜你，你应该是处在一个高绩效团队里。如果没有，也不代表失去了希望。这只是一个帮助你找出哪里是重点、如何变得更好的快捷方式，一种和你的成员使用结构化方式讨论这种概念的方法。</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/large/7cc829d3gy1fithlogdqdj21kw1v1anc.jpg\" width=\"2048\" height=\"2413\"></p>\n<p><a href=\"https://www.youtube.com/watch?v=LhoLuui9gX8\">安全感</a>无疑是五个动力中最重要的，我们发现——它是其他四个动力的支撑。这怎么可能呢？冒险在你的团队成员看来似乎很简单。但是回想你最后一次为一个项目工作的时候。你觉得你可以像一个唯一的局外人一样，忽略风险，只问目的？或是你选择了在没有明确问题的时候继续，只为了避免被视作无知？</p>\n<p>结果是，我们都不愿去做那些会负面影响别人看待我们的能力、意识和积极性的行为。虽然这种自我保护在工作场所是一种自然的策略，但它不利于高效的团队合作。而另一方面，团队成员彼此间感觉越安全，越有可能承认错误、一起合作，以及接受新的角色。它几乎影响着我们所观察雇员的每一个重要维度。在团队中具有较高安全感的个人不太可能离开 Google，<a href=\"http://www.mckinsey.com/insights/organization/why_diversity_matters\">他们更有可能</a>利用队友的<a href=\"http://blogs.wsj.com/atwork/2015/01/20/new-report-finds-a-diversity-dividend-at-work/\">多样化的想法</a>，带来更多的收入，高管常常会认为他们是双倍高效的。</p>\n<p>Googlers 热爱数据。并且他们不想让它闲置，而想做点什么。因此，我们创建了一个名为 gTeams exercise 的工具，包含：一个对五大动力进行的 10 分钟工作评估，一份总结团队是如何工作的报告，一场讨论结果、定制发展资源以帮助团队提高的现场面对面对话。在过去的一年里，已经有 3000 多名 Googlers 在 300 个团队中使用该工具。而这些谷歌团队中，采用了新团队规范的（比如通过在每次团队会议开始前共享上周的风险）安全感评分提高了 6%，结构与清晰度的评分提高了 10%。团队们说，“有一个团队效能的框架和强制方法来讨论这些之前失去的动力，是迄今为止最有效的一部分经历。”</p>\n<p class=\"\">从 Dublin（爱尔兰都柏林）的销售团队到 Mountain View（美国加州山景城）的工程团队，我们已经看到，关注这个框架有助于各种类型的团队提高。</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112239\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112239votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112239\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 7 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 5 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/young605867996\">Lada</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/young605867996\">\r\n\t\t\t<img src=\"http://q.qlogo.cn/qqapp/208656/B77EEB9D520DE9C7BD42E89DC348FEC7/100\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            希望了解更多互联网、创业管理、创新思维、前沿技术和设计的知识。渐进明细，持续改进。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/young605867996\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/young605867996/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/young605867996/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 15</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://littlejanery.blog.163.com/\"><i class=\"fa fa-link\"></i></a> <a title=\"QQ：605867996\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：yao605867996\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 7, "create_date": "2017-09-15"},{"front_image_path": "full/92195357d24493250ceca135476203662d9775e6.jpg", "url_object_id": "85bd8601e0edbec62fafb940f1ad7501", "praise_nums": "1", "title": "6 个理由，为什么 GNOME 仍然是最好的 Linux 桌面环境", "tags": "IT技术,GNOME,Linux", "front_image_url": ["http://wx1.sinaimg.cn/mw690/7cc829d3gy1filbc2mwdfj218g0nywhd.jpg"], "url": "http://blog.jobbole.com/112167/", "comment_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/17/8/reasons-i-come-back-gnome\">Jay LaCroix</a>   译文出处：<a target=\"_blank\" href=\"https://my.oschina.net/editorial-story/blog/1510722\">开源中国</a>   </div><p>摘要: 一位资深 Linux 用户告诉你为什么 GNOME 仍然是最好的 Linux 桌面环境</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1filbc2mwdfj218g0nywhd.jpg\" width=\"690\" height=\"372\"></p>\n<blockquote><p>关于本文作者 Jay LaCroix</p>\n<p>Jay LaCroix 是来自密歇根州的技术专家，专注于 Linux 和开源软件。自 2002 年使用 Linux 以来，Jay 一直是它的“死忠粉”。他目前是云计算系统工程师和自由的咨询顾问，乐于教授他人使用 Linux，以充分利用这个优秀的系统。在空闲时间，Jay 会撰写图书，他是 Linux Mint Essentials, Mastering Linux Network Administration 这些书的作者，最近他成为了 Ubuntu Server 的会员。</p></blockquote>\n<p>我使用 Linux 大概已经有 15 年的时间了，在这期间一直都在尝试使用各种桌面环境。在我职业生涯的大部分时间里，我一直是一个坚定的 KDE Plasma 用户（从 2.x 版开始使用），一直坚持使用 Plasma 至 4.x 系列的大部分版本，最终由于稳定性问题，选择了迁移到其他的桌面环境。此后，我尝试过使用 Xfce, MATE, Openbox 等桌面环境。但自从我选择投入 <a href=\"https://www.gnome.org/gnome-3/\" target=\"_blank\" rel=\"nofollow\">GNOME 3</a> 的怀抱后，我就再没有离开过它了。GNOME 是一个稳定且反应灵敏的桌面环境，它使得我可以专注于自己的工作而尽可能少地受到干扰。</p>\n<p>下面说一下我彻底沉醉于 GNOME 3 Shell 的六个原因。</p>\n<h3 id=\"h2_0\">1. 智能且稳定</h3>\n<p>自从切换到 GNOME 3 以来，我并没有遇到过任何稳定性方面的问题。我已经在三台 System76 机器和两台戴尔 Latitude 笔记本电脑上运行 GNOME 3 了，而且它在每台机器上的表现都十分优秀。总之，在 GNOME 上的体验不能更好了 —— 它十分稳定并且永远不会崩溃，这是十分重要的。</p>\n<p>虽然我使用 GNOME 3 的体验一直都很稳定，但在使用测试的 beta 版时，仍然会遇到一些崩溃的场景。当出现这些通常由错误的 beta 版驱动引起的崩溃时（而不是 GNOME 本身），GNOME 3 的恢复功能仍能允许我从锁定中恢复。如果 shell 已经停止响应，我所要做的是按下 ALT+F2，然后按下 R 和 Enter 来重新启动会话，而这不会丢失正在运行的应用程序。事实上，即使强制重新启动 GNOME Shell，它不仅会把应用程序带回来，还会把它们放回到重新启动之前的同一个显示器/工作区上。</p>\n<p>上面的案例只是想告诉大家 GNOME 是如此的智能和稳定 —— 使用它的期间，我确实没遇到过崩溃的场景。而且 GNOME 内置的恢复功能，使得我可以重启整个会话而不用担心丢失正在运行的作业。</p>\n<h3 id=\"h2_1\">2. 不影响我的使用体验</h3>\n<p>我听过对于 GNOME 3 的一个抱怨是它的桌面组件太大，并且在显示器上占用了太多的空间。但我认为，相比其他的桌面环境，GNOME 3 拥有一个更干净的界面。它的大多数桌面组件都包含在 Activities 的概览中，屏幕顶部只有一个非常窄的面板，让桌面的其余部分用于任何正在进行的工作。GNOME 2.x 和 MATE 的默认布局都有两个面板，因此占用了两倍的空间。虽然可以像 MATE 一样自定义环境来使用单个面板。但 GNOME 3.x 不使用旧的两个面板的布局，为应用程序留出了更多的空间。</p>\n<p>由于 GNOME 的大部分桌面组件都包含在 Activities 概览中，所以它永远不会影响我的使用。如果我想更加专注于某些东西，我可以在使用 GNOME 的终端时按下 F11，使其占满整个屏幕。如果我想再次访问 GNOME 界面，我只需按下 <a href=\"https://help.gnome.org/users/gnome-help/stable/keyboard-key-super.html.en\" target=\"_blank\" rel=\"nofollow\">Super</a> 键。在我尝试过的所有桌面环境中（事实上我已经尝试过所有的桌面环境），GNOME 更能提高我的生产力，并且给我的显示屏留下更多的空间这个特性对我来说真的十分重要。</p>\n<h3>3. 显示器的切换能保持正常工作</h3>\n<p>多年以来，我都是使用一个带有扩展坞的笔记本电脑连接到双显示器，这是使用 Linux 唯一的最令人沮丧的地方。我也数不清丢失作业的次数了，因为我的笔记本电脑使用扩展坞与显示器进行连接时会出现死机的情况，或 Xorg Server 崩溃。我几乎习惯了 Linux 上混乱的扩展坞使用体验，直到切换至 GNOEM 3。</p>\n<p>到目前为止，GNOME 3 是我使用过的唯一一个对扩展坞是完全可靠的桌面环境。当我卸下扩展坞时，GNOME 会切换回笔记本电脑，并将所有在两个显示器上运行的应用程序移至单个的内置显示器上，GNOME 不仅可以在不锁定的情况下处理扩展坞，还可以在锁定前十分智能地将应用程序重新移动至启动的显示器上。对我而言，这是十分完美的 —— 没有死机或崩溃。因为我使用扩展坞，所以 GNOME 似乎是我最好的选择。</p>\n<h3 id=\"h2_3\">4. 大量的扩展</h3>\n<p>有人说 GNOME 3 的默认界面是十分有限的，你不能做太多的工作来进行定制。但是默认的设置已经可以很好地为我服务了，不能说 GNOME 不可以定制。它的界面可以通过扩展进行自定义，允许你按照自己的喜欢的方式调整桌面环境。这些扩展可以显示当前的天气状况，在 NetworkManager 的无线网络列表中添加一个刷新图标，插入新菜单，以及更多的其他事情。可通过 <a href=\"https://extensions.gnome.org/\" target=\"_blank\" rel=\"nofollow\">extensions.gnome.org</a> 获取扩展，也可以通过 <a href=\"https://git.gnome.org/browse/gnome-tweak-tool/\" target=\"_blank\" rel=\"nofollow\">GNOME Tweak</a> 工具来管理他们。</p>\n<p>但扩展既是天使也是魔鬼，因为不同的扩展有不同的程度的稳定性和质量。<a href=\"https://opensource.com/article/17/2/top-gnome-shell-extensions\" target=\"_blank\" rel=\"nofollow\">最好的扩展</a>能帮助你完成一些通常不能完成的事情，而糟糕的扩展可能会拖慢桌面环境的运行速度或导致其崩溃。我的建议是适量地使用扩展（质量比数量重要），因为太多的扩展可能会导致稳定性问题或混论的桌面环境。平均来说，我尽量不会安装超过三个以上的扩展。因为我发现大多数扩展只是稍微增强了使用的体验，并不是必需品。我个人最喜欢的三个扩展是 OpenWeather, TopIcons Plus, 和 Workspace Indicator。虽然 Dash to Dock 可能是最受欢迎的扩展，但我不使用它，因为 GNOME 3 默认的体验已经足够满足我的使用需求。</p>\n<p>虽然扩展可以使得体验更好，但在大多数情况下，我并不是真的需要它们。GNOME 3 的默认布局不仅适合我的需要，而且我安装的任何扩展只是增强了体验，但不是我完成工作所必需的。</p>\n<h3 id=\"h2_4\">5. 动态的工作区</h3>\n<p>动态的工作区(workspaces)是使我离不开 GNOME 3 的功能之一。它的概念十分简单，你可以从单个工作区开始，然后会根据需要自动添加更多的工作区。你可以通过按下 Super 键轻松查看在工作区上运行的所有应用程序。看起来这并没解决什么大的问题，但如果你是那种在将一个又一个的窗口叠加在一起的人，你可以使用此功能轻松查看正在运行的内容，并关闭未使用的应用程序。按住 Ctrl+Alt 键并同时按向上或向下的箭头可以在活动的工作区之间切换。当在工作区上打开应用时，会自动创建一个新的空白工作区以便开始使用。当关闭工作区中的所有应用程序时，它们也将被删除。</p>\n<p>这似乎与我们一直以来管理运行的应用程序的方式有很大的区别，但如果你尝试过之后，你可能会喜欢这种方式。我通常在每个工作区中运行一个应用程序，因为我发现使用 Ctrl+Alt+上/下箭头来进行切换比单击面板中的应用程序要快得多，而且效率更高。如果我需要在工作区中运行多个应用程序，我会将它们贴在显示器的左右边缘。</p>\n<p>关于 GNOME 3 处理工作区的方式的另一件事是，如果有多个显示器连接到计算机，默认情况下只有一个显示器启用了工作区。这意味着当我切换工作区时，只有左侧的显示器在它们之间循环，右侧的显示器则保持静止。这允许我在右边的显示器打开一个终端窗口，当我想检查我的消息时，我可以切换工作区以使用我的电子邮件客户端，而不会错过终端中发生的情况。</p>\n<h3 id=\"h2_5\">6. 自定义主题</h3>\n<p>老实说，GNOME 3 的默认主题不是我用过的桌面环境中最好看的（当然也不是最差的）。它的简洁性很好，但对于像我这种喜欢主题并修饰主题的人，可以自定义视觉效果以适应我的口味是十分重要的。</p>\n<p>幸运的是，在 GNOME 中安装主题十分容易。要安装新的主题，只需下载主题（<a href=\"https://www.opendesktop.org/s/Gnome\" target=\"_blank\" rel=\"nofollow\">gnome-look.org</a> 是一个不错的下载源），并将下载的文件解压到主目录的 <strong>.themes </strong>目录中。通过使用 GNOME Tweak 工具，可以在安装的主题之间进行循环。它允许你更改应用程序的外观以及 GNOME Shell 本身。</p>\n<p>最近还没有太多可用的 GNOME 3 主题，Arc 和 Numix 主题几乎占据了所有的焦点。这些主题当然是很好的，但有更多的选择就更好了。幸运的是，自从 Ubuntu 宣布将 GNOME 切换为默认的桌面环境之后，主题社区似乎正在加班工作，现在出现了更多的主题。我个人最喜欢的主题是 Vimix Dark，你的是什么？</p>\n<p>虽然我通常会尝试其他的桌面环境以与桌面 Linux 的发展同步，但我最后总会回归到 GNOME。GNOME 3.x 可能不适用于每个人，但我建议可以给它一次尝试的机会。GNOME 处理某些问题的方式初次看起来可能很奇怪，但它是一个很好的桌面环境，与其他我使用过的任何图形用户界面相比，它使得我更高效地完成我的工作。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112167\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112167votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112167\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 5, "create_date": "2017-09-15"},{"front_image_path": "full/dcc89c273e9c6289e0b7a4143b0a918cb2a6075e.jpg", "url_object_id": "31a86b3ac18cd1f7d95efa9a354872a2", "praise_nums": "4", "title": "Zookeeper，你可把我坑惨了！", "tags": "IT技术,Zookeeper", "front_image_url": ["http://upload-images.jianshu.io/upload_images/3675768-3f329debd5a32b4b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"], "url": "http://blog.jobbole.com/112233/", "comment_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.jianshu.com/p/81601bb6914b\">泡面办公室/杜伟</a>   </div><h3>1 说多了都是泪</h3>\n<p>前些日子，我们<b>被自己部署的 Zookeeper 集群 DDOS 攻击了</b>，惊不惊喜，意不意外？肯定有很多朋友会问，怎么会呢？</p>\n<p>一般来说确实不可能，但在一系列条件的配合下，可以把不可能变为可能（感觉好励志有木有！），下面就让我给大家一一道来。</p>\n<div class=\"image-package\"><img class=\"aligncenter\" src=\"//upload-images.jianshu.io/upload_images/3675768-3f329debd5a32b4b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\"></div>\n<h3>2 交代下前提</h3>\n<p>在讲故事前，有几个前提先跟大家说明下：</p>\n<h4>前提一</h4>\n<p>我们公司服务治理框架用的是 Dubbo，注册中心使用的是 Zookeeper 集群。但是早期规划的时候，为了运维和开发维护简单，将 Zookeeper 的 IP 放到了 F5 的一个 VS Pool 里，后续增加或修改节点直接修改 VS Pool ，应用中注册中心配置的就是这个 VS 地址。</p>\n<p>我们年前已经发现这种连接方式存在弊端（应用通过 F5 与 Zookeeper 之间的心跳检测经常中断），并发布了邮件让大家改为直连 Zookeeper 集群，但没有重视，也没有强制要求。</p>\n<h4>前提二</h4>\n<p>我们有两个数据中心，且关键业务应用都实现了双活。但因为一些应用没有部署双活，所以存在跨机房服务调用与治理。因此，早期规划的时候 Zookeeper 也是在一个机房部署了集群，但这种模式在 Zookeeper 进行消息广播时，会占用较多的专线带宽。</p>\n<p>经监控系统报警后，我们决定在下周进行 Zookeeper 部署改造，一个机房部署普通 Zookeeper 节点，另一个机房部署 Oberserver 节点，同时修改 DNS，让应用连接本机房的 Zookeeper 节点，这样可以有效降低跨机房带宽占用。</p>\n<h3>3 吃一堑</h3>\n<p>那是一个周五的下午，大家本应该轻松下班，然后享受周末。突然监控系统报警 F5 流量过高，导致请求被阻塞。紧急来到案发现场，得到的信息是 Zookeeper 集群是流量大户。按照应急处理原则，我们将所有可能的上线都进行了回滚，但问题没有得到改善。于是，我们怀疑是不是某些应用连接 Zookeeper 做了坏事。</p>\n<p>通过网络抓包，看了下基本全是 Dubbo 的注册和订阅事件。当时我也非常奇怪，Dubbo 与 Zookeeper 之间只有在心跳检测失败时才会有大量的广播事件，导致流量上升。但我们的 F5 硬件、网络、 Zookeeper 服务都非常正常，一时之间想不到问题的原因，线索又中断了。</p>\n<p>所以当时的第一决定是启动紧急上线，即按照前提 1 中提到的，直接修改公司所有应用的配置文件，让大家直连 Zookeeper 集群，而不通过 F5 做代理。这一过程很坎坷，因为涉及的应用太多，但是完成改造后，F5 的流量终于降下来了。</p>\n<p>正当我们以为终于解决问题时，灾难再次发生，跨机房专线流量过高，导致电信机房业务受到影响，还是 Zookeeper 在疯狂的广播。当时的第一想法，是不是同时注册引起的，再加上本身专线带宽就不富裕。我们提议将前提 2 中的方案也实施，看一下效果。</p>\n<p>经过一番折腾后，专线流量也下来了，同时看业务也恢复了正常，加上人困马乏，我们决定后续再研究下之前抓取的网络包，先让大家回去休息下，以免明天没人支持。</p>\n<p>周六的一天，就这样在偶尔的报警中度过了。至于分析网络包，看了几个内容后，发现都是正常的服务注册和订阅事件，也是一头雾水。</p>\n<div class=\"image-package\"><img class=\"aligncenter\" src=\"//upload-images.jianshu.io/upload_images/3675768-56176261a1d52386.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\"></div>\n<p>然后从周日 5 点开始，部分业务突然报警，网络 Ping 不通。经排查发现，受影响的业务，都是和 Zookeeper 部署在同一宿主机的应用。Zookeeper 吃掉了宿主机 600M 的带宽。由于还是没查询出“内鬼”是谁，我们只能定下临时方案：迁移 Zookeeper ，部署到与业务系统无关的宿主机上。</p>\n<p>正当我们赶赴公司，准备完成迁移 Zookeeper 时，突然某个同事发现一个非常大的网络报文。当他把数据包给我看后，真的是柳暗花明的感觉，“内鬼”终于找到了。原来是一个基础服务，配置了很多路由规则，导致一个包的大小有几百 k ，而我们的机房里有将近两千台机器， Zookeeper 的性能又是变态的强，于是一切的巧合安排在一起，一瞬间，流量打死了物理机，打死了专线，打死了 F5……于是，事情就这样发生了。当我们把一堆无用规则删除后，整个世界安静了，所有报警都消失了。</p>\n<h3>4 长一智</h3>\n<p>故事讲到这里似乎就结束了，可是等等，我们在这件事故中到底犯了哪些错误，我们来复盘一下：</p>\n<p>在前提 1、2 中，我们发现了异常，却<b><i>没有刨根问底</i></b>，只是凭感觉认为做个简单处理方案即可。魔鬼在细节，一切的灾难在发生前都是有征兆的，如果再多一丝细心，多一丝警惕，结果也许会全然不同。</p>\n<p>同样在前提 1、2 中，整个事件的追踪与跟进完全没有，<b><i>问题没有闭环</i></b>，没有协作推进。</p>\n<p><b><i>监控不完善</i></b>，不论是内网的流量监控还是 Zookeeper 方面的监控都缺失，完全是靠运气找到了有问题的数据包。</p>\n<p><b><i>SOA 技术运营缺失</i></b>，由于功能权限的随意下放，导致造成了灾难的后果。</p>\n<p><b><i>技术架构选型与搭建时不够谨慎</i></b>，不管是 Zookeeper 集群的搭建还是 Dubbo 在服务治理那些坑不能踩等等，都没有去仔细讨论与思考。</p>\n<p>技术没有好坏之分，关键是看人如何运用。一定避免人云亦云，适合自己公司技术体系的就是最好的。选好自己公司的技术体系后，最重要的就是做好运维与监控工作。监控的每一次报警，就像先兆一样，万万不可掉以轻心。运维的事情，永远是最辛苦最复杂的，但不能因为这些，就将权限随意下放，一定要确保自己可以掌控全局。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112233\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112233votetotal\">4</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112233\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 4, "create_date": "2017-09-15"},{"front_image_path": "full/13524960e8d4632f6f07ce3aa9b88181ad54518f.jpg", "url_object_id": "4328959c58aa9ead28de3477f219829b", "praise_nums": "2", "title": "一文带你理解深度学习的局限性", "tags": "IT技术,深度学习", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/08/c4ec441b51f9ac4f55dc702a6ae0e757.jpg"], "url": "http://blog.jobbole.com/112109/", "comment_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://blog.keras.io/the-limitations-of-deep-learning.html\">Francois Chollet</a>   译文出处：<a target=\"_blank\" href=\"http://www.iteye.com/news/32557\">CSDN - 聂震坤</a>   </div><h3><strong>深度学习：几何视图</strong></h3>\n<p>深度学习最令人惊讶的特点便是极易上手。十年以前，没有人可以猜得到经过梯度下降法训练过的简单参数模型可以在机器感知问题上实现如此惊人的结果。现在，事实证明，研究者所需要做的只是使用足够大的梯度下降素材来训练参数模型。正如 Feynman 曾经描述宇宙一样，“它并不复杂，只是里面包含的东西实在太多。”</p>\n<p>在深度学习中，所有的东西都是一个向量（任何的东西都是几何空间中的一个点）。模型的输入（可能是文字，图片，等等）和目标首先被向量化（变成了一些初始输入向量空间和目标向量空间）。深度学习模型中的每个层都对通过它的数据进行一个简单的几何变换。同时，模型的层链形成一个非常复杂的几何变换，分解成一系列简单的几何变换。这种复杂的转换尝试将输入空间映射到目标空间，一次一个点。该变换按层级的比重进行参数化，这些层根据模型当前执行的程度进行迭代更新。这种几何变换的一个关键特征是它必须是可微分的，这是为了使我们能够通过梯度下降来学习来获得其参数。更直接一点，这意味着从输入到输出的几何变形必须是平滑和连续的——这是一个显着的约束。</p>\n<p>这种复杂的几何变换应用到输入数据的整个过程可以理解为一个试图破坏纸球的人在3D中被可视化。褶皱的纸球可以理解为模型开始时的大量输入数据。每一次人的行为则是数据通过不同层级被处理的过程。完整的不起眼的人的手势序列是整个模型的复杂变换。深度学习模型是用于解决高维数据的复杂流形的数学机器。</p>\n<p>这便是深度学习的奥妙：将含义转化为向量，几何空间，然后逐步学习将一个空间映射到另一个空间的复杂几何变换。所以开发者需要有足够高的维度的空间以便拥有原始数据关系的全部范围。</p>\n<p><strong>深度学习的局限性</strong></p>\n<p>可以通过这种简单策略实现的应用程序空间几乎是无限的。然而到目前为止，更多的应用程序对于当前的深入学习技术是完全无法实现的——即使是大量人为注释的数据。例如，你可以组装一个数据，数十万甚至数百万的英文语言描述软件产品的功能。由产品经理编写，由一个团队开发的相应的源代码并且有工程师满足这些要求。即使有这些数据，也不能训练出一个深入的学习模型来简单地阅读产品描述并生成相应的代码库。这只是其中一个例子。</p>\n<p>一般来说，无论投入多少数据，任何需要推理式编程或应用科学方法（长期规划和类似算法的数据操作）都无法使用深度学习模式进行实现。 即使是学习具有深层神经网络的排序算法也是非常困难的。</p>\n<p>这是因为一个深入的学习模型是“简单的”连续的几何变换链，将一个向量空间映射到另一个。他所可以做的是将一个数据包X映射到另一个数据包Y，并假设存在从X到Y的可学习的连续变换与X:Y的秘籍采用可用性作的数据。所以即使一个深入的学习模型可以被解释为一种程序，相反的大多数程序不能表示为深度学习模型 – 对于大多数任务，要么没有相应的实际大小的深层神经网络来解决任务，要么即使存在一个，它也可能不可学习，即相应的几何变换可能太复杂，或者可能没有可用的数据来学习它。通过堆叠更多层次和使用更多的培训数据来扩展当前的深度学习技术，只能表面缓解其中的一些问题。 深度学习模式在可以代表的方面是非常有限的，而且大多数希望学习的程序不能被表达为连续几何变形的数据流。</p>\n<p><strong>拟人化机器学习模型的隐患</strong></p>\n<p>现阶段人工智能的一个不得不面对的问题在于研究者们误解了深度学习模式的做法，并高估了自己的实力。人类思想的一个根本特征是我们的“主观意识”，我们倾向于对我们周围的事物投射意向，信仰和知识。在一个石头上画一个笑脸感觉石头都变高兴了。同样在深度学习中，当我们有能力成功地训练一个模型来创作描述图片的标题时，我们误认为该模型“理解”图片的内容以及它产生的标题。然而，当轻微改变训练数据中存在的图像时，研发者会非常惊讶的发现模型开始创作完全荒谬的字幕。</p>\n<div><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/80b358a0334bd3f848b9040a6ecc43b0.png\"></div>\n<h3>通常，这类行为被强调为对抗例子，是通过向深度学习网络输出错误的样本来欺骗模型进行分类。通过梯度上升，可以稍微修改图像，以便最大化给定类的预测。 通过拍摄一只熊猫，并添加一个“长臂猿”梯度，我们可以得到一个神经网络将这只熊猫分类为长臂猿。 这证明了这些模型的脆弱性，以及它们运行的输入到输出映射与我们自己的人类感知之间的深刻差异。</h3>\n<div><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/28bc6f2c7b510a1638a064d2f67bb284.png\"></div>\n<h3>简而言之，深度学习模式对他们的输入没有任何理解，至少不是从人的意义上来说。我们对图像，声音和语言的理解是基于我们的运动感觉体验。然而机器人却没有这种经验，因此不能以任何以人为本的方式理解他们的驶入。通过输入大量的培训示例来训练我们的模型，我们让他们学习一个几何变换，将数据映射到这个特定的一组示例上的人类概念，但是这个映射只是我们思想中原始模型的简单草图， 从我们的体验中发展出来的假想——就像一面镜子中的一个昏暗的形象。</h3>\n<div><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/1ed2a28a045dfe53e0409369570c5fb6.png\"></div>\n<h3>作为一名机器学习从业者，始终要注意这一点，不要陷入陷阱，认为神经网络了解他们所执行的任务（并不会） – 至少不会对我们有意义。 他们接受了不同于我们教导，进行了不同的，更窄的任务的训练：即将训练投入与训练目标进行比较。 如果向他们展示偏离训练数据的任何东西，机器将以最荒谬的方式打破以前的结论。</h3>\n<p><strong>局部泛化与极端泛化</strong></p>\n<p>在深度学习模型所做的输入与输出之间的简单的几何变形以及人类思考和学习的方式之间似乎存在着根本的区别。人类不仅仅是从亲身体验中进行学习，还提供了明确的学习方法。除了不同的学习过程外，底层的特性有着根本的却别。</p>\n<p>人类的能力远不止对刺激做出回应，因为深网或者昆虫也可以。人会对目前的情况形成抽象复杂的模型，并根据这些模型来预测不同的未来，且进行长期的规划。人类有能力将已知的概念融合在一起，来表现以前从未经历过的事情，比如穿着牛仔裤的马，或者想象如果中了彩票会做什么。这种处理假设的能力，使我们的心理模型空间远远超过了我们可以直接体验到的一切。这种行为被称为极端泛化。</p>\n<p>这与深层网络的局部泛化形成了鲜明的对比：如果训练时间内新的输入信息差异甚微，则停止从输入到输出的映射。假设使用机器来学习适当的发射参数以解决火箭登陆月球的问题，在使用深网进行此项任务时，无论是使用监督学习还是强化学习进行培训，都需要数以千万次的启动试验作为补充，以便学习从入空间到输出空间的可靠映射。相比之下，人类可以利用抽象能力来提出物理模型——火箭科学，并得到一个精确地解决方案，只需要一次或几次时间即可以让火箭成功登月。同理，如果开发一款控制人体的深网，并希望他学会安全的在城市里行驶。那么在在这种情况下则需要现在各种情况下死掉数千次直到可以推断出危险的行车路线并制定合适的回避行为。当进入一个新的城市，深网有需要重新学习大部分知识。相反，人类能够直接学习安全行为而不用经历死亡，这都要归功于人脑的抽象建模。</p>\n<div><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/cff17cac3a2dbd53c2f8a966899831d1.png\"></div>\n<h3>简而言之，尽管我们在机器感知方面取得了不小的进步，但是我们仍然离人类级别的人工智能有很大区别。我们的模型只能执行局部泛化，在过去中学习来适应最新的情况。而人类可以极端泛化，迅速适应大胆新奇的情况，或为长期未来的情况进行规划。</h3>\n<p><strong>总结</strong></p>\n<p>作为一个开发者应当记住：迄今为止，深入学习的唯一真正的成功是使用大量的人为注释的数据让机器使用连续的几何变换将空间X映射到空间Y。 做好这一切，则可以改变行业的游戏规则。但想让AI拥有人类的智慧，仍然有很长的路要走。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112109\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112109votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112109\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 2, "create_date": "2017-09-15"},{"front_image_path": "full/b019444f07f74231bdbf3445811ed2d3e5e85724.jpg", "url_object_id": "697cda33f7258dcfabbacb139fb85b20", "praise_nums": "2", "title": "程序员的自我修养：温故而知新", "tags": "职场,程序员", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/08/fd582ce02602d145acd4982f8b868c92.png"], "url": "http://blog.jobbole.com/112161/", "comment_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/Tan-sir/p/7272652.html\">目不识丁</a>   </div><h2>1.1从Hello World说起</h2>\n<p>目的：从最基本的编译，静态链接到操作系统如何转载程序，动态链接及运行库和标准库的实现，和一些操作系统的机制。了解计算机上程序运行的一个基本脉络。</p>\n<h2>1.2变不离其宗</h2>\n<p>计算机最关键的三个部分：CPU,内存,I/O控制芯片。</p>\n<ul>\n<li>早期的计算机：没有复杂的图形功能，CPU和内存频率一样，都连接在同一个总线上。</li>\n<li>CPU频率提升：内存跟不上CPU，产生了和内存频率一致的系统总线，CPU使用倍频的方式和总线通信。</li>\n<li>图形界面的出现：图形芯片需要和内存和CPU大量交换数据，慢速的I/O总线无法满足图形设备的巨大需求。为了高效处理数据，设计了一个高速的北桥芯片。后来有设计处理低速处理设备南桥芯片，磁盘，USB，键盘都是连接在南桥上。在由南桥将它们汇总到北桥上。</li>\n</ul>\n<h5><strong>北桥</strong></h5>\n<ul>\n<li>北桥左边CPU和cache：CPU负责所有控制和运算。</li>\n<li>北桥下面PCI总线</li>\n<li>北桥右边memory</li>\n</ul>\n<h5>SMP和多核</h5>\n<p>现在CPU已经达到物理极限，被4GHz所限制，于是，开始通过增加CPU数量来提高计算机速度。<br>\n<strong>对称多处理器（SMP）</strong>：最常见的一种形式。每个CPU在系统中所处的地位和所发挥的功能是一样，是相互对称的。但在处理程序时，我们并不能把他们分成若干个不相干的子问题，所以，使得多处理器速度实际提高得并没有理论上那么高。当对于相互独立的问题，多处理器就能最大效能的发挥威力了（比如：大型数据库,网络服务等）。<br>\n对处理器由于造价比较高昂，主要用在商用电脑上，对于个人电脑，主要是<strong>多核处理器</strong>。<br>\n多核处理器：其实际上是(SMP)的简化版，思想是将多个处理器合并在一起打包出售，它们之间共享比较昂贵的缓存部件，只保留了多个核心。在逻辑上看，它们和SMP完全相同。</p>\n<h2>1.3站得高,看得远</h2>\n<p><strong>系统软件</strong>：一般用于管理计算机本地的软件。</p>\n<p>主要分为两块：</p>\n<ul>\n<li>平台性的：操作系统内核，驱动程序，运行库。</li>\n<li>程序开发：编译器，汇编器，链接器。</li>\n</ul>\n<p>计算机系统软件体系结构采用一种<strong>层</strong>的结构。<br>\n每个层次之间都需要相互通信，那么它们之间就有通信协议，我们将它称为接口，接口下层是提供者，定义接口。上层是使用者，使用接口实现所需功能。<br>\n除了硬件和应用程序，其他的都是中间层，每个中间层都是对它下面的那层的包装和扩展。它们使得应用程序和硬件之间保持相对独立。<br>\n从整个层次结构来看，开发工具与应用程序属于同一个层次，因为它们都使用同一个接口—操作系统<strong>应用程序编程接口</strong>。应用程序接口提供者是运行库，什么样的运行库提供什么样的接口。winsows的运行库提供Windows API，Linux下的Gliba库提供POSIX的API。<br>\n运行库使用操作系统提供的<strong>系统调用接口</strong>。<br>\n系统调用接口在实现中往往以<strong>软件中断</strong>的方式提供。<br>\n操作系统内核层对于硬件层来说是硬件接口的使用者，而硬件是接口的定义者。这种接口叫做<strong>硬件规格</strong>。</p>\n<h2>1.4操作系统做了什么</h2>\n<p>操作系统的一个功能是提供抽象的接口，另外一个主要功能是管理硬件资源。<br>\n一个计算机中的资源主要分CPU,存储器（包括内存和磁盘）和I/O设备。下面从这3个方面来看如何挖机它们。</p>\n<h3>1.4.1不要让CPU打盹</h3>\n<p><strong>多道程序</strong>：编译一个监控程序，当程序不需要使用CPU时，将其他在等待CPU的程序启动。但它的弊端是不分轻重缓急，有时候一个交互操作可能要等待数十分钟。<br>\n改进后<br>\n<strong>分时系统</strong>：每个CPU运行一段时间后，就主动让出给其他CPU使用。完整的操作系统雏形在此时开始出现。但当一个程序死机的时候，无法主动让出CPU，那么，整个系统都无法响应。<br>\n目前操作系统采用的方式<br>\n<strong>多任务系统</strong>：操作系统接管了所有的硬件资源，并且本身运行在一个受硬件保护的级别。所有的应用都以<strong>进程</strong>的方式运行在比操作系统更低的级别，每个进程都有自己独立的地址空间，使得进程之间的地址空间相互隔离。CPU由操作系统进行同一分配，每个进程根据进程优先级的高低都有机会获得CPU，但如果运行超过一定的时间，CPU会将资源分配给其他进程，这种CPU分配方式是<strong>抢占式</strong>。如果操作系统分配每个进程的时间很短，就会造成很多进程都在同时运行的假象，即所谓的<strong>宏观并行，微观串行</strong>。</p>\n<h5><a name=\"%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8\"></a>设备驱动</h5>\n<p>操作系统作为硬件层的上层，它是对硬件的管理和抽象。<br>\n对于操作系统上面的运行库和应用程序来说，它们只希望看到一个统一的硬件访问模式。<br>\n当成熟的操作系统出现后，硬件逐渐成了抽象的概念。在UNIX中，硬件设备的访问形式和访问普通的文件形式一样。在Windows系统中，图形硬件被抽象成GDI，声音和多媒体设备被抽象成DirectX对象，磁盘被抽象成普通文件系统。<br>\n这些繁琐的硬件细节全都交给了操作系统中的硬件驱动。<br>\n文件系统管理这磁盘的存储方式。<br>\n<strong>磁盘的结构</strong>：一个硬盘往往有多个盘片，每个盘片分两面，每面按照同心圆划分为若干磁道，每个磁道划分为若干扇区，每个扇区一般512字节。<br>\n<strong>LBA</strong>：整个硬盘中所有扇区从0开始编号，一直到最后一个扇区，这个扇区编号叫做<strong>逻辑扇区号</strong>。<br>\n文件系统保存了这些文件的存储结构，负责维护这些数据结构并且保证磁盘中的扇区能有效的组织和利用。</p>\n<h2>1.5内存不够怎么办</h2>\n<p>在早期计算机中，程序是直接运行在物理内存上的，程序所访问的都是物理地址。<br>\n那么如何将计算机有限的地址分配给多个程序使用。<br>\n直接按物理内存分配将产生很多问题：</p>\n<ul>\n<li><strong>地址空间不隔离</strong>：所有的程序都直接访问物理地址，导致程序使用的物理地址不是相互隔离的，恶意的程序很容易串改其他程序的内存数据。</li>\n<li><strong>内存使用效率低</strong>：由于没有有效的内存管理机制，通常一个程序执行的时候，监控程序要将整个程序读入。内存不够的时候，需要先将内存中的程序读出，保存在硬盘上，才能将需要运行的程序读入。这样会使得整个过程有大量数据换入换出。</li>\n<li><strong>程序运行地址不确定</strong>：每次程序运行都需要内存分配一块足够大的内存空间，使得这个地址是不确定的。但在程序编写的时候，他访问的数据和指令跳转的目标地址都是固定的，这就涉及到了程序的<strong>重定向</strong>问题。</li>\n</ul>\n<p>一种解决办法：<br>\n<strong>中间层</strong>：使用一种间接的地址访问方法，我们把程序给出的地址看作一种<strong>虚拟地址</strong>。虚拟地址是物理地址的映射，只要处理好这个过程，就可以起到隔离的作用。</p>\n<h3>1.5.1关于隔离</h3>\n<p>普通的程序它只需要一个简单的执行环境，一个单一的地址空间，有自己的CPU。<br>\n地址空间比较抽象，如果把它想象成一个数组，每一个数组是一字节，数组大小就是地址空间的长度，那么32位的地址空间大小就是2^32=4294967296字节，即4G，地址空间有效位是0x00000000~0xFFFFFFFF。<br>\n地址空间分为两种：<br>\n<strong>物理空间</strong>：就是物理内存。32位的机器，地址线就有32条，物理空间4G，但如果值装有512M的内存，那么实际有效的空间地址就是0x00000000~0x1FFFFFFF，其他部分都是无效的。<br>\n虚拟空间：每个进程都有自己独立的虚拟空间，而且每个进程只能访问自己的空间地址，这样就有效的做到了进程隔离。</p>\n<h3>1.5.2分段<a name=\"152%E5%88%86%E6%AE%B5\"></a></h3>\n<p>基本思路：把一段与程序所需要的内存空间大小的虚拟空间映射到某个地址空间。虚拟空间的每个字节对应物理空间的每个字节。这个映射过程由软件来完成。<br>\n分段的方式可以解决之前的第一个（地址空间不隔离）和第三个问题（程序运行地址不确定）<br>\n第二问题内存使用效率问题依旧没有解决。</p>\n<h3>1.5.3分页</h3>\n<p>基本方法：把地址空间人为的分成固定大小的页，每一页大小有硬件决定或硬件支持多种大小的页，由操作系统决定页的大小。<br>\n目前几乎所有的PC上的操作系统都是4KB大小的页。<br>\n我们把进程的虚拟地址空间按页分割，把常用的数据和代码页转载到内存中，把不常用的代码和数据保存到磁盘里，当需要的时候从磁盘取出来。<br>\n虚拟空间的页叫做<strong>虚拟页（VP）</strong>,物理内存中页叫做<strong>物理页</strong>，把磁盘中的页叫做<strong>磁盘页</strong>。虚拟空间的有的页被映射到同一个物理页，这样就可以实现内存共享。<br>\n当进程需要一个页时，这个页是磁盘页时，硬件会捕获到这个消息，就是所谓的<strong>页错误</strong>，然后操作系统接管进程，负责从磁盘中读取内容装入内存中，然后再将内存和这个页建立映射关系。<br>\n<strong>保护</strong>也是页映射的目的之一，每个页都可以设置权限属性，只有操作系统可以修改这些属性，这样操作系统就可以保护自己保护进程。<br>\n<strong>虚拟存储</strong>的实现需要依靠硬件支持，所有硬件都采用一个叫做MMU的部件来进行页映射。<br>\nCPU发出虚拟地址经过MMU转换成物理地址，MMU一般都集成在CPU内部。</p>\n<h2>1.6众人拾柴火焰高</h2>\n<h3>1.6.1线程基础<a name=\"161%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80\"></a></h3>\n<p>多线程现在作为实现软件并发执行的一个重要方法，具有越来越重的地位。</p>\n<h5><a name=\"%E4%BB%80%E4%B9%88%E6%98%AF%E7%BA%BF%E7%A8%8B\"></a>什么是线程</h5>\n<p><strong>线程</strong>有时被称为轻量级的进程，是程序执行流的最小单位。</p>\n<p>构成：</p>\n<ul>\n<li>线程ID</li>\n<li>当前指令指针</li>\n<li>寄存器集合</li>\n<li>堆栈空间（代码段，数据段，堆）</li>\n<li>进程级的资源（打开文件和信号）</li>\n</ul>\n<p>线程与进程的关系：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/08/fd582ce02602d145acd4982f8b868c92.png\" alt=\"\"></p>\n<p>多线程可以互不干扰的并发执行，并共享进程的全局变量和堆的数据。<br>\n使用多线程的原因有如下几点：</p>\n<ul>\n<li>某个操作可能会陷入长时间等待，等待的线程会进入睡眠状态，无法继续执行。</li>\n<li>某个操作会消耗大量的时间，如果只有一个线程，程序和用户之间的交互会中断。</li>\n<li>程序逻辑本身就要求并发操作。</li>\n<li>多CPU或多核计算机，本身具备同时执行多个线程的能力。</li>\n<li>相对于多进程应用，多线程在数据共享方面效率要高很多。</li>\n</ul>\n<h5><a name=\"%E7%BA%BF%E7%A8%8B%E7%9A%84%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90\"></a>线程的访问权限</h5>\n<p>线程的访问非常自由，它可以访问进程内存里所有数据，包括其他线程的堆栈（如果知道地址的话，情况很少见）。<br>\n线程自己的私用存储空间：</p>\n<ul>\n<li>栈（并发完全无法被其他线程访问）</li>\n<li>线程局部存储。某些操作系统为线程提供私用空间，但容量有限。</li>\n<li>寄存器。执行流的基本数据，为线程私用。</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>线程私用</th>\n<th>线程间共享（进程所有）</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>局部变量</td>\n<td>全局变量</td>\n</tr>\n<tr>\n<td>函数参数</td>\n<td>堆上数据</td>\n</tr>\n<tr>\n<td>TLS数据</td>\n<td>函数里的静态变量</td>\n</tr>\n<tr>\n<td></td>\n<td>程序代码</td>\n</tr>\n<tr>\n<td></td>\n<td>打开的文件，A线程打开的文件可以由B线程读取</td>\n</tr>\n</tbody>\n</table>\n<h5><a name=\"%E7%BA%BF%E7%A8%8B%E8%B0%83%E5%BA%A6%E4%B8%8E%E4%BC%98%E5%85%88%E7%BA%A7\"></a>线程调度与优先级</h5>\n<p>不论在多处理器还是单处理器上，线程都是“并发”的。<br>\n线程数量小于处理器数量时，是真正并发的。<br>\n单处理器下，并发是模拟的，操作系统会让这些多线程程序轮流执行，每次都只执行一小段时间，这就称为<strong>线程调度</strong>。<br>\n线程调度中，线程拥有三种状态：</p>\n<ul>\n<li>运行：线程正在执行</li>\n<li>就绪：线程可以立刻运行，但CPU被占用</li>\n<li>等待：线程正在等待某一事件发生，无法立即执行。</li>\n</ul>\n<p>处于运行中的线程拥有一段可以执行的时间，这称为<strong>时间片</strong>，当时间片用尽的时候，进程进入就绪状态，如果在用尽之前开始等待某事件，那么它就进入等待状态。每当一个线程离开运行状态的时候，调度系统就会选择一个其他的就绪线程继续执行。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/08/98d32af045fd36e5fc3477f9fe4a2758.png\" alt=\"\"></p>\n<p>现在的主流调度方法尽管都不一样，但基本都带有<strong>优先级调度</strong>和<strong>轮转法</strong>。<br>\n轮转法：各个线程轮流执行一段时间。<br>\n优先级调度：按线程的优先级来轮流执行，每个线程都拥有各自的线程优先级。<br>\n在win和lin里面，线程优先级不仅可以由用户手动设置，系统还会根据不同线程表现自动调整优先级。<br>\n一般频繁等待的线程称之为<strong>IO密集型线程</strong>，而把很少等待的线程称为<strong>CPU密集型线程</strong>。<br>\n优先级调度下，存在一种<strong>饿死</strong>现象。<br>\n饿死：线程优先级较低，在它执行之前，总是有较高级的线程要执行，所以，低优先级线程总是无法执行的。<br>\n当一个CPU密集型线程获得较高优先级时，许多低优先级线程就可能被饿死。<br>\n为了避免饿死，操作系统常常会逐步提升那些等待时间过长的线程。<br>\n线程优先级改变一般有三种方式：</p>\n<ul>\n<li>用户指定优先级</li>\n<li>根据进入等待状态的频繁程度提升或降低优先级</li>\n<li>长时间得不到执行而被提升优先级</li>\n</ul>\n<h5><a name=\"%E5%8F%AF%E6%8A%A2%E5%8D%A0%E7%BA%BF%E7%A8%8B%E5%92%8C%E4%B8%8D%E5%8F%AF%E6%8A%A2%E5%8D%A0%E7%BA%BF%E7%A8%8B\"></a>可抢占线程和不可抢占线程</h5>\n<p><strong>抢占</strong>：在线程用尽时间片之后被强制剥夺继续执行的权利，而进入就绪状态。<br>\n在早期的系统中，线程是<strong>不可抢占</strong>的，线程必须主动进入就绪状态。<br>\n在不可抢占线程中，线程主动放弃主要是2种：</p>\n<ul>\n<li>当线程试图等待某个事件（I/O）时</li>\n<li>线程主动放弃时间片</li>\n</ul>\n<p>不可抢占线程有一个好处，就是线程调度只会发生在线程主动放弃执行或线程等待某个事件的时候，这样就可以避免一些抢占式线程时间不确定而产生的问题。</p>\n<h5><a name=\"linux%E7%9A%84%E5%A4%9A%E7%BA%BF%E7%A8%8B\"></a>Linux的多线程</h5>\n<p>Linux内核中并不存在真正意义上的线程概念。Linux所有执行实体（线程和进程）都称为<strong>任务</strong>，每一个任务概念上都类似一个单线程的进程，具有内存空间，执行实体，文件资源等。Linux不同任务之间可以选择共享内存空间，相当于同一个内存空间的多个任务构成一个进程，这些任务就是进程中的线程。</p>\n<table>\n<thead>\n<tr>\n<th>系统调用</th>\n<th>作用</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>fork</td>\n<td>复制当前线程</td>\n</tr>\n<tr>\n<td>exec</td>\n<td>使用新的可执行映像覆盖当前可执行映像</td>\n</tr>\n<tr>\n<td>clone</td>\n<td>创建子进程并从指定位置开始执行</td>\n</tr>\n</tbody>\n</table>\n<p>fork产生新任务速度非常快，因为fork不复制原任务的内存空间，而是和原任务一起共享一个<strong>写时复制</strong>的内存空间。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/08/4c89163b6db707d13e93ae4f5ad6fdca.png\" alt=\"\"></p>\n<p>写时复制：两个任务可以同时自由读取内存，当任意一个任务试图对内存进行修改时，内存就会复制一份单独提供给修改方使用。<br>\nfork只能够产生本任务的镜像，因此需要和exec配合才能启动别的新任务。<br>\n而如果要产生新线程，则使用clone。<br>\nclone可以产生一个新的任务，从指定位置开始执行，并且共享当前进程的内存空间和文件等，实际效果就是产生一个线程。</p>\n<h3>1.6.2线程安全</h3>\n<p>多线程程序处于一个多变的环境中，可访问的全局变量和堆数据随时都可能被其他的线程改变。因此多线程程序在并发时数据的一致性变得非常重要。</p>\n<h5><a name=\"%E7%AB%9E%E4%BA%89%E4%B8%8E%E5%8E%9F%E5%AD%90%E6%93%8D%E4%BD%9C\"></a>竞争与原子操作</h5>\n<p>++i的实现方法：</p>\n<ul>\n<li>读取i到某个寄存器X</li>\n<li>X++</li>\n<li>将X的内容存储回i<br>\n单条指令的操作称为<strong>原子的</strong>，单挑指令的执行不会被打断。在windows里，有一套API专门进行一些原子操作，这些API称为Interlocked API。</li>\n</ul>\n<h5><a name=\"%E5%90%8C%E6%AD%A5%E4%B8%8E%E9%94%81\"></a>同步与锁</h5>\n<p>为了防止多个线程读取同一个数据产生不可预料结果，我们将各个线程对一个数据的访问同步。<br>\n<strong>同步</strong>：在一个线程对一个数据访问结束的时候，其他线程不能对同一个数据进行访问。对数据的访问被原子化。<br>\n<strong>锁</strong>：锁是一种非强制机制，每一个线程在访问数据或者资源之前会先获取锁，在访问结束后会释放锁。在锁被占用时候试图获取锁时，线程会等待，知道锁可以重新使用。<br>\n<strong>二元信号量</strong>：最简单的锁，它适合只能被唯一一个线程独占访问的资源，它的两种状态：</p>\n<ul>\n<li>非占用状态：第一个获取该二元信号量的线程会获得该锁，并将二元信号量置为占用状态，其他所有访问该二元信号量线程将会等待。</li>\n<li>占用状态</li>\n</ul>\n<p><strong>信号量</strong>：允许多个线程并发访问的资源。一个初始值为N的信号量允许N个线程并发访问。<br>\n操作如下：</p>\n<ul>\n<li>将信号量值键1</li>\n<li>如果信号量值小于0，就进入等待状态。</li>\n</ul>\n<p>访问完资源后，线程释放信号量：</p>\n<ul>\n<li>将信号量加1</li>\n<li>如果信号量的值小于1，唤醒一个等待中的线程。</li>\n</ul>\n<p><strong>互斥量</strong>：和二元信号量很类似，但和信号量不同的是：信号量在一个系统中，可以被任意线程获取或释放。互斥量要求那个线程获取互斥量，那么哪个线程就释放互斥量，其他线程释放无效。<br>\n<strong>临界区</strong>：比互斥量更加严格的手段。把临界区的锁获取称为进入临界区，而把锁的释放称为离开临界区。临界区和互斥量，信号量区别在与互斥量，信号量在系统中任意进程都是可见的。临界区的作用范围仅限于本线程，其他线程无法获取。其他性质与互斥量相同。<br>\n<strong>读写锁</strong>：致力于一种更加特定的场合的同步。如果使用之前使用的信号量、互斥量或临界区中的任何一种进行同步，对于读取频繁，而仅仅是偶尔写入的情况会显得非常低效。读写锁可以避免这个问题。对于同一个锁，读写锁有两种获取方式：</p>\n<ul>\n<li>共享的</li>\n<li>独占的</li>\n</ul>\n<p>读写锁的总结</p>\n<table>\n<thead>\n<tr>\n<th>读写锁状态</th>\n<th>以共享方式获取</th>\n<th>以独占方式获取</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>自由</td>\n<td>成功</td>\n<td>成功</td>\n</tr>\n<tr>\n<td>共享</td>\n<td>成功</td>\n<td>等待</td>\n</tr>\n<tr>\n<td>独占</td>\n<td>等待</td>\n<td>等待</td>\n</tr>\n</tbody>\n</table>\n<p><strong>条件变量</strong>：作为同步的手段，作用类似于一个栅栏。对于条件变量，线程有两个操作：</p>\n<ul>\n<li>线程可以等待条件变量，一个条件变量可以被多个线程等待</li>\n<li>线程可以唤醒条件变量，此时某个或所有等待此条件变量的线程都会被唤醒并继续支持</li>\n</ul>\n<p>使用条件变量可以让许多线程一起等待某个事件的发生，当事件发生时，所有线程可以一起恢复执行。</p>\n<h5><a name=\"%E5%8F%AF%E9%87%8D%E5%85%A5%E4%B8%8E%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8\"></a>可重入与线程安全</h5>\n<p>一个函数被重入，表示这个函数没有执行完成，由于外部因素或内部调用，又一次进入该函数执行。<br>\n一个函数要被重入，只有两种情况：</p>\n<ul>\n<li>多个线程同时执行这个函数</li>\n<li>函数自身（可能经过多层调用之后）调用自身</li>\n</ul>\n<p>一个函数被称为可重入，表示重入之后不会产生任何不良影响</p>\n<p>可重入函数：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59bb7d6b62baf679805667\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nint sqr(int x) \r\n{\r\n    return x * x;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62baf679805667-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62baf679805667-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62baf679805667-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62baf679805667-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59bb7d6b62baf679805667-1\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sqr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62baf679805667-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59bb7d6b62baf679805667-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">x *</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62baf679805667-4\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n\n</div>\n<p>一个函数要成为可重入，必须具有如下特点：</p>\n<ul>\n<li>不使用任何（局部）静态或全局的非const变量</li>\n<li>不返回任何（局部）静态或全部的非const变量的指针</li>\n<li>仅依赖调用方提供的参数</li>\n<li>不依赖任何单个资源的锁</li>\n<li>不调用任何不可重入的函数</li>\n</ul>\n<p>可重入是并发安全的强力保障，一个可重入的函数可以在多程序环境下方向使用</p>\n<h5><a name=\"%E8%BF%87%E5%BA%A6%E4%BC%98%E5%8C%96\"></a>过度优化</h5>\n<p>有时候合理的合理的使用了锁也不一定能保证线程的安全。</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59bb7d6b62bb9458569773\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n//Thread1\r\nx=0;\r\nlock();\r\nx++;\r\nunlock();\r\n//Thread2\r\nx=0;\r\nlock();\r\nx++;\r\nunlock();</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bb9458569773-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62bb9458569773-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bb9458569773-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62bb9458569773-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bb9458569773-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62bb9458569773-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bb9458569773-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62bb9458569773-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bb9458569773-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62bb9458569773-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bb9458569773-1\"><span class=\"crayon-c\">//Thread1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62bb9458569773-2\"><span class=\"crayon-v\">x</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bb9458569773-3\"><span class=\"crayon-e\">lock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62bb9458569773-4\"><span class=\"crayon-v\">x</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bb9458569773-5\"><span class=\"crayon-e\">unlock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62bb9458569773-6\"><span class=\"crayon-c\">//Thread2</span></div><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bb9458569773-7\"><span class=\"crayon-v\">x</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62bb9458569773-8\"><span class=\"crayon-e\">lock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bb9458569773-9\"><span class=\"crayon-v\">x</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62bb9458569773-10\"><span class=\"crayon-e\">unlock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n\n</div>\n<p>上面X的值应该为2，但如果编译器为了提高X的访问速度，把X放到了某个寄存器里面，不同线程的寄存器是各自独立的，因此，如果Thread1先获得锁，则程序的执行可能会呈现如下：<br>\n[Thread1]读取x的值到某个寄存器R [1] (R[1]=0);<br>\n[Thread1]R[1]++(由于之后可能要访问到x,所以Thread1暂时不将R[1]写回x);<br>\n[Thread2]读取x的值到某个寄存器R[2] (R[2]=0);<br>\n[Thread2]R[2]++(R[2]=1);<br>\n[Thread2]将R[2]写回至x(x=1);<br>\n[Thread1] (很久以后)将R[1]写回至x(x=1);<br>\n如果这样，即使加锁也不能保证线程安全</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59bb7d6b62bbf378062431\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nx=y=0;\r\n//Thread1\r\nx=1;\r\nr1=y;\r\n//Thread2\r\ny=1;\r\nr2=x;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bbf378062431-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62bbf378062431-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bbf378062431-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62bbf378062431-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bbf378062431-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62bbf378062431-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bbf378062431-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bbf378062431-1\"><span class=\"crayon-v\">x</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">y</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62bbf378062431-2\"><span class=\"crayon-c\">//Thread1</span></div><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bbf378062431-3\"><span class=\"crayon-v\">x</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62bbf378062431-4\"><span class=\"crayon-v\">r1</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bbf378062431-5\"><span class=\"crayon-c\">//Thread2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62bbf378062431-6\"><span class=\"crayon-v\">y</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bbf378062431-7\"><span class=\"crayon-v\">r2</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n\n</div>\n<p>上面代码有可能发生r1=r2=0的情况。<br>\n<strong>CPU动态调度</strong>：在执行程序的时候，为了提高效率有可能交换指令的顺序。<br>\n编译器在进行优化的时候，也可能为了效率交换两个毫不相干的相邻指令的执行顺序。<br>\n上面代码执行顺序可能是这样：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59bb7d6b62bc3510160151\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nx=y=0;\r\n[Thread1]\r\nr1=y;\r\nx=1;\r\n[Thread2]\r\ny=1;\r\nr2=x;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bc3510160151-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62bc3510160151-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bc3510160151-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62bc3510160151-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bc3510160151-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62bc3510160151-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bc3510160151-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bc3510160151-1\"><span class=\"crayon-v\">x</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">y</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62bc3510160151-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">Thread1</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bc3510160151-3\"><span class=\"crayon-v\">r1</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62bc3510160151-4\"><span class=\"crayon-v\">x</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bc3510160151-5\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">Thread2</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62bc3510160151-6\"><span class=\"crayon-v\">y</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bc3510160151-7\"><span class=\"crayon-v\">r2</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n\n</div>\n<p>使用volatile关键字可以阻止过度优化，colatile可以做两件事情：</p>\n<ul>\n<li>阻止编译器为了提高速度将一个变量缓存到寄存器内而不写回</li>\n<li>阻止编译器调整操作volatile变量的指令顺序</li>\n</ul>\n<p>但volatile无法阻止CPU动态调度换序<br>\nC++中，单例模式。</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59bb7d6b62bc7328141385\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">C++</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvolatile T * pInst = 0;\r\nT * GetInstance() \r\n{\r\n    if (pInst == NULL) \r\n    {\r\n        LOCK();\r\n        if (pInst == NULL)\r\n            pInst = new T;\r\n        unlock();\r\n    }\r\n    return pInst;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bc7328141385-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62bc7328141385-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bc7328141385-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62bc7328141385-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bc7328141385-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62bc7328141385-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bc7328141385-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62bc7328141385-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bc7328141385-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62bc7328141385-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bc7328141385-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62bc7328141385-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bc7328141385-1\"><span class=\"crayon-m\">volatile</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pInst</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62bc7328141385-2\"><span class=\"crayon-v\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">GetInstance</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bc7328141385-3\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62bc7328141385-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">pInst</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bc7328141385-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62bc7328141385-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">LOCK</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bc7328141385-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">pInst</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62bc7328141385-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">pInst</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">T</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bc7328141385-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">unlock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62bc7328141385-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bc7328141385-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pInst</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62bc7328141385-12\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n\n</div>\n<p>CPU的乱序执行可能会对上面代码照成影响<br>\nC++里的new包含两个步骤：</p>\n<ul>\n<li>分配内存</li>\n<li>调用构造函数</li>\n</ul>\n<p>所以pInst=new T包含三个步骤：</p>\n<ul>\n<li>分配内存</li>\n<li>在内存的位置上调用构造函数</li>\n<li>将内存的地址赋值给pInst</li>\n</ul>\n<p>这三步中2和3的步骤可以颠倒，可能出现这种情况：pInst中的值不是NULL，但对象还是没有构造完成。<br>\n要阻止CPU换序，可以调用一条指令，这条指令常常被称为barrier：它会阻止CPU将该指令之前的指令交换到barrier之后。<br>\n许多体系的CPU都提供了barrier指令，不过，它们的名称各不相同。例如POWERPC提供的指令就叫做lwsync。所以我们可以这样保证线程安全：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59bb7d6b62bca760137344\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">C++</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#define barrier() __asm__ volatile(\"lwsync\")\r\nvolatile T * pInst = 0;\r\nT * GetInstance()\r\n{\r\n    if (pInst == NULL) \r\n    {\r\n        LOCK();\r\n        if (pInst == NULL) \r\n        {\r\n            T * temp = new T;\r\n            barrier();\r\n            pInst = temp;\r\n        }\r\n        unlock();\r\n    }\r\n    return pInst;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bca760137344-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62bca760137344-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bca760137344-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62bca760137344-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bca760137344-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62bca760137344-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bca760137344-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62bca760137344-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bca760137344-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62bca760137344-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bca760137344-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62bca760137344-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bca760137344-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62bca760137344-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bca760137344-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bb7d6b62bca760137344-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59bb7d6b62bca760137344-17\">17</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bca760137344-1\"><span class=\"crayon-p\">#define barrier() __asm__ volatile(\"lwsync\")</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62bca760137344-2\"><span class=\"crayon-m\">volatile</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pInst</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bca760137344-3\"><span class=\"crayon-v\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">GetInstance</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62bca760137344-4\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bca760137344-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">pInst</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62bca760137344-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bca760137344-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">LOCK</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62bca760137344-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">pInst</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bca760137344-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62bca760137344-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">T</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bca760137344-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">barrier</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62bca760137344-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">pInst</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bca760137344-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62bca760137344-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">unlock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bca760137344-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bb7d6b62bca760137344-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pInst</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59bb7d6b62bca760137344-17\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n\n</div>\n<h3>1.6.3多线程的内部情况</h3>\n<p>线程的并发执行是由多处理器或操作系统调度来实现的。windows和linux都在内核中提供线程支持，有多处理器或调度来实现并发。用户实际使用线程并不是内核线程，而是存在于用户态的用户线程。用户线程并不一定在操作系统内核里对应同等数量的内核线程。对用户来说，如果有三个线程同时执行，可能在内核中只有一个线程。</p>\n<h5><a name=\"%E4%B8%80%E5%AF%B9%E4%B8%80%E6%A8%A1%E5%9E%8B\"></a>一对一模型</h5>\n<p>对于直接支持线程的系统，一对一模型始终是最为简单的模型。一个用户使用的线程就唯一对应一个内核使用的线程，但返回来，一个内核里面的线程在用户态不一定有对应的线程存在。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/08/a5b98d84c57ecfa88795e674e4a711ec.png\" alt=\"\"></p>\n<p>对于一对一模型，线程之间的并发是真正的并发，一个线程因为某个原因阻塞，并不会影响到其他线程。一对一模型也可以让多线程程序在多处理器的系统上有更好的表现。<br>\n一般直接使用API或者系统调用创建的线程均为一对一线程。<br>\n一对一线程的两个缺点：</p>\n<ul>\n<li>由于许多操作系统限制了内核线程数量，因此一对一线程会让用户的线程数量受到限制。</li>\n<li>许多操作系统内核线程调度是，上下文切换的开销较大，导致用户线程的执行效率下降。</li>\n</ul>\n<h5><a name=\"%E5%A4%9A%E5%AF%B9%E4%B8%80%E6%A8%A1%E5%9E%8B\"></a>多对一模型</h5>\n<p>多对一模型将多个用户线程映射到一个内核线程上，线程之间的切换由用户态的代码来进行，相对于一对一模型，多对一模型的线程切换要快速许多。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/08/4a464ae600296b61c454403e9cab160b.png\" alt=\"\"></p>\n<p>多对一模型的问题就是如果一个用户线程阻塞了，那么所有的线程都将无法执行。在多处理系统上，处理器的增多对多对一模型的线程性能不会有明显帮助。多对一模型得到的好处是高效的上下文切换和几乎无限制的线程数量。</p>\n<h5><a name=\"%E5%A4%9A%E5%AF%B9%E5%A4%9A%E6%A8%A1%E5%9E%8B\"></a>多对多模型</h5>\n<p>多对多模型结合了多对一和一对一的特点，将多个用户线程映射到少数但不止一个内核线程上。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/08/88cf46ce05bf777caef1b92def4dca9d.png\" alt=\"\"></p>\n<p>一个用户线程阻塞并不会使得所有的用户线程阻塞。并且对用户线程数量也没有什么限制，在多处理器系统上，多对多模型的线程也能得到一定的性能提升，不过提升的幅度没有一对一模型高。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112161\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112161votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112161\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 15 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 5, "create_date": "2017-09-15"},{"front_image_path": "full/5f238582dbf0b714b52f3962d63e9366875164d0.jpg", "url_object_id": "cfe9e0fcb78f856f786852ad925f1603", "praise_nums": "2", "title": "什么是现代化编程？", "tags": "开发,IDE,编程", "front_image_url": ["http://wx3.sinaimg.cn/large/7cc829d3gy1fi7r4f1txqj20hs0cmq4r.jpg"], "url": "http://blog.jobbole.com/112071/", "comment_nums": 4, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/young605867996\">Lada</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://lemire.me/blog/2017/07/15/what-is-modern-programming/\">lemire</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【导读】：现代化编程应该是：不强制用相同的 IDE，统一的代码风格，方便的依赖管理，持续集成，版本控制等。</p>\n<hr>\n<p class=\"\">在我的青少年时期，我涉猎了编程基础和一些汇编。当我学习了 Turbo Pascal 之后这事更进了一步，它<a href=\"https://photos.app.goo.gl/WcxNIutwtWmFTdzL2\">提供了一种最早期的集成开发环境（IDE）</a>。我觉得这下合我心意了。实际上，IDE 是一种让你在一个友好的环境内，方便地编写、编译、调试和运行代码的程序。Turbo Pascal 没有太多的图形界面（它基于文本），但它有菜单和窗口。你可以进入调试模式，跟踪变量的值等等。</p>\n<p class=\"\"><img id=\"pic\" class=\"\" src=\"http://wx3.sinaimg.cn/large/7cc829d3gy1fi7r4f1txqj20hs0cmq4r.jpg\"></p>\n<p>然后我转到了 <a href=\"https://photos.app.goo.gl/QnCWPHDcp4Drzev12\">Delphi</a> （一种图形化的 Turbo Pascal），它拥有到今天看来仍然不错的出色 IDE。我用  <a href=\"https://www.youtube.com/watch?v=TgIrzFqGIKM\">Visual Basic</a> 设计了一个“会报时的钟”，当时发表在 Bulletin Board Systems（使用 Windows 3.1 的一个系统）。那之后我发现了 Visual Studio。有好几年我的 C++ 编程都是借用的 Visual Studio。以上就是我一直使用的所有 IDE。</p>\n<p>早在八十年代初，Smalltalk 就有了著名的强大图形化 IDE<a href=\"https://www.youtube.com/watch?v=e0LfndNxqZg\">（Youtube 视频）</a>。</p>\n<p>我认为，使用 IDE 并不代表着“现代化”。现在的 IDE 和过去的 IDE 非常相像。虽然我们编程的内容改变了，但在很多情况下，我们如何编程却没有改变。在我的 Dell 笔记本电脑里装着最新版 Visual Studio。换做 20 年前的我，也能完美地轻松上手它。调试、代码补全、远程代码执行，它和以前很像。事实上，Visual Studio 从未与 Turbo Pascal 相差很大过。而我发现这非常令人沮丧。我以为我们应该取得比这更快的进步。</p>\n<p>我提出了现代化编程在桌面外观上难有作为的观点。图形化用户界面（GUI）只是表层。现代化编程技术都是关于流程和实际工具的，而不是它们之上的表层。我不在乎你是否使用 Eclipse 或 Emacs，这和你如何现代化毫不相关。</p>\n<h2>那么，什么是“现代化”？</h2>\n<h3>编码是社会化的</h3>\n<p>在 20 年前，要求你公司里的每个人都使用相同的 IDE，并且要唯一依赖于这种 IDE 来构建、测试和部署代码，这是很明智的。但在你公司外有很多聪明的人，他们往往不使用你这种 IDE。如今，你可以触及他们了。这意味着对于所采用的工具和流程你必须明智。</p>\n<p>如果你嘲弄使用 Atom 文本编辑器、Visual Studio 或者 Emacs 编程的人，那你就不是社会化的。你需要尽可能的包容，否则就会付出代价。</p>\n<h3>Go 语言有自己的格式化工具</h3>\n<p>我不在乎在你保存的时候，是不是自动重新格式化代码，或者有没有点击重新格式化按钮，或者是不是输入 go fmt，这些都一样。但它无疑是一个卓越的现代化的想法。这就是进步。所有的编程语言都应该为用户强加一个唯一的代码格式。别再 bikeshedding（过于关心旁枝末节，而忽视主要问题）。</p>\n<p>我们很清楚 Java 拥有规范，但规范是不够的。我们需要一个工具，能把代码作为输入，并生成一个唯一定义了的输出，它能处理从行长度到空格的所有问题。</p>\n<p>这个工具的目标是对于应该如何格式化代码，不再有任何可能有的争议，而且产生正确的格式不费吹灰之力。我简直无法告诉你这是多么的重要。</p>\n<h3>像 Rust、Go、Swift 这样的编程语言有自己的程序包管理系统</h3>\n<p>因此，例如在 Swift 中，我可以创建一个名为 Package.swift 的小文本文件，并把它放入我项目的根文件，在那里声明我的依赖。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59bafe7c6b49f054074505\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Swift</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport PackageDescription\r\n\r\nlet package = Package(\r\n    name: \"SwiftBitsetBenchmark\",\r\n    dependencies: [\r\n   .Package(url: \"https://github.com/lemire/SwiftBitset.git\",  \r\n          majorVersion: 0),\r\n   .Package(url: \"https://github.com/lemire/Swimsuit.git\",  \r\n          majorVersion: 0)\r\n    ]\r\n)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59bafe7c6b49f054074505-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bafe7c6b49f054074505-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59bafe7c6b49f054074505-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bafe7c6b49f054074505-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59bafe7c6b49f054074505-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bafe7c6b49f054074505-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59bafe7c6b49f054074505-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bafe7c6b49f054074505-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59bafe7c6b49f054074505-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59bafe7c6b49f054074505-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59bafe7c6b49f054074505-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59bafe7c6b49f054074505-1\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PackageDescription</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bafe7c6b49f054074505-2\"> </div><div class=\"crayon-line\" id=\"crayon-59bafe7c6b49f054074505-3\"><span class=\"crayon-r\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">package</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">Package</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bafe7c6b49f054074505-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"SwiftBitsetBenchmark\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59bafe7c6b49f054074505-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">dependencies</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bafe7c6b49f054074505-6\"><span class=\"crayon-h\">   </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e \">Package</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"https://github.com/lemire/SwiftBitset.git\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-59bafe7c6b49f054074505-7\"><span class=\"crayon-h\">          </span><span class=\"crayon-v\">majorVersion</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bafe7c6b49f054074505-8\"><span class=\"crayon-h\">   </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e \">Package</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"https://github.com/lemire/Swimsuit.git\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-59bafe7c6b49f054074505-9\"><span class=\"crayon-h\">          </span><span class=\"crayon-v\">majorVersion</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59bafe7c6b49f054074505-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-59bafe7c6b49f054074505-11\"><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p></p>\n<p style=\"text-align: center;\"><span style=\"color: #999999;\">（源码实例）</span></p>\n<p>然后我可以输入 swift build，软件会自动抓取依赖代码，并构建我的程序。这在 Swift 运行的所有地方通用。你使用哪种文本编辑器和 IDE 都没关系。</p>\n<p>你不想使用文本编辑器，而更喜欢图形界面？可以。都没有区别。</p>\n<p>为什么那样显得现代化？因为自动地解决依赖关系而不费吹灰之力，对于 20 年前的我来说就像魔术。并且自动地、系统地解决依赖关系是极其重要的。我不想永远都不得不手动安装和部署一个依赖项。我希望其他人能够在几秒内把我的库添加到他们项目中，而不是几分钟或是几小时。</p>\n<p>是的,你可以将它添加到现有的语言(如：Java 的 Maven 或是 IED)但需要有一个唯一的方法让它起效。</p>\n<h3>像 Rust、Go、Swift 这样的编程语言，在一开始就支持单元测试。</h3>\n<p>比如在 Go 里，创建一个 filemyproject_test.go，然后添加 func TestMyStuff（t * testing.T）这样的函数，然后输入 go test 既可。</p>\n<p>在 20 年前，几乎没有人测试他们的代码，而今天已经是一个必要要求，您和它需要以一种唯一的方式来做，这样你就可以在项目之间移动，还总是知道如何测试了。</p>\n<p>如果不能在你的代码中立刻认出健全的单元测试，我会设想你的代码严重损坏了。</p>\n<h3>持续集成</h3>\n<p>代码更改时，你想要一个远程工具来获取新代码，并测试它，以便可以提前停止回归。人们可以在你的代码上运行测试还不够，他们还需要看到自动化测试的结果，自行检查最终的故障。</p>\n<p>持续集成是较大规模计划的一部分：你必须在你编程的时候疯狂地自动化程序。体力劳动应该最小化。有时候这意味着你真的应该只是点击一个按钮，无论是通过一个图形化用户界面，还是命令窗口，但它不意味着需要反复地遵循一系列复杂的命令。</p>\n<h3>版本控制</h3>\n<p>20 年前，你在桌面上编写代码，并通过电子邮件发送新代码（作为补丁）是讲得通的。但这只在缓慢的合作节奏中有意义。如今，这么做是愚蠢的。任何差于 Git 的都是落后的。注意，如今甚至微软构建 Windows 也使用 Git。</p>\n<p> </p>\n<p>那么，当你共事于从来没有听过现代编程的聪明学生会发生什么呢？他们看一个类似 go get 的命令，只看得到表层（一个命令行）。他们认为这是落后的。漂亮的图形在哪？</p>\n<p>他们使用一个好看的 IDE 工作，像是 Visual Studio 或 Eclipse，并确信自己是现代化的，完全无视 IDE 可以追溯到几十年前的事实。然后并没有使用 IDE 的优势，比如更好的功能可见性和更快的操作，而是在其他地方使用现代化编程技术。他们坚持守旧派编程：</p>\n<ul>\n<li>没有测试。至少，没有自动化和系统化的测试。</li>\n<li>在一个具体的设置上难以处理依赖关系。</li>\n<li>没有自动化。没有持续集成，没有自动化部署。</li>\n</ul>\n<p>他们编程就像我几十年前使用 Turbo Pascal 入门的时候。尽管 Turbo Pascal 有图形化用户界面（GUI），但它是非常古老的学校。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112071\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112071votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112071\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 4 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/young605867996\">Lada</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/young605867996\">\r\n\t\t\t<img src=\"http://q.qlogo.cn/qqapp/208656/B77EEB9D520DE9C7BD42E89DC348FEC7/100\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            希望了解更多互联网、创业管理、创新思维、前沿技术和设计的知识。渐进明细，持续改进。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/young605867996\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/young605867996/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/young605867996/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 15</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://littlejanery.blog.163.com/\"><i class=\"fa fa-link\"></i></a> <a title=\"QQ：605867996\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：yao605867996\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 0, "create_date": "2017-09-15"},{"front_image_path": "full/5a100e2d6c9b049065e2a317a0a393644a168302.jpg", "url_object_id": "594e76e00f6ec905e2cdae3003e50c75", "praise_nums": "3", "title": "你的时间值多少钱？", "tags": "其他,时间", "front_image_url": ["http://wx4.sinaimg.cn/large/7cc829d3gy1ficm10dakhj20m80ciq37.jpg"], "url": "http://blog.jobbole.com/112127/", "comment_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/wx879560138\">碎美</a> 翻译，<a href=\"http://www.jobbole.com/members/randomli\">欣仔</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://jamesclear.com/value-of-time\">James Clear</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【导读】：本文介绍了几种估算你每小时值多少钱的方法，方便你判断值不值得花时间做某事，比如：值得为了省 $95 的机票而花 5 小时转机 2 次么？值得花 2 小时与某人吃顿饭？值得花半小时回某封邮件么？</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx4.sinaimg.cn/large/7cc829d3gy1ficm10dakhj20m80ciq37.jpg\"></p>\n<p>并非所有对时间的利用都是均等的，而且这个简单的道理可以让生活大为不同。明白怎样充分利用自己的时间，始于了解到（准确地说是）你的时间价值多少。本文讲述如何系统计算你时间的价值。</p>\n<p>把时间花在更有利可图的事上的人，能赚更多的钱。把时间投注在他人身上的人，能建立良好的人际关系。把时间花在创建灵活的事业上的人，能享受更多自由。把时间花在具有高影响力的项目上的人，能为社会带来更多贡献。不论你想要更多财富，更多友谊，更多自由，还是更多影响力，问题都会回归到你如何支配自己的时间。</p>\n<p>如果你和我一样，你可能会想要上面提到的东西（友谊，自由，影响力），也许还有其他（健康）。但是，你不可能同时拥有所有东西，所以你需要明白日常生活中如何有效地权衡这些问题。本文告诉你如何计算时间的价值，以及如何利用这些信息来更有效地利用时间。</p>\n<h2>时间的价值：一小时值多少？</h2>\n<p>在动笔写这篇文章的几周前，我正想买一个小的旅行包。搜索了半天，我找到一个我喜欢并且只要 19 美元的包，价格很实惠。问题在于：这包是一个英国公司产的，寄到美国要收 45 美元运费。</p>\n<p>我立即打消了花 45 美元运费拿到一个 19 美元的包的念头，所以我开始搜索零售店的位置。这家公司在纽约市有一间店，而我恰好打算几周后去一趟纽约。我找到了店址，发现假如我旅途中特地去一下这间店，要花一小时。</p>\n<p>那时我脑海中出现了促使我写这篇文章的问题：“我的一小时值 45 美元吗？”</p>\n<p>我应该节省时间，花 45 美元，让他们把包直接寄给我，还是应该省下钱，花一小时自己去店里买？我完全不知道去店里买或者额外花运费，哪一种是对于时间和钱更好的利用。</p>\n<h2>时间 VS 金钱的两难</h2>\n<p>我们或多或少都对自己时间的价值有个内在判断。比如说，如果有人提供你每小时 0.07 美元薪水的工作，你肯定会立刻回绝。但如果有人愿意付你每小时 7000 美元，你会立刻接受这份工作。</p>\n<p>在这个范围的两端，你很容易判断一件事是否值得花费时间去做。但当你向时间-价值比的中间档滑动，某一任务是否值得花费时间就变得不那么明朗。问题就在此：生活的多数时间，我们都处在时间-价值比的灰色区域。</p>\n<p>例如：</p>\n<ul>\n<li>    应当购买直飞航班，节省两小时，还是选择有一次经停的航班，节省 90 美元？</li>\n<li>    要不要花 20 美元请邻居的小孩帮忙除草，以享用周末额外的一小时？</li>\n<li>    这一周，应当服务一个会立刻付你 2000 美元的客户，还是挖掘一个能在明年产生 20000 美元利润的商业构想？</li>\n</ul>\n<p>每一天我们都会做出类似的选择，但大多数人都是依直觉或猜测行事，而不去计算他们时间的实际价值。每个人都有一个每小时（时间）价值，但很少有人能确切地告诉你这个数字是多少。在此之前，我也不例外。</p>\n<h2>如何计算你的时间的实际价值</h2>\n<p>这个时间 vs 金钱的难题促使我询问了各种我能接触的这个话题上的专家。我和企业家、生产力顾问、企业教练甚至是职业扑克玩家都聊过怎样计算时间价值，以及怎样利用这一点来更好地做决策。</p>\n<p>然后，我记录了三个月中，每一小时我都做了什么，并用六种不同的方法计算了一小时的价值。别担心，我已经把这些研究和实验精简成了一个相对简单的过程，接下来就讲。</p>\n<p>本文剩余内容分为两部分。</p>\n<ul>\n<li><strong>第一部分快捷易懂，基本涵盖了大部分人需要的东西。</strong>在 15 分钟内，第一部分能帮助你建立一份合理的评估，你能通过这份对你时间价值的评估做出更明智的决策。我推荐所有人都读一下第一部分。</li>\n<li><strong>第二部分要花费一些时间，但也值得一看。</strong>企业家和管理者会发现第二部分尤其有用。第二部分建立在第一部分的基础上，能帮你评估不同时间用途的期望价值，以便你做出更好的战略决策，获得长期回报。</li>\n</ul>\n<p>在我们开始第一部分之前，我想先分享一个免费的表格，里面有关于本文中所有计算公式的例子。你可以将你的数据填入表格，它会算出你的时间价值。余下的内容中，我会经常提及这个表格。</p>\n<blockquote><p>时间价值表，下载链接：<a href=\"https://docs.google.com/spreadsheets/d/1xJm9BIpuf0Cu4P01YJQ_PNam7fds31KaDXgwxJaJWxc/edit?usp=sharing\">Google Docs</a>、百度网盘：<a href=\"https://pan.baidu.com/s/1i5ta2SP\" target=\"_blank\">https://pan.baidu.com/s/1i5ta2SP</a></p></blockquote>\n<h2><span style=\"color: #ff0000;\">第一部分：实际收入法</span></h2>\n<p>我们先讲讲怎样用实际收入法来计算你的时间价值。这些计算主要基于你实际得到（或实现）的收入，所以叫实际收入法。此法可以帮你优化日常花费的决策（例如上述的例子，花 45 美元网购或开车去店里）。</p>\n<p>首先，你需要两个数字：</p>\n<ul>\n<li>    你花了多少时间赚钱。</li>\n<li>    利用这些时间你赚了多少钱。</li>\n</ul>\n<p>我们来聊聊怎样估算这两项数据，以及怎样快速用这两个数据得出一个对你时间价值的估计。</p>\n<h3>第 1 步：如何追踪你的时间</h3>\n<p>第一步是估算你投资了多少时间在赚钱上，而不是你有多少小时在工作岗位上。举例来说，假如每天你有一小时在路途中，另有八小时在工作，那么实际上你每天花费了九小时在赚钱上。同样，你也应该算上你搞副业或者送孩子去日托中心的时间。我们将用这些数字来全面地了解一年中你花在赚钱上的总时间。</p>\n<p>不止你一个人会觉得估算时间有点困难。大部分人对于自己一天 24 小时做了什么只有一种模糊的意识。如果你不确定你花了多少时间工作，我推荐用一年 2500 小时作为起点。理由：假设你一天花了 10 小时工作、通勤或者做工作相关的事。一周工作五天，那就是每周 50 小时。再假设你每年工作 50 周（两周休假），那就是每年 2500 小时。你可以根据自己的实际情况调整，不过对于大多数全职员工或企业家来说，我觉得 2500 小时是一个基本准确的估计。</p>\n<h3>追踪时间：我是如何做的</h3>\n<p>我是个网络创业者，多数时间我都在电脑上工作。当我开始估算时间时，我安装了一个叫 <a href=\"https://www.rescuetime.com/\">RescueTime</a> 的软件。它能准确记录我在每件事上花费的时间：用了多久看每个网站、用每个软件、浏览社交媒体等等。</p>\n<p>在我完成三个月的收集后，我还整合了从其他应用中得到的数字，以完善我的估算。比如说，我算出了在 <a href=\"https://www.amazon.com/gp/product/B00NB86OYE/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=B00NB86OYE&amp;linkCode=as2&amp;tag=jamesclear-20&amp;linkId=IEHSPLRV25VARHV7\">Audible</a> 上面听有声书的时间，就得到了我花费在“读书”上的时间。</p>\n<p>利用从 RescueTime 获得的数字，加上几个合理的推算，我得出我每年工作 2742 小时的结论。</p>\n<p>RecueTime 是分类记录事件的，所以我还能分别了解我在写作、阅读、网站设计、市场营销等事上分别花了多少时间。这么细的分类其实不是很必要，不过在本文的第二部分中能派上用场。目前，你只需要对你每年花在赚钱上的总时间有一个合理的估计就好了。</p>\n<h3>第 2 步：如何记录你赚了多少钱</h3>\n<p>第二步你需要知道利用工作时间你赚了多少钱。</p>\n<p>这项非常简单。如果你是个小时工或赚薪水的职员，看看你最新的工资支票，乘上每年获取的支票数即可。如果你今年的薪水变化不大，还可以看看去年退了多少税。你还要加上从副业和自由工作中得到的钱，因为花在这些事情上的时间在第一步中已经包含在内了。</p>\n<p>我们现在计算的是你的税后收入，即扣除税款后得到的钱。对于多数职员来说，税款在工资支票中就已经扣除了，所以你的税后收入就是付给你的钱。如果你是个企业主，那你就需要从总收入中扣掉税款和其他业务支出。</p>\n<h3>追踪收入：我是如何做的</h3>\n<p>我用了一个叫 <a href=\"https://bench.co/?fbuy_ref_code=bnbQH\">Bench Accounting</a> 的服务来记录我生意的收入和开支。Bench 是一个在线的记账服务，可以自动从我的企业账户自动提取数据，然后会计就会将所有东西整理在一个算好税的财务报表中。点击几下，我就能看到在上个月、上个季度或者上一年中我赚了多少钱。</p>\n<p>如果你和我一样是一个小企业主，自由职业者或企业家，我推荐你使用全年的收入来做计算，因为小公司的月收入可能会波动（有时是激烈波动）。查看一段更长时期的收入可以消除这些差异，让你对时间价值有个更实际的估算。</p>\n<h3>第 3 步：计算你的时间价值</h3>\n<p>最后一步，用你的总收入（得自第二步）除以你总共花费的时间（得自第一步）即可。</p>\n<p>举例说明，假设你每年花了 2500 小时来赚钱：</p>\n<ul>\n<li>如果你的收入是 12316 美元/年，你的时间价值 4.93 美元/小时。这是 2014 年全美个人收入的贫困线。</li>\n<li>如果你的收入是 46226 美元/年，你的时间价值 18.49 美元/小时。这是 2014 年全美女性收入的中位数。</li>\n<li>如果你的收入是 62455 美元/年，你的时间价值 24.98 美元/小时。这是 2014 年全美男性收入的中位数。</li>\n<li>如果你的收入是 10 万美元/年，你的时间价值 40 美元/小时。</li>\n<li>如果你的收入是 100 万美元/年，你的时间价值 400 美元/小时。</li>\n</ul>\n<p>当然啦，这些都是假设你每年花费了 2500 小时在工作上。计算结果会随着不同的工作时间而改变。</p>\n<h3>这些数字精确吗？</h3>\n<p>当我第一次做这个计算的时候我很惊讶。我一小时的价值比我想象的低得多。</p>\n<p>想想有多少自由职业者每小时收费40美元，一年赚不到 10 万美元。或者想想多少顾问每小时收费 400 美元，一年却赚不到 100 万美元。怎么会这样呢？答案是，他们只是在部分工作时间获得 40 或 400 美元一小时的薪酬，而非所有的时间。当我们用他们的总收入除以总工作时间时，每小时的价值比他们每小时向顾客收的费用低得多。</p>\n<p>此外，虽然我们知道自己每小时收多少佣金，但我们很少会计算除了工作时间外还有多少时间也是花费在赚钱上。搞清楚到底多少时间投资在赚钱上，我们就对自己时间的实际价值有一个更清楚的认识——通常这个数字比你每小时收的佣金低得多。</p>\n<p>呐，如果你和我一样，你可能会想核实一下计算的准确度。有几种快速检查你计算的小时价值是否准确的方法。我们现在来看一下。</p>\n<h3>支票和余额</h3>\n<p>我们刚刚用的计算方法是税后实得法，因为它是根据你的税后收入算的。还有另外两种实际收入方法，可以用来和税后实得法对照。下面我会简单地介绍一下这两种方法，不过最简单的学习方法是参照时间价值表的步骤3.</p>\n<h3>市场价格法</h3>\n<p>市场价格法是第一种检查的方法。这个方法用的是一个估价，即假设你接受了另一个公司的一个你能胜任的职位，所预期能挣到的钱。举例来说，我花很多时间在写作上，所以我可以胜任一个“内容创造者”的职位。我还花时间来扩展业务，所以我也可能胜任一个业务拓展的职位。我查了一下我可能胜任的每个职位的薪水，按照我在每种工作上投入的时间进行划分，就得到了对于我时间价值的另一种估算。你可以把这种方法想成在就业市场上你的时间的价值。</p>\n<h3>基于成本的方法</h3>\n<p>基于成本的方法是另一种核实方法。这个方法用的是一个估价，即你会付多少钱来让另一个人做你的工作。换句话说，想象你是老板，需要雇人代替你工作。我先是把我的工作分成了具体的任务（写作，市场营销等等），然后估算了花费在每项任务上的时间。然后，我代入了我会付别人全职做这项工作的薪水。之后，我计算了所有任务放在一起的加权平均数，得出了我愿意支付给别人做我每天做的工作的价格。最后，我用这个价格除以总的工作小时数。</p>\n<p>我用这三种方法算出了三个数值，得到了我的时间价值的平均值。我料到我可能会用一种方法得到高一些的结果，而用另一种得到低一些的结果，但是当我们用三种方法来取平均值，得到的时间价值可能更精确一些。重申一次，在时间价值表中，你可以看到每一种方法。</p>\n<h3>怎样利用这项信息</h3>\n<p>我们已经完成了第一部分。有了上面的计算结果，我们对你的时间价值有了一个快捷准确的估计。现在，我们可以缩小不确定的范围，做出更好的决策。</p>\n<p>例如：</p>\n<ul>\n<li>    如果你的时间值 25 美元一小时，那就不该排半小时队来领取 10 美元的礼品卡。</li>\n<li>    如果你的时间值 60 美元一小时，那你就应该花 49 美元网购而不是花一小时去店里。</li>\n<li>    如果你的时间值 80 美元一小时，那你就应该买直飞航班，而不是花两小时等待转机，只为节省 150 美元。</li>\n</ul>\n<p>当你精确地知道你的一小时到底值多少钱时，你每天都可以做出更好的决策。</p>\n<p>至此，我们知道你的时间<u>至少</u>值你刚刚算出来的那么多，因为实际收入法只能计算你已经获得的收入。准备好来看看你的时间是否值更多了吗？我们来看第二部分。</p>\n<h2><span style=\"color: #ff0000;\">第二部分：期望值法</span></h2>\n<p>现在来看第二种方法：期望值法。这种计算法基于你对于一小时的工作在长远来看能创造的价值的期望。</p>\n<p>期望值法可以帮助你在重大的、战略性的决策中决定要把时间花在哪里。你的公司今年应该专注于哪个项目？哪些事务没什么效率，应当从你的日常工作中取消？你应该开创一项十年后会获得巨大成功，但不能即刻为你带来收入的事业，还是找一份有可靠收入的稳定工作？管理这些权衡的最佳方法是什么？</p>\n<p>让我们从最简单的期望值法开始吧。</p>\n<h3>增长倍数法</h3>\n<p>有一种简单的方法，可以解释你的决策带来的期望收入。将你前几年的净收入乘以一个合理的增长倍数。</p>\n<p>关键当然在于选择一个合适的增长倍数。举个例子，我的生意从去年到今年翻了一番，所以我选择 2× 作为我的增长倍数。用这种方法实际上相当于说，“你今年的行动会持续推动下一年的增长，所以你的时间的真实价值其实是高于你现在的实际收入。”</p>\n<p>增长倍数法能让你简单估算今天的工作在长远看来能获得多少回报，但它并不能告诉你如何更高效地利用你的时间。要获知这一点，我们需要使用完整的期望值法。</p>\n<h3>期望值法</h3>\n<p>期望值法是最终也是最难的计算时间价值的方法。我会努力用最简单的话来解释，但我想最简单的学习方法就是来看时间价值表中的步骤4。</p>\n<p>基本逻辑如下：</p>\n<p>首先按不同工作来分类时间。你越能具体地说出每份时间用来做了什么，你就越能分辨哪些工作驱动了最多利益。</p>\n<p>选择一个可以将每项工作和收入连接在一起的测量单位。对于大部分企业主来说，这意味着你需要知道你的生意中一个“引子”的价值。就我自己来说，我用的是邮件订阅数，因为我知道平均每个新的订阅者能带来的收益，并且我大部分的工作内容都可以关联到获取更多地邮件订阅上。</p>\n<ul>\n<li>估算每项工作的价值。假设我花一小时工作，获得 50 个新的邮件订阅。如果每个订阅者的总价值是 1 美元，那么这项工作的期望价值就是 50 美元一小时。重复估算你的每一项工作的价值。</li>\n<li>把所有期望值加在一起，获得总的期望值。</li>\n<li>如有需要，加上其他变量。期望值法可以像你希望的一样复杂。你可以处理一些因素，像是某项工作可以带给你的生活多少幸福感，或者现在一小时的工作有多少可能性在之后的几年持续给你回报。</li>\n</ul>\n<p>期望值法是高度个性化的，你可能需要多斟酌一番这些公式，来让它们满足你的需求。当然啦，最简单的还是从数字层面看这个方法是怎么用的。你可以在<a href=\"https://docs.google.com/spreadsheets/d/1xJm9BIpuf0Cu4P01YJQ_PNam7fds31KaDXgwxJaJWxc/edit#gid=0\">时间-价值表</a>的步骤4中看到所有加入计算的因子。</p>\n<h2>补充说明</h2>\n<p>其实这些计算的幕后还有很多其他的想法。如下是另外一些我在思考我的时间价值时一直惦记的因素。</p>\n<h3>误入歧途的成功</h3>\n<p>不要把时间浪费于在错误的事情上取得成功。简单地了解你时间的价值是有帮助的，但你仍需明白你想要怎样的生活，以获取最精确的对于时间价值的概念。太多人追逐金钱、权利或认同，因为他们身边的每个人都一样。倘若这不是你真正想要的呢？没错，你可以找到增加时间价值的方法，但如果你宁愿有更多空闲时间而非钞票呢？这就是为什么弄明白你的<a href=\"http://jamesclear.com/core-values\">核心价值观</a>，做<a href=\"http://jamesclear.com/integrity\">诚实报告</a>，弄清楚什么对你来说最重要，都是有用的。</p>\n<h3>权衡和机会加成</h3>\n<p>比尔·盖茨多次被被称为世界上最富有的人。在 2015 年，他以 727 亿美元净资产再次排在首位。根据一个分析师的推算，“有 720 亿美元，6%的回报率大概能让盖茨活着的每秒赚 114.15 美元。一张 100 美元的纸币掉在地上，都不值得他花时间捡起来。”</p>\n<p>虽然有趣又值得引用，但是这个掉在地上的 100 美元钞票不值得盖茨弯腰捡起来的想法是错的。为什么？因为捡起这 100 美元不妨碍盖茨在同时赚 114.16 美元。不管他捡不捡这 100 美元，他总归在赚钱。实际上，捡起这 100 美元，在那一秒他就赚了 214.16 美元，而不是常规的 114.16 美元。</p>\n<p>捡起 100 美元并不需要比尔·盖茨付出停止赚钱的代价。这是在他已获得的收入之上的机会加成。机会加成，指的是那种如果你把所有时间花在上面会使你减少时间价值，但如果你在有机会的时候才去做，却会增加时间价值的选择。举例来说，试想那种有时会做演讲的作家。如果他们把所有时间都花在演讲上，会减少他们的时间价值，因为这样一来他们就没法写新书了，这会导致他们逐渐过气，演讲的出场费也会降低。但是，偶尔做一些演讲——比如一月一两次——许多作家就可以在净收入中增加几千美元，并仍能保持足够的时间来写新书。</p>\n<h3>不能商量的空闲时间</h3>\n<p>计算你的时间价值有一个危险之处，即你可能会说服自己多一个“创造价值”的小时，就能增加总的时间价值了。引自<a href=\"https://www.wsj.com/articles/do-you-know-what-your-time-is-really-worth-1437500727\">华尔街日报</a>的一篇文章，“一些研究人员表示，给时间标注经济价值，有损害人们生活质量的风险。那些被怂恿而只专注于时间的金钱价值的人，倾向于变得不耐烦而且压力大，Jeffery Pfeffer，一个斯坦福商学院组织行为学教授说到，这些人工作太多，花太少的时间做一些奖励自己的事，例如参加志愿活动或享受音乐。”</p>\n<p>对我来说，我决定记录我的空闲时间，来看看相较于工作我有多少闲暇，但我不会给空闲时间标注金钱价值。相反，我决定我的空闲时间是不能商量的。空闲时我可以放松减压，让我可以在工作时间保持高效。你应当重视你的空闲时间、停工时间、休闲活动，因为它们能为你的生活提供全面的身心健康。</p>\n<h3>你应当再工作一小时吗?</h3>\n<p>想不想知道你是否应该再工作一小时？如下是我从 <a href=\"http://sebastianmarshall.com/\">Sebastian Marshall</a> 那里学来的一个很好的经验法则：想想你一天中的每个小时。早上 9 点到 10 点，10 点到 11 点，以此类推。平均下来，那一个小时中，你的净收益是正的还是负的？例如如果你工作到比较晚，晚上 9 点到 10 点那一小时的成果平均下来是正向的吗？还是说那一小时的工作出的错比完成的内容多？那一小时是拖延还是高产？如果这一小时总的来说是负产出，那你就该停止工作了。努力做一个项目是好的，但如果接下来下一小时的工作会让你筋疲力尽，而非创造价值，那么在此之前就该停下来。</p>\n<h3>幸福和意义</h3>\n<p>如果你想的话，你可以将一项工作带给你的幸福或意义之类的因素也加入考虑。不过，我没有把这些变量放入我的计算公式中，而是对于每项工作，将这些因素进行了基于实现程度的1到10的排序。虽然这些排序没有放入任何公式中，但是当几项工作的期望值很接近时，这些排序就可以作为决胜属性。</p>\n<h3>下一步去哪儿</h3>\n<p>计算时间的真实价值实际上比听上去难得多，也比看上去有用得多。</p>\n<p>你的时间价值可能每年都有变化，甚至变化得更快。本文中我列出的这些方法都很灵活，可以修改。如果你在某件事上花费了更多时间，或者有了更多的收入，仅需将新的数字代入表格中，就能得到新的结果。</p>\n<p>我希望本文分享的策略，随着时间的推移，还会一直对你有所帮助。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112127\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112127votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112127\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 7 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx879560138\">碎美</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx879560138\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/05/14c9242bd4336d2c12ac8ba7e56bd6c8.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            University at Buffalo IE Human Factors PhD program 在读        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/wx879560138\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/wx879560138/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/wx879560138/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 12</a> · <a title=\"QQ：274121119\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"Facebook主页\" target=\"_blank\" href=\"https://www.facebook.com/profile.php?id=100009659581170&amp;ref=bookmarks\"><i class=\"fa fa-facebook\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 7, "create_date": "2017-09-15"},{"front_image_path": "full/0ef7e28a091392634bf93187b140a9a9a1296cf7.jpg", "url_object_id": "c7e0ae15f1eab36a802669e93f9b1844", "praise_nums": "1", "title": "系统管理员应该知道的 20 条 Linux 命令", "tags": "IT技术,Linux,命令,系统管理员", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/08/7599b213c6d67d39e4bb2391c276fbb5.png"], "url": "http://blog.jobbole.com/112085/", "comment_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com\">OpenSource</a>   译文出处：<a target=\"_blank\" href=\"https://my.oschina.net/editorial-story/blog/1499026\">开源中国/局长</a>   </div><p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/7599b213c6d67d39e4bb2391c276fbb5.png\"><img class=\"aligncenter wp-image-112080 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/7599b213c6d67d39e4bb2391c276fbb5.png\" alt=\"203755_92u8_2918182\" width=\"520\" height=\"292\"></a></p>\n<p>在这个全新的工具和多样化的开发环境井喷的大环境下，任何开发者和工程师都有必要学习一些基本的系统管理命令。特定的命令和工具包可帮助开发者组织、排查故障并优化他们的应用程序，而且当出现错误时，也可以为运维人员和系统管理员提供有价值的分类信息。</p>\n<p>无论你是新手开发者还是希望管理自己的应用程序，下面 20 条基本的系统管理命令都可以帮助您更好地了解您的应用程序。它们还可以帮助解决为什么应用程序可在本地正常工作但不能在远程主机上工作这类的系统故障。这些命令适用于 Linux 开发环境、容器和虚拟机。</p>\n<h1>1. curl</h1>\n<p>curl 用于传输一个 URL。可以使用这条命令用于测试应用程序的端点或与上游服务端点的连接。curl 还可用于检查你的应用程序是否能连接到其他服务，例如数据库，或检查您的服务是否处于健康的状态。</p>\n<p>举个例子，假如你的应用程序抛出一个 HTTP 500 错误，表示无法访问 MongoDB 数据库：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baff75eb3ae481649484\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl -I -s myapplication:5000\r\n\r\nHTTP/1.0 500 INTERNAL SERVER ERROR</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3ae481649484-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3ae481649484-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3ae481649484-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baff75eb3ae481649484-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">myapplication</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">5000</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3ae481649484-2\"> </div><div class=\"crayon-line\" id=\"crayon-59baff75eb3ae481649484-3\"><span class=\"crayon-v\">HTTP</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">500</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">INTERNAL </span><span class=\"crayon-e\">SERVER </span><span class=\"crayon-v\">ERROR</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p><strong>-I </strong>选项用于显示头信息，<strong>-s </strong>选项表示使用静默模式，不显示错误和进度。检查数据库的端点是否正确：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baff75eb3b8419189935\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl -I -s database:27017\r\n\r\nHTTP/1.0 200 OK</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3b8419189935-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3b8419189935-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3b8419189935-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baff75eb3b8419189935-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">database</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">27017</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3b8419189935-2\"> </div><div class=\"crayon-line\" id=\"crayon-59baff75eb3b8419189935-3\"><span class=\"crayon-v\">HTTP</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">200</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">OK</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>那么可能是什么问题呢？ 检查您的应用程序是否可以访问数据库以外的其他位置：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baff75eb3bb333458463\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl -I -s https://opensource.com\r\n\r\nHTTP/1.1 200 OK</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3bb333458463-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3bb333458463-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3bb333458463-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baff75eb3bb333458463-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//opensource.com</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3bb333458463-2\"> </div><div class=\"crayon-line\" id=\"crayon-59baff75eb3bb333458463-3\"><span class=\"crayon-v\">HTTP</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">200</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">OK</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>看起来这没问题，现在尝试访问数据库。您的应用程序正在使用数据库的主机名，因此请先尝试：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baff75eb3bf963259909\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl database:27017\r\n\r\ncurl: (6) Couldn't resolve host 'database'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3bf963259909-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3bf963259909-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3bf963259909-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baff75eb3bf963259909-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">curl </span><span class=\"crayon-v\">database</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">27017</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3bf963259909-2\"> </div><div class=\"crayon-line\" id=\"crayon-59baff75eb3bf963259909-3\"><span class=\"crayon-v\">curl</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Couldn</span><span class=\"crayon-s\">'t resolve host '</span><span class=\"crayon-i\">database</span>'</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>这表示您的应用程序无法解析数据库，因为数据库的 URL 不可用或主机（容器或VM）没有可用于解析主机名的域名服务器。</p>\n<h1>2. python -m json.tool / jq</h1>\n<p>使用 curl 后，API 调用的输出可读性可能较差。有时候，你希望将生成的 JSON 数据格式化输出以查找特定的条目。Python 有一个内置的库可帮助您实现这个需求。可以使用 <strong>python -m json.tool </strong>来缩进和组织 JSON。要使用 Python 的 JSON 模块，需要使用管道机制，将 JSON 文件的输出作为输入，写入到 <strong>python -m json.tool</strong> 命令行。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baff75eb3c2701889917\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ cat test.json\r\n{\"title\":\"Person\",\"type\":\"object\",\"properties\":{\"firstName\":{\"type\":\"string\"},\"lastName\":{\"type\":\"string\"},\"age\":{\"description\":\"Age in years\",\"type\":\"integer\",\"minimum\":0}},\"required\":[\"firstName\",\"lastName\"]}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3c2701889917-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3c2701889917-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baff75eb3c2701889917-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">json</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3c2701889917-2\"><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">\"title\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"Person\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"object\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"properties\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">\"firstName\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">\"type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"string\"</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"lastName\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">\"type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"string\"</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"age\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">\"description\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"Age in years\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"integer\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"minimum\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"required\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"firstName\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"lastName\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>要使用 Python 库，使用 <strong>-m</strong> (module) 选项将输出内容和 Python 库组合成管道。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baff75eb3c6831118270\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ cat test.json | python -m json.tool\r\n{\r\n    \"properties\": {\r\n        \"age\": {\r\n            \"description\": \"Age in years\",\r\n            \"minimum\": 0,\r\n            \"type\": \"integer\"\r\n        },\r\n        \"firstName\": {\r\n            \"type\": \"string\"\r\n        },\r\n        \"lastName\": {\r\n            \"type\": \"string\"\r\n        }\r\n    },\r\n    \"required\": [\r\n        \"firstName\",\r\n        \"lastName\"\r\n    ],\r\n    \"title\": \"Person\",\r\n    \"type\": \"object\"\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3c6831118270-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3c6831118270-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3c6831118270-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3c6831118270-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3c6831118270-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3c6831118270-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3c6831118270-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3c6831118270-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3c6831118270-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3c6831118270-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3c6831118270-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3c6831118270-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3c6831118270-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3c6831118270-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3c6831118270-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3c6831118270-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3c6831118270-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3c6831118270-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3c6831118270-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3c6831118270-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3c6831118270-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3c6831118270-22\">22</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baff75eb3c6831118270-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">json</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">python</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">json</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">tool</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3c6831118270-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3c6831118270-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"properties\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3c6831118270-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"age\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3c6831118270-5\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">\"description\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Age in years\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3c6831118270-6\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">\"minimum\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3c6831118270-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">\"type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"integer\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3c6831118270-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3c6831118270-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"firstName\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3c6831118270-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">\"type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"string\"</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3c6831118270-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3c6831118270-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"lastName\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3c6831118270-13\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">\"type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"string\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3c6831118270-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3c6831118270-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3c6831118270-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"required\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3c6831118270-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"firstName\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3c6831118270-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"lastName\"</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3c6831118270-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3c6831118270-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"title\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Person\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3c6831118270-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"object\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3c6831118270-22\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p>对于更高级的 JSON 解析，可以安装 <strong><a href=\"https://stedolan.github.io/jq/download/\" target=\"_blank\" rel=\"nofollow\">jq</a>。j</strong><strong>q </strong>提供了一些从 JSON 输入中提取特定值的选项。要像上面的 Python 模块一样将 JSON 输出格式化，只需将 jq 应用到输出即可。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baff75eb3c9286625796\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ cat test.json | jq\r\n{\r\n  \"title\": \"Person\",\r\n  \"type\": \"object\",\r\n  \"properties\": {\r\n    \"firstName\": {\r\n      \"type\": \"string\"\r\n    },\r\n    \"lastName\": {\r\n      \"type\": \"string\"\r\n    },\r\n    \"age\": {\r\n      \"description\": \"Age in years\",\r\n      \"type\": \"integer\",\r\n      \"minimum\": 0\r\n    }\r\n  },\r\n  \"required\": [\r\n    \"firstName\",\r\n    \"lastName\"\r\n  ]\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3c9286625796-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3c9286625796-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3c9286625796-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3c9286625796-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3c9286625796-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3c9286625796-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3c9286625796-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3c9286625796-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3c9286625796-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3c9286625796-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3c9286625796-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3c9286625796-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3c9286625796-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3c9286625796-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3c9286625796-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3c9286625796-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3c9286625796-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3c9286625796-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3c9286625796-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3c9286625796-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3c9286625796-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3c9286625796-22\">22</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baff75eb3c9286625796-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">json</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">jq</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3c9286625796-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3c9286625796-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"title\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Person\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3c9286625796-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"object\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3c9286625796-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"properties\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3c9286625796-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"firstName\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3c9286625796-7\"><span class=\"crayon-h\">      </span><span class=\"crayon-s\">\"type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"string\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3c9286625796-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3c9286625796-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"lastName\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3c9286625796-10\"><span class=\"crayon-h\">      </span><span class=\"crayon-s\">\"type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"string\"</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3c9286625796-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3c9286625796-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"age\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3c9286625796-13\"><span class=\"crayon-h\">      </span><span class=\"crayon-s\">\"description\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Age in years\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3c9286625796-14\"><span class=\"crayon-h\">      </span><span class=\"crayon-s\">\"type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"integer\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3c9286625796-15\"><span class=\"crayon-h\">      </span><span class=\"crayon-s\">\"minimum\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3c9286625796-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3c9286625796-17\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3c9286625796-18\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"required\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3c9286625796-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"firstName\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3c9286625796-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"lastName\"</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3c9286625796-21\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3c9286625796-22\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p></p>\n<h1>3. ls</h1>\n<p><strong>ls </strong>用于列出目录中的文件，系统管理员和开发者会经常使用这个命令。在容器空间中，这条命令可以帮助确定容器镜像中的目录和文件。除了查找文件，<strong>ls </strong>还可以用于检查权限。下面的示例中，由于权限问题，你不能运行 myapp。当你使用 <strong>ls -l </strong>检查权限时，你会发现它的权限在 <strong>-rw-r–r–</strong> 中没有”x”，只有读写的权限。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baff75eb3cd117355410\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./myapp\r\nbash: ./myapp: Permission denied\r\n$ ls -l myapp\r\n-rw-r--r--. 1 root root 33 Jul 21 18:36 myapp</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3cd117355410-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3cd117355410-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3cd117355410-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3cd117355410-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baff75eb3cd117355410-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">myapp</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3cd117355410-2\"><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">myapp</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Permission </span><span class=\"crayon-i\">denied</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3cd117355410-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">myapp</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3cd117355410-4\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">33</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Jul</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">36</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">myapp</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p>\n<h1>4. tail</h1>\n<p><strong>tail </strong>显示文件的最后一部分内容。通常情况下，你不需要浏览每行日志以进行故障排除。而是需要检查日志中对应用程序的最新请求的说明。例如，当你向 Apache HTTP 服务器发起请求时，可以使用 <strong>tail</strong> 来检查日志中发生的情况。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/d3bb1474cbffe499ef82ea809c54c078.png\"><img class=\"aligncenter wp-image-112081 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/d3bb1474cbffe499ef82ea809c54c078.png\" alt=\"205506_GAYc_2918182\" width=\"800\" height=\"321\"></a></p>\n<p><em>使用 <strong>tail -f </strong>来跟踪日志文件并在发起请求时查看它们。</em></p>\n<p><strong>-f</strong> 选项表示跟随的意思，它可在日志被写入文件时输出它们。下面的示例具有每隔几秒访问端点的后台脚本，日志会记录请求。除了实时跟踪日志，还可以使用 <strong>tail </strong>带上 <strong>-n </strong>选项来查看文件的最后 100 行。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baff75eb3d1016968334\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ tail -n 100 /var/log/httpd/access_log</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3d1016968334-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baff75eb3d1016968334-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tail</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">httpd</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">access_log</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p></p>\n<h1>5. cat</h1>\n<p><strong>cat </strong>主要用于查看文件内容和合并文件。你可能会使用 <strong>cat </strong>来检查依赖项文件的内容，或确认已在本地构建的应用程序的版本。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baff75eb3d4729312115\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ cat requirements.txt\r\nflask\r\nflask_pymongo</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3d4729312115-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3d4729312115-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3d4729312115-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baff75eb3d4729312115-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">requirements</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3d4729312115-2\"><span class=\"crayon-e\">flask</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3d4729312115-3\"><span class=\"crayon-v\">flask_pymongo</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>上面的示例检查您的 Python Flask 应用程序是否已将 Flask 列为依赖项。</p>\n<h1>6. grep</h1>\n<p>grep 能使用特定模式匹配（包括正则表达式）搜索文本。如果你在另一条命令的输出中寻找特定的模式，<strong>grep </strong>会高亮显示相关的行。可使用这条命令来搜索日志文件以及特定的进程等。如果想查看 Apache Tomcat 是否启动，你可能会命令行的数量给淹没。但讲输出的内容和 <strong>grep </strong>命令组合成管道，可以将表示服务器已启动的行独立出来。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baff75eb3d7289053296\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ cat tomcat.log | grep org.apache.catalina.startup.Catalina.start\r\n01-Jul-2017 18:03:47.542 INFO [main] org.apache.catalina.startup.Catalina.start Server startup in 681 ms</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3d7289053296-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3d7289053296-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baff75eb3d7289053296-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">tomcat</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">log</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">grep </span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">apache</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">catalina</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">startup</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Catalina</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">start</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3d7289053296-2\"><span class=\"crayon-cn\">01</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">Jul</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2017</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">03</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">47.542</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">INFO</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">main</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">apache</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">catalina</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">startup</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Catalina</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">start </span><span class=\"crayon-e\">Server </span><span class=\"crayon-e\">startup </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">681</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ms</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p>\n<h1>7. ps</h1>\n<p><strong>ps </strong>用于查看进程的各种状态信息。使用该命令可确定正在运行的应用程序或确认预期的进程。例如，如果要检查正在运行的 Tomcat Web 服务器，可使用带有选项的 <strong>ps </strong>来获取 Tomcat 的进程 ID。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baff75eb3da777943324\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ps -ef\r\nUID        PID  PPID  C STIME TTY          TIME CMD\r\nroot         1     0  2 18:55 ?        00:00:02 /docker-java-home/jre/bi\r\nroot        59     0  0 18:55 pts/0    00:00:00 /bin/sh\r\nroot        75    59  0 18:57 pts/0    00:00:00 ps -ef</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3da777943324-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3da777943324-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3da777943324-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3da777943324-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3da777943324-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baff75eb3da777943324-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ps</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">ef</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3da777943324-2\"><span class=\"crayon-e\">UID        </span><span class=\"crayon-e\">PID  </span><span class=\"crayon-i\">PPID</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">STIME </span><span class=\"crayon-e\">TTY          </span><span class=\"crayon-e\">TIME </span><span class=\"crayon-e\">CMD</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3da777943324-3\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\">         </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">55</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">02</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">docker</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">java</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">jre</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">bi</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3da777943324-4\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">59</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">55</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">sh</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3da777943324-5\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">75</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">59</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">57</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ps</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ef</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p>为了更好的易读性，可使用 <strong>grep </strong>和 <strong>ps </strong>组合成管道。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baff75eb3de149740978\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ps -ef | grep tomcat\r\nroot         1     0  1 18:55 ?        00:00:02 /docker-java-home/jre/bi</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3de149740978-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3de149740978-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baff75eb3de149740978-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ps</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ef</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">grep </span><span class=\"crayon-e\">tomcat</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3de149740978-2\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\">         </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">55</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">02</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">docker</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">java</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">jre</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bi</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p>\n<h1>8. env</h1>\n<p><strong>env </strong>用于列出所有环境变量及为其赋值。在故障排除期间，你可能会发现需要检查是否有错误的环境变量来阻止应用程序启动。在下面的示例中，该命令用于检查程序主机上设置的环境变量。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baff75eb3e1158874210\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ env\r\nPYTHON_PIP_VERSION=9.0.1\r\nHOME=/root\r\nDB_NAME=test\r\nPATH=/usr/local/bin:/usr/local/sbin\r\nLANG=C.UTF-8\r\nPYTHON_VERSION=3.4.6\r\nPWD=/\r\nDB_URI=mongodb://database:27017/test</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3e1158874210-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3e1158874210-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3e1158874210-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3e1158874210-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3e1158874210-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3e1158874210-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3e1158874210-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3e1158874210-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3e1158874210-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baff75eb3e1158874210-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">env</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3e1158874210-2\"><span class=\"crayon-v\">PYTHON_PIP_VERSION</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">9.0.1</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3e1158874210-3\"><span class=\"crayon-v\">HOME</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">root</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3e1158874210-4\"><span class=\"crayon-v\">DB_NAME</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">test</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3e1158874210-5\"><span class=\"crayon-v\">PATH</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">sbin</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3e1158874210-6\"><span class=\"crayon-v\">LANG</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">UTF</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">8</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3e1158874210-7\"><span class=\"crayon-v\">PYTHON_VERSION</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">3.4.6</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3e1158874210-8\"><span class=\"crayon-v\">PWD</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3e1158874210-9\"><span class=\"crayon-v\">DB_URI</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">mongodb</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//database:27017/test</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>请注意，该应用程序正在使用 Python 3，并具有连接到 MongoDB 数据库的环境变量。</p>\n<h1>9. top</h1>\n<p><strong>top </strong>用于显示系统中各个进程的信息和资源占用状况，类似于 Windows 的任务管理器。使用该命令可确定哪些进程正在运行，以及它们消耗了多少的内存和 CPU。一种常见的情况是当你运行一个应用程序时，它在一分钟后挂掉。这时，你首先检查应用程序的返回错误，发现是一个内存错误。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baff75eb3e4498968323\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ tail myapp.log\r\nTraceback (most recent call last):\r\nMemoryError</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3e4498968323-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3e4498968323-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3e4498968323-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baff75eb3e4498968323-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tail </span><span class=\"crayon-v\">myapp</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3e4498968323-2\"><span class=\"crayon-e\">Traceback</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">most </span><span class=\"crayon-e\">recent </span><span class=\"crayon-e\">call </span><span class=\"crayon-v\">last</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3e4498968323-3\"><span class=\"crayon-v\">MemoryError</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>你的应用是否真的内存不足？要确认这个问题，可使用 <strong>top </strong>来查看应用程序消耗多少 CPU 和内存。当使用 <strong>top </strong>命令后，您注意到一个 Python 应用程序使用了大部分的 CPU，其内存使用量也迅速攀升。当它运行时，如果进程是你的应用程序，则按”C”键来查看完整命令并进行逆向工程。发现原来是你的内存密集型应用程序(<strong>memeater.py</strong>)。当你的应用程序已经用尽内存，系统会杀掉它并返回一个内存不足(OOM)的错误。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/eeb3863a3e031513712e9556d1c6eeed.png\"><img class=\"aligncenter wp-image-112086 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/eeb3863a3e031513712e9556d1c6eeed.png\" alt=\"205506_GAYc_2918182\" width=\"800\" height=\"332\"></a></p>\n<p><em>应用程序的内存和 CPU 使用量增加，最终因为内存不足而被杀掉。</em></p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/8cef41f3180be447f1405efebfc8420c.png\"><img class=\"aligncenter wp-image-112087 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/8cef41f3180be447f1405efebfc8420c.png\" alt=\"205506_GAYc_2918182\" width=\"800\" height=\"290\"></a></p>\n<p><em>通过按下”C”键，可以看到启动该应用程序的完整命令</em></p>\n<p>除了检查应用程序，还可以使用 <strong>top </strong>来调试其他使用 CPU 或内存的进程。</p>\n<h1>10. netstat</h1>\n<p><strong>netstat </strong>用于显示网络状态信息。该命令可显示正在使用的网络端口及其传入连接。但是，<strong>netstat </strong>在 Linux 中不能开箱即用。如果需要安装它，需要在 <strong><a href=\"https://wiki.linuxfoundation.org/networking/net-tools\" target=\"_blank\" rel=\"nofollow\">net-tools</a> </strong>包中找到它。作为在本地进行试验或将应用程序推送到主机的开发者，可能会收到端口已被分配或地址已被使用的错误。使用 <strong>netstat</strong> 得到协议、进程和端口这些信息，下图表明 Apache HTTP 服务器已经在下面的主机上使用了 80 端口。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/da463bd1dfe1c75df76fff92f6fa4842.png\"><img class=\"aligncenter wp-image-112088 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/da463bd1dfe1c75df76fff92f6fa4842.png\" alt=\"205506_GAYc_2918182\" width=\"800\" height=\"284\"></a></p>\n<p><em>使用 <strong>netstat -tulpn </strong>表明 Apache 已经在这台机器上使用了 80 端口。</em></p>\n<h1>11. ip address</h1>\n<p>如果 <strong>ip address </strong>在你的主机上不能使用，必须使用 <strong><a href=\"https://wiki.linuxfoundation.org/networking/iproute2\" target=\"_blank\" rel=\"nofollow\">iproute2</a> </strong>包进行安装。<strong>i</strong><strong>p address </strong>用于显示应用程序的主机接口和 IP 地址。可使用 <strong>i</strong><strong>p address </strong>来验证你的容器或主机的 IP 地址。例如，当你的容器连接到两个网络时，<strong>i</strong><strong>p address </strong>可显示哪个接口连接到了哪个网络。对于简单的检查，可以随时使用 <strong>ip address </strong>命令获取主机的 IP 地址。下面的示例展示了在接口 eth0 上的 Web 层容器的 IP 地址为 172.17.0.2</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/f47acafef2423ba78048bffb330f5a06.png\"><img class=\"aligncenter wp-image-112089 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/f47acafef2423ba78048bffb330f5a06.png\" alt=\"205506_GAYc_2918182\" width=\"800\" height=\"89\"></a></p>\n<p><em>使用 <strong>ip address </strong>显示 eth0 接口的 IP 地址为 172.17.0.2</em></p>\n<h1>12. lsof</h1>\n<p><strong>lsof </strong>用于列出当前系统打开的文件(list open files)。在某些 Linux 系统中，可能需要使用 <a href=\"http://www.linuxfromscratch.org/blfs/view/svn/general/lsof.html\" target=\"_blank\" rel=\"nofollow\">lsof</a> 包来安装<strong>lsof</strong>。在 Linux 中，几乎任何和系统的交互都被视为一个文件。因此，如果你的应用程序写入文件或代开网络连接，<strong>lsof </strong>将会把这个交互映射为一个文件。与 <strong>netstat </strong>类似，可使用 <strong>lsof </strong>来检查侦听端口。例如，如果要检查 80 端口是否正在被使用，可使用 <strong>lsof </strong>来检查哪个进程正在使用它。下面的示例中，可以看到 httpd (Apache) 在 80 端口上侦听。还可以使用 <strong>lsof </strong>来检查 httpd 的进程ID，检查 Web 服务器的二进制文件所在位置(<strong>/usr/sbin/httpd</strong>)。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/c03a535f9ce77f7c52d661cbdd907bfe.png\"><img class=\"aligncenter wp-image-112090 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/c03a535f9ce77f7c52d661cbdd907bfe.png\" alt=\"205506_GAYc_2918182\" width=\"800\" height=\"252\"></a></p>\n<p><em><strong>Lsof </strong>表明了 httpd 在 80 端口上侦听。检查 httpd 的进程ID还可以显示所有需要运行的文件httpd。</em></p>\n<p>打开文件列表中的打开文件的名称有助于确定进程的来源，特别是 Apache。</p>\n<h1>13. df</h1>\n<p>可以使用 <strong>df</strong> 显示空闲的磁盘空间(display free disk space)以排查磁盘空间问题。挡在容器管理器上运行应用程序时，可能会收到一条错误信息，提示容器主机上缺少可用空间。虽然磁盘空间应该由系统管理程序来管理和优化，你仍可以使用 <strong>df </strong>找出目录中的现有空间并确认是否没有空间。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/d4981e341da22b6f3dd72ffc98003b59.png\"><img class=\"aligncenter wp-image-112091 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/d4981e341da22b6f3dd72ffc98003b59.png\" alt=\"205506_GAYc_2918182\" width=\"800\" height=\"258\"></a></p>\n<p><em><strong>Df</strong> 显示每个文件系统的磁盘空间、绝对空间以及其可用性。</em></p>\n<p><strong>-h </strong>选项表示以可读性较高的方式来显示信息，上面的例子表示这个主机具有大量的磁盘空间。</p>\n<h1>14. du</h1>\n<p><strong>du</strong> 命令也是用于查看使用空间的，但是与 df 命令不同的是 du 命令是对文件和目录磁盘使用的空间的查看，要获取有关哪些文件在目录中使用磁盘空间的更多详细信息，可以使用 du 命令，和 df 命令还是有一些区别的。例如，你想了解那个日志文件占用 <strong>/var/log </strong>目录最多的空间，可以使用 <strong>du</strong> 命令加上 <strong>-h</strong> 选项和用于获取总大小的 <strong>-s </strong>选项。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baff75eb3eb697096238\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ du -sh /var/log/*\r\n1.8M  /var/log/anaconda\r\n384K  /var/log/audit\r\n4.0K  /var/log/boot.log\r\n0 /var/log/chrony\r\n4.0K  /var/log/cron\r\n4.0K  /var/log/maillog\r\n64K /var/log/messages</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3eb697096238-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3eb697096238-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3eb697096238-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3eb697096238-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3eb697096238-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3eb697096238-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3eb697096238-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3eb697096238-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baff75eb3eb697096238-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">du</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sh</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3eb697096238-2\"><span class=\"crayon-cn\">1.8M</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">anaconda</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3eb697096238-3\"><span class=\"crayon-cn\">384K</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">audit</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3eb697096238-4\"><span class=\"crayon-cn\">4.0K</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">boot</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">log</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3eb697096238-5\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">chrony</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3eb697096238-6\"><span class=\"crayon-cn\">4.0K</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">cron</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3eb697096238-7\"><span class=\"crayon-cn\">4.0K</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">maillog</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3eb697096238-8\"><span class=\"crayon-cn\">64K</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">messages</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>上面的示例中显示了 <strong>/var/log </strong>下的的最大目录为 <strong>/var/log/audit</strong>。可以将 <strong>du</strong> 和 <strong>df</strong> 搭配使用，以确定在应用程序的主机上使用的磁盘空间。</p>\n<h1>15. id</h1>\n<p>要检查运行应用程序的用户，可使用 <strong>id </strong>命令来返回用户身份。<strong>id </strong>命令可以显示真实有效的用户ID(UID)和组ID(GID)。下面的示例使用 <a href=\"https://www.vagrantup.com/\" target=\"_blank\" rel=\"nofollow\">Vagrant</a> 来测试应用程序并隔离其开发环境。登录进 Vagrant 盒子后，如果尝试安装 Apache HTTP Server（依赖关系），系统会提示你需要以 root 身份执行该命令。要检查你的用户ID和组ID，使用 <strong>id </strong>命令，会发现你正在”vagrant”组中以”vagrant”用户身份运行。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baff75eb3ef289782342\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ yum -y install httpd\r\nLoaded plugins: fastestmirror\r\nYou need to be root to perform this command.\r\n$ id\r\nuid=1000(vagrant) gid=1000(vagrant) groups=1000(vagrant) context=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3ef289782342-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3ef289782342-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3ef289782342-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3ef289782342-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3ef289782342-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baff75eb3ef289782342-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">yum</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">install </span><span class=\"crayon-e\">httpd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3ef289782342-2\"><span class=\"crayon-e\">Loaded </span><span class=\"crayon-v\">plugins</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fastestmirror</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3ef289782342-3\"><span class=\"crayon-e\">You </span><span class=\"crayon-e\">need </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">be </span><span class=\"crayon-e\">root </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">perform </span><span class=\"crayon-r\">this</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">command</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3ef289782342-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">id</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3ef289782342-5\"><span class=\"crayon-v\">uid</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">vagrant</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gid</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">vagrant</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">groups</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">vagrant</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">context</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">unconfined_u</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">unconfined_r</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">unconfined_t</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">s0</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">s0</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">c0</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">c1023</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>要解决此问题，必须以超级用户的身份运行该命令，这将提供提升的权限。</p>\n<h1>16. chmod</h1>\n<p><strong>c</strong><strong>hmod</strong> 命令用来变更文件或目录的权限。当你在主机上首次运行应用程序的二进制文件时，可能会收到错误提示信息“拒绝访问”。如 <strong>ls </strong>的示例所示，可以用于检查应用程序二进制文件的权限。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baff75eb3f2932247045\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ls -l\r\ntotal 4\r\n-rw-rw-r--. 1 vagrant vagrant 34 Jul 11 02:17 test.sh</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3f2932247045-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3f2932247045-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3f2932247045-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baff75eb3f2932247045-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3f2932247045-2\"><span class=\"crayon-i\">total</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3f2932247045-3\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">vagrant </span><span class=\"crayon-i\">vagrant</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">34</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Jul</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">02</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sh</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>这表明您没有权限（没有“x”）来运行二进制文件。<strong>c</strong><strong>hmod </strong>可以修改权限，使的用户能够运行二进制文件。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baff75eb3f5511895948\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ chmod +x test.sh\r\n[vagrant@localhost ~]$ ls -l\r\ntotal 4\r\n-rwxrwxr-x. 1 vagrant vagrant 34 Jul 11 02:17 test.sh</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3f5511895948-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3f5511895948-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3f5511895948-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3f5511895948-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baff75eb3f5511895948-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">sh</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3f5511895948-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">vagrant</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3f5511895948-3\"><span class=\"crayon-i\">total</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3f5511895948-4\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rwxrwxr</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">vagrant </span><span class=\"crayon-i\">vagrant</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">34</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Jul</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">02</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sh</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>如例子所示，这将更新权限，使其具有可执行的权限。现在当你尝试执行二进制文件时，应用程序不会抛出拒绝访问的错误。当将二进制文件加载到容器时，<strong>Chmod</strong> 可能很有用。它能保证容器具有合适的权限以执行二进制文件。</p>\n<h1>17. dig / nslookup</h1>\n<p><strong>dig </strong>命令是常用的域名查询工具，可以用来测试域名系统工作是否正常。域名服务器(DNS)有助于将 URL 解析为一组应用程序服务器。然而，你会发现有些 URL 不能被解析，这会导致应用程序的连接问题。例如，假如你尝试从应用程序的主机访问你的数据库。你收到一个”不能解析”的错误。要进行故障排查，你尝试使用 <strong>dig</strong>（DNS 查询工具）或 <strong>nslookup</strong>（查询 Internet 域名服务器）来确定应用程序似乎无法解析数据的原因。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baff75eb3f9629082693\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ nslookup mydatabase\r\nServer:   10.0.2.3\r\nAddress:  10.0.2.3#53\r\n\r\n** server can't find mydatabase: NXDOMAIN</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3f9629082693-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3f9629082693-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3f9629082693-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3f9629082693-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3f9629082693-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baff75eb3f9629082693-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nslookup </span><span class=\"crayon-e\">mydatabase</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3f9629082693-2\"><span class=\"crayon-v\">Server</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">10.0.2.3</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3f9629082693-3\"><span class=\"crayon-v\">Address</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">10.0.2.3</span><span class=\"crayon-p\">#53</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3f9629082693-4\"> </div><div class=\"crayon-line\" id=\"crayon-59baff75eb3f9629082693-5\"><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">server </span><span class=\"crayon-i\">can</span>'<span class=\"crayon-i\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">find </span><span class=\"crayon-v\">mydatabase</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NXDOMAIN</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>使用 <strong>nslookup </strong>显示无法解析 <strong>mydatabase</strong>。尝试使用 <strong>dig </strong>解决，但仍是相同的结果。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baff75eb3fc423125324\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ dig mydatabase\r\n\r\n; &lt;&lt;&gt;&gt; DiG 9.9.4-RedHat-9.9.4-50.el7_3.1 &lt;&lt;&gt;&gt; mydatabase\r\n;; global options: +cmd\r\n;; connection timed out; no servers could be reached</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3fc423125324-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3fc423125324-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3fc423125324-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3fc423125324-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3fc423125324-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baff75eb3fc423125324-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">dig </span><span class=\"crayon-i\">mydatabase</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3fc423125324-2\"> </div><div class=\"crayon-line\" id=\"crayon-59baff75eb3fc423125324-3\"><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">DiG</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.9.4</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">RedHat</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">9.9.4</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">50.el7_3.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">mydatabase</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3fc423125324-4\"><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">global</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">options</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">cmd</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3fc423125324-5\"><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">connection </span><span class=\"crayon-e\">timed </span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">no </span><span class=\"crayon-e\">servers </span><span class=\"crayon-e\">could </span><span class=\"crayon-e\">be </span><span class=\"crayon-v\">reached</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>这些错误可能是由许多不同的问题引起的。如果无法调试出根本原因，与系统管理员联系以进行更多的调查。对于本地测试，这些问题可能表示你的主机的域名服务器未正确配置。要使用这些命令，需要安装 <strong><a href=\"http://www.linuxfromscratch.org/blfs/view/svn/basicnet/bind-utils.html\" target=\"_blank\" rel=\"nofollow\">BIND Utilities</a> </strong>包<strong>。</strong></p>\n<h1>18. iptables</h1>\n<p>iptables 用于阻止或允许 Linux 主机上的流量，用于 IP 包过滤器管理，类似于网络防火墙。此工具可阻止某些应用程序接收或发送请求。更具体地说，如果您的应用程序难以访问另一个端点，可能已被 iptables 拒绝流量访问该端点。例如，假设您的应用程序的主机无法访问 Opensource.com，您使用 <strong>curl </strong>来测试连接。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baff75eb3ff644606043\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl -vvv opensource.com\r\n* About to connect() to opensource.com port 80 (#0)\r\n*   Trying 54.204.39.132...\r\n* Connection timed out\r\n* Failed connect to opensource.com:80; Connection timed out\r\n* Closing connection 0\r\ncurl: (7) Failed connect to opensource.com:80; Connection timed out</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3ff644606043-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3ff644606043-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3ff644606043-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3ff644606043-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3ff644606043-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb3ff644606043-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb3ff644606043-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baff75eb3ff644606043-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">vvv </span><span class=\"crayon-v\">opensource</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e \">com</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3ff644606043-2\"><span class=\"crayon-e \">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">About </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">connect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opensource</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">com </span><span class=\"crayon-i\">port</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">80</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-p\">#0)</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3ff644606043-3\"><span class=\"crayon-o\">*</span><span class=\"crayon-h\">   </span><span class=\"crayon-i\">Trying</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">54.204.39.132...</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3ff644606043-4\"><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Connection </span><span class=\"crayon-e\">timed </span><span class=\"crayon-e \">out</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3ff644606043-5\"><span class=\"crayon-e \">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Failed </span><span class=\"crayon-e\">connect </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opensource</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">80</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Connection </span><span class=\"crayon-e\">timed </span><span class=\"crayon-e \">out</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb3ff644606043-6\"><span class=\"crayon-e \">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Closing </span><span class=\"crayon-i\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb3ff644606043-7\"><span class=\"crayon-v\">curl</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Failed </span><span class=\"crayon-e\">connect </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opensource</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">80</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Connection </span><span class=\"crayon-e\">timed </span><span class=\"crayon-v\">out</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p>连接超时。您怀疑某些东西可能会阻塞流量，因此您使用 <strong>-S </strong>选项显示 <strong>iptables </strong>规则。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baff75eb403512791985\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ iptables -S\r\n-P INPUT DROP\r\n-P FORWARD DROP\r\n-P OUTPUT DROP\r\n-A INPUT -p tcp -m tcp --dport 22 -j ACCEPT\r\n-A INPUT -i eth0 -p udp -m udp --sport 53 -j ACCEPT\r\n-A OUTPUT -p tcp -m tcp --sport 22 -j ACCEPT\r\n-A OUTPUT -o eth0 -p udp -m udp --dport 53 -j ACCEPT</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baff75eb403512791985-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb403512791985-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb403512791985-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb403512791985-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb403512791985-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb403512791985-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb403512791985-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb403512791985-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baff75eb403512791985-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iptables</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">S</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb403512791985-2\"><span class=\"crayon-o\">-</span><span class=\"crayon-i\">P</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">INPUT </span><span class=\"crayon-v\">DROP</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb403512791985-3\"><span class=\"crayon-o\">-</span><span class=\"crayon-i\">P</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FORWARD </span><span class=\"crayon-v\">DROP</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb403512791985-4\"><span class=\"crayon-o\">-</span><span class=\"crayon-i\">P</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">OUTPUT </span><span class=\"crayon-v\">DROP</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb403512791985-5\"><span class=\"crayon-o\">-</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">INPUT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tcp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tcp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">dport</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ACCEPT</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb403512791985-6\"><span class=\"crayon-o\">-</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">INPUT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">eth0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">udp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">udp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">sport</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">53</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ACCEPT</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb403512791985-7\"><span class=\"crayon-o\">-</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">OUTPUT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tcp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tcp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">sport</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ACCEPT</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb403512791985-8\"><span class=\"crayon-o\">-</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">OUTPUT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">eth0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">udp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">udp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">dport</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">53</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ACCEPT</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0029 seconds] -->\r\n<p>前三个规则显示，默认情况下流量已被丢弃。剩下的规则表示允许 SSH 和 DNS 流量。在这种情况下，如果需要允许流量到外部端点的规则，请跟上 sysadmin。如果这是用于本地开发或测试的主机，可使用 <strong>iptables </strong>命令来允许合适的流量。添加允许到主机的流量的规则时一定要谨慎。</p>\n<h1>19. sestatus</h1>\n<p>通常会在企业管理的应用程序主机上使用 SELinux（一个 Linux 安全模块）。SELinux 对主机上运行的进程提供最低权限的访问，防止潜在的恶意进程访问系统上的重要文件。某些情况下，应用程序需要访问特定文件，但可能会发生错误。要检查 SELinux 是否阻止了应用程序，使用 <strong>tail </strong>和 <strong>grep </strong>在 <strong>/var/log/audit </strong>日志记录中查找”denied”（被拒绝）的信息。否则，使用 <strong>sestatus </strong>来检查是否启动了 SELinux。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baff75eb406185925295\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sestatus\r\nSELinux status:                 enabled\r\nSELinuxfs mount:                /sys/fs/selinux\r\nSELinux root directory:         /etc/selinux\r\nLoaded policy name:             targeted\r\nCurrent mode:                   enforcing\r\nMode from config file:          enforcing\r\nPolicy MLS status:              enabled\r\nPolicy deny_unknown status:     allowed\r\nMax kernel policy version:      28</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baff75eb406185925295-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb406185925295-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb406185925295-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb406185925295-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb406185925295-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb406185925295-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb406185925295-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb406185925295-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb406185925295-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb406185925295-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baff75eb406185925295-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sestatus</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb406185925295-2\"><span class=\"crayon-e\">SELinux </span><span class=\"crayon-v\">status</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">                 </span><span class=\"crayon-e\">enabled</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb406185925295-3\"><span class=\"crayon-e\">SELinuxfs </span><span class=\"crayon-v\">mount</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">                </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sys</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">fs</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">selinux</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb406185925295-4\"><span class=\"crayon-e\">SELinux </span><span class=\"crayon-e\">root </span><span class=\"crayon-v\">directory</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">         </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">selinux</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb406185925295-5\"><span class=\"crayon-e\">Loaded </span><span class=\"crayon-e\">policy </span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">             </span><span class=\"crayon-e\">targeted</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb406185925295-6\"><span class=\"crayon-e\">Current </span><span class=\"crayon-v\">mode</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">                   </span><span class=\"crayon-e\">enforcing</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb406185925295-7\"><span class=\"crayon-e\">Mode </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">config </span><span class=\"crayon-v\">file</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">          </span><span class=\"crayon-e\">enforcing</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb406185925295-8\"><span class=\"crayon-e\">Policy </span><span class=\"crayon-e\">MLS </span><span class=\"crayon-v\">status</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">              </span><span class=\"crayon-e\">enabled</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb406185925295-9\"><span class=\"crayon-e\">Policy </span><span class=\"crayon-e\">deny_unknown </span><span class=\"crayon-v\">status</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">     </span><span class=\"crayon-e\">allowed</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb406185925295-10\"><span class=\"crayon-e\">Max </span><span class=\"crayon-e\">kernel </span><span class=\"crayon-e\">policy </span><span class=\"crayon-v\">version</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">28</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>上面的输出表示应用程序的主机已启用 SELinux。在本地开发环境中，可以更新 <strong>SELinux</strong> 使得权限更宽松。</p>\n<h1>20. history</h1>\n<p>当你使用大量的命令进行测试和调试时，可能会忘记有用的命令。每个 shell 都有一个 <strong>history </strong>命令的变体。它可显示自会话开始以来使用的命令的历史记录。可以使用 <strong>history </strong>来记录用来排除应用程序故障的命令。history 命令用于显示指定数目的指令命令，读取历史命令文件中的目录到历史命令缓冲区和将历史命令缓冲区中的目录写入命令文件。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baff75eb40a640831406\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ history\r\n    1  clear\r\n    2  df -h\r\n    3  du</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baff75eb40a640831406-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb40a640831406-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baff75eb40a640831406-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baff75eb40a640831406-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baff75eb40a640831406-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">history</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb40a640831406-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">clear</span></div><div class=\"crayon-line\" id=\"crayon-59baff75eb40a640831406-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">df</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">h</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baff75eb40a640831406-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">du</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>如果希望执行之前历史记录中的命令，但又不想重新输入，该怎么办？使用符号 <strong>!</strong> 即可，可以使用符号 <strong>!</strong> 执行指定序号的历史命令。例如，要执行第 2 个历史命令，则输入<strong>!</strong>2，</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/84a8a291f13fb68c3468a03906458adb.png\"><img class=\"aligncenter wp-image-112092 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/84a8a291f13fb68c3468a03906458adb.png\" alt=\"205506_GAYc_2918182\" width=\"800\" height=\"121\"></a></p>\n<p>在需要重新执行的命令的指定编号前添加 <strong>! </strong>即可重新执行</p>\n<p>这些基本命令能增强排查故障的专业技能，可检查为什么应用程序可以在一个开发环境中工作，而在另一个开发环境中则不可以。许多系统管理员使用这些命令来调试系统问题。了解一些有用的故障排查命令可帮助解决应用程序的问题。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112085\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112085votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112085\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 7 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 7, "create_date": "2017-09-15"},{"front_image_path": "full/d6573fc92df4aa98014ce9dc55320411b7b5bf1d.jpg", "url_object_id": "8d43f3214a6d4c3595599b41dd869a1d", "praise_nums": "3", "title": "这些奇怪的排序算法，你没见过吧？", "tags": "IT技术,趣文小说,排序算法", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/07/15cdc9eaec6ba9ac858b0eaebfb6b949.jpg"], "url": "http://blog.jobbole.com/112051/", "comment_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/snowhere\">孙腾浩</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://www.quora.com/What-is-the-strangest-sorting-algorithm\">Quora</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【伯乐在线导读】：如果有人问你哪种排序算法最奇怪，可能你会先在冒泡排序、选择排序、快速排序等常见排序算法中「搜索」了。</p>\n<p>有人在 Quora 上也发帖问了这个问题。于是乎，各种脑洞大开的奇特算法就被列出来了。它们可能存在性能问题或无法实现，但是不可否认其创造性。</p>\n<p><img class=\"alignnone wp-image-112059\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/15cdc9eaec6ba9ac858b0eaebfb6b949.jpg\" alt=\"黑人问号\" width=\"571\" height=\"326\"></p>\n<h3>睡眠排序（Nipun Ramakrishnan 的回答）</h3>\n<p>这个搞笑算法流传于 4chan 的 /prog/ 板块。无从查证具体出自哪位程序员，伪代码如下</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baeeaab9086817078139\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nprocedure printNumber(n)\r\n    sleep n seconds\r\n    print n\r\nend\r\n\r\nfor arg in args\r\n    run printNumber(arg) in background\r\nend\r\nwait for all processes to finish</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baeeaab9086817078139-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baeeaab9086817078139-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baeeaab9086817078139-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baeeaab9086817078139-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59baeeaab9086817078139-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baeeaab9086817078139-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59baeeaab9086817078139-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baeeaab9086817078139-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59baeeaab9086817078139-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baeeaab9086817078139-1\"><span class=\"crayon-e\">procedure </span><span class=\"crayon-e\">printNumber</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baeeaab9086817078139-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">sleep</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">seconds</span></div><div class=\"crayon-line\" id=\"crayon-59baeeaab9086817078139-3\"><span class=\"crayon-e\">    </span><span class=\"crayon-i\">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baeeaab9086817078139-4\"><span class=\"crayon-st\">end</span></div><div class=\"crayon-line\" id=\"crayon-59baeeaab9086817078139-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baeeaab9086817078139-6\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">arg </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">args</span></div><div class=\"crayon-line\" id=\"crayon-59baeeaab9086817078139-7\"><span class=\"crayon-e\">    </span><span class=\"crayon-e\">run </span><span class=\"crayon-e\">printNumber</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">arg</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">background</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baeeaab9086817078139-8\"><span class=\"crayon-st\">end</span></div><div class=\"crayon-line\" id=\"crayon-59baeeaab9086817078139-9\"><span class=\"crayon-e\">wait </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">all </span><span class=\"crayon-e\">processes </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">finish</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>算法运行如下： 对于数组中每个元素 x，开启一个新程序：</p>\n<ul>\n<li>休眠 x 秒</li>\n<li>打印 x 所有元素同时开始计时。 只适用于非负数字。</li>\n</ul>\n<h3>Bogo 排序/猴子排序 （Ryan Turner的回答）</h3>\n<p>Bogo 排序/猴子排序，名字很奇怪。它是<a href=\"https://en.m.wikipedia.org/wiki/Stupid_sort\">愚蠢排序</a>中的一员。</p>\n<p>主要来说，算法就是你把元素随机排列。</p>\n<p>如果没有排好序，再次把元素随机排列。</p>\n<p>如果还没有排好序，你懂的。下面是个例子：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baeeaab908f082668581\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n4, 7, 9, 6, 5, 5, 2, 1 (未排序)\r\n2, 5, 4, 7, 5, 9, 6, 1 (随机排列)\r\n1, 4, 5, 6, 9, 7, 5, 2 (再次随机排列)\r\n1, 2, 4, 5, 5, 6, 7, 9 (天呐，真幸运)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baeeaab908f082668581-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baeeaab908f082668581-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baeeaab908f082668581-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baeeaab908f082668581-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baeeaab908f082668581-1\"><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span>未排序<span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baeeaab908f082668581-2\"><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span>随机排列<span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59baeeaab908f082668581-3\"><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span>再次随机排列<span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baeeaab908f082668581-4\"><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span>天呐，真幸运<span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p>你不停地随机排序，直到得到一个有序数组。</p>\n<p>毫无疑问这是最低效的排序算法之一，除非你非常非常幸运。它时间复杂度是令人窒息的 O(n!)，而且随着元素数量增加，很有 O(∞) 的趋势。</p>\n<h3>量子 Bogo 排序（Tyler Schroeder 的回答）</h3>\n<p>我是量子 Bogo 排序的粉丝：</p>\n<ul>\n<li>随机排列数组中元素。</li>\n<li>如果数组没有排好序，摧毁当前宇宙（这一步就拜托你了）</li>\n<li>存活的宇宙将会有排好序的数组。 时间复杂度仅仅 O(n) 注意：这种算法依赖于量子力学的平行宇宙理论的可靠性。如果量子力学的平行宇宙理论不准确，这个算法时间复杂度达不到 O(n)</li>\n</ul>\n<h3>打印店页码排序 （Yi Wang的回答）</h3>\n<p>这并不是我发明的，我从别处看到的。</p>\n<p>一个学生去打印店打印材料。他需要两份，但并没有直接打印两份，而是将每一页打印了两次，像下面这样：</p>\n<p>需要的页码顺序: 1 2 3 4 … N; 1 2 3 4 … N</p>\n<p>手上的页码顺序: 1 1 2 2 3 3 4 4 …. N N</p>\n<p>他开始对打印材料排序，取一页放在左边，然后取一页放在右边。打印店老板看不下去了，直接把材料拿过来。</p>\n<p>老板首先取一页放在左边，然后两页放在右边，再然后两页左边，两页右边…… 排序速度瞬间翻倍 ……</p>\n<p>（有网友评论提醒：这是归纳，不是排序）</p>\n<h2>下面是其他网友的回答：</h2>\n<h3>慢排序</h3>\n<p>这是一个非常幽默却没什么用的排序算法。它基于“合而不治”的原则（分治算法基本思想“分而治之”的反义词，文字游戏），它由 Andrei Broder 和 Jorge Stolfi 于 1986 年发表在论文《Pessimal Algorithms and Simplexity Analysis（最坏排序和简单性分析）》中，伪代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baeeaab9094264566777\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfunction slowSort(array,start,end){\r\n    if( start &gt;= end ) return; //已经不能再慢了\r\n    middle = floor( (start+end)/2 );\r\n\r\n    //递归\r\n    slowSort(array,start,middle);\r\n    slowSort(array,middle+1,end);\r\n\r\n    //比较得出最大值放在队尾\r\n    if( array[end] &lt; array[middle] )\r\n        swap array[end] and array[middle]\r\n\r\n    //去掉最大值之后再排序\r\n    slowsort(array,start,end-1);\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baeeaab9094264566777-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baeeaab9094264566777-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baeeaab9094264566777-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baeeaab9094264566777-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59baeeaab9094264566777-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baeeaab9094264566777-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59baeeaab9094264566777-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baeeaab9094264566777-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59baeeaab9094264566777-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baeeaab9094264566777-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59baeeaab9094264566777-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baeeaab9094264566777-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59baeeaab9094264566777-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baeeaab9094264566777-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59baeeaab9094264566777-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baeeaab9094264566777-1\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">slowSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">start</span><span class=\"crayon-sy\">,</span><span class=\"crayon-st\">end</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baeeaab9094264566777-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">start</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">end</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">return</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//已经不能再慢了</span></div><div class=\"crayon-line\" id=\"crayon-59baeeaab9094264566777-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">middle</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">floor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">start</span><span class=\"crayon-o\">+</span><span class=\"crayon-st\">end</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baeeaab9094264566777-4\"> </div><div class=\"crayon-line\" id=\"crayon-59baeeaab9094264566777-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">//递归</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baeeaab9094264566777-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">slowSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">start</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">middle</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59baeeaab9094264566777-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">slowSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">middle</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-st\">end</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baeeaab9094264566777-8\"> </div><div class=\"crayon-line\" id=\"crayon-59baeeaab9094264566777-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">//比较得出最大值放在队尾</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baeeaab9094264566777-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-st\">end</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">middle</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59baeeaab9094264566777-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">swap </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-st\">end</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">middle</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baeeaab9094264566777-12\"> </div><div class=\"crayon-line\" id=\"crayon-59baeeaab9094264566777-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">//去掉最大值之后再排序</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baeeaab9094264566777-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">slowsort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">start</span><span class=\"crayon-sy\">,</span><span class=\"crayon-st\">end</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59baeeaab9094264566777-15\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p></p>\n<ul>\n<li>递归排序好前一半</li>\n<li>递归排序好后一半</li>\n<li>比较中间和队尾的值，得到整个数组的最大值，将最大值放到队尾。</li>\n<li>去掉最大值，递归整个数组</li>\n</ul>\n<h3>Stack 排序</h3>\n<p>从 StackOverflow 上搜索标题含有“数组排序”的帖子，复制粘贴并运行其中的代码片段，直到数组排好序。我认为这种排序算法事实上验证了整个数组。它被发表在<a href=\"https://xkcd.com/1185/\">xkcd网站</a>上，这里有一个在线版的具体实现<a href=\"https://gkoberger.github.io/stacksort/\">stacksort</a></p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/07/87e983d6fd4a07bf10518f60d84c2595.png\"><img class=\"alignnone size-medium wp-image-65367\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/87e983d6fd4a07bf10518f60d84c2595.png\" alt=\"stacksort\"></a></p>\n<h3>随机排序</h3>\n<p>运行如下： 创建一个随机程序。 传入数组并运行随机程序。 如果程序的输出恰好是排好序的，完成。 否则重复上面过程。</p>\n<h3>太阳能比特翻转排序</h3>\n<p>太阳发出的阿尔法粒子偶尔能够翻转内存中的比特位，所以这种算法主要基于希望这种翻转能够使元素正确排序。运行方式如下：</p>\n<p>检查数组是否排好序。 如果排好序，返回这个数组。 如果没有，等 10 秒钟并祈祷太阳辐射使得比特位翻转，而且使得数组排好序，重复第一步。</p>\n<h3>意大利面排序</h3>\n<p>这是一种线性时间算法，是需要 O(n) 空间的稳定排序。它需要并行处理器。简单来说，假设我们排序一列自然数。排序方法需要使用很多根生的意大利面条。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/07/eb19bcfbd683bded0fdd0b92891aac90.png\"><img class=\"size-medium wp-image-65368\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/eb19bcfbd683bded0fdd0b92891aac90.png\" alt=\"意大利面\"></a></p>\n<p>将数据按比例转换成表示意大利面条长度的数字。 在每根面条上写下数字，并将面条折断成数字表示的长度。 把所有面条攥成一捆并把底部在平面上敲击。 取出最突出的一根面条，也就是最长的一根，获取上面的数字，转换成原始的数据并记录下来。 重复这个过程直到处理完所有意大利面。</p>\n<h3>指鹿为马排序</h3>\n<p>这个算法时间复杂度 O(n)。 聚集一帮人并向他们展示数组。 询问他们这个数组是否是排序好的。 干掉其中认为没有排序好的人。 重复几次，直到所有人同意这个数组是排序好的。</p>\n<h3>智能设计排序</h3>\n<p>无论你的数组状态是什么样的，它都算是排好序的。 解释：原始输入按照某种顺序的概率是 1/(n!)。概率是如此小，（当前的顺序）归结于运气成分显然是荒谬的，所以它是按照“智能设计”排序过的。所以完全可以说数组已经排好序了，只是不是我们传统意义上的“升序”。如果按照我们传统观点对它进行操作，只会让它乱序。（<a href=\"https://zh.wikipedia.org/wiki/%E6%99%BA%E8%83%BD%E8%AE%BE%E8%AE%A1\">“智能设计”涉及宗教和哲学，不过多解释</a>）</p>\n<h3>互联网排序</h3>\n<p>这是一种冒泡排序，但每次比较都依靠互联网的搜索。比如 “0.211 和 0.75 哪个大？”</p>\n<h3>委员会排序</h3>\n<p>排序一个包含 N 个自然数的数组，首先用纸打印出 N 份整个数组。 然后在办公室周围选择几个恰好路过的倒霉委员。每个委员对应数组中的一个数字。 给每个委员一份打印的数组，并让他们通过开会或其他手段，来决定自己代表的数字应该在有序数组中的位置。 当这些委员有结论并答复你时，数组自然排好序了。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2017/01/5085cce1bd4e144b7d148079a34b20c1.jpg\">\n            \n                            <img src=\"http://jbcdn2.b0.upaiyun.com/2017/01/02b09a29fdb3ab5fe03d4bd1afe95664.jpg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112051\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112051votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112051\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 6 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/snowhere\">孙腾浩</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/snowhere\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/06/47765e50cfb7c4e598e72d893ab4f62f.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            毕业于郑州大学软件工程专业，身为 Java 程序猿却同样热爱着 JavaScript 。为了兴趣而写代码，做自己喜欢做的事。Keep coding ... Stay Cool ...        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/snowhere\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/snowhere/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/snowhere/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 19</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://snowhere.me/\"><i class=\"fa fa-link\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/Snowhere/\"><i class=\"fa fa-github\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 6, "create_date": "2017-09-15"},{"front_image_path": "full/75f6595b87bc254afe77bc1151f1aea91fb72f4b.jpg", "url_object_id": "42ebcbade0688b35076d01309348c96f", "praise_nums": "3", "title": "MySQL 高性能表设计规范", "tags": "IT技术,MySQL,数据库", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/11/dea4002e77dd3ecd398568bf746ea46c.png"], "url": "http://blog.jobbole.com/112035/", "comment_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.jianshu.com/p/f797bbe11d76\">高广超</a>   </div><div>\n<div>\n<p>良好的逻辑设计和物理设计是高性能的基石， 应该根据系统将要执行的查询语句来设计schema, 这往往需要权衡各种因素。</p>\n<h2>一、选择优化的数据类型</h2>\n<p>MySQL支持的数据类型非常多， 选择正确的数据类型对于获得高性能至关重要。</p>\n<h4>更小的通常更好</h4>\n<p>更小的数据类型通常更快， 因为它们占用更少的磁盘、 内存和CPU缓存， 并且处理时需要的CPU周期也更少。</p>\n<h4>简单就好</h4>\n<p>简单数据类型的操作通常需要更少的CPU周期。 例如， 整型比字符操作代价更低， 因为字符集和校对规则（排序规则 ）使字符比较比整型比较更复杂。</p>\n<h4>尽量避免NULL</h4>\n<p>如果查询中包含可为NULL 的列， 对MySQL来说更难优化， 因为可为NULL 的列使得索引、 索引统计和值比较都更复杂。 可为NULL的列会使用更多的存储空间， 在MySQL里也需要特殊处理。 当可为NULL的列被索引时， 每个索引记录需要一个额外的字节， 在MyISAM里甚至还可能导致固定大小的索引（例如只有一个整数列的索引）变成可变大小的索引。<br>\n当然也有例外， 例如InnoDB 使用单独的位 (bit) 存储NULL值， 所以对于稀疏数据有很好的空间效率。</p>\n<h3>1.整数类型</h3>\n<p>有两种类型的数字：整数 (whole number) 和实数 (real number) 。 如果存储整数， 可以使用这几种整数类型：TINYINT, SMALLINT, MEDIUMINT, INT, BIGINT。分别使用8,16, 24, 32, 64位存储空间。</p>\n<p>整数类型有可选的 **UNSIGNED ** 属性，表示不允许负值，这大致可以使正数的上限提高一倍。 例如 TINYINT. UNSIGNED 可以存储的范围是 0 – 255, 而 TINYINT 的存储范围是 -128 -127 。</p>\n<p><strong>有符号和无符号类型使用相同的存储空间，并具有相同的性能</strong> ， 因此可以根据实际情况选择合适的类型。</p>\n<p>你的选择决定 MySQL 是怎么在内存和磁盘中保存数据的。 然而， 整数计算一般使用64 位的 BIGINT 整数， 即使在 32 位环境也是如此。（ 一些聚合函数是例外， 它们使用DECIMAL 或 DOUBLE 进行计算）。</p>\n<p>MySQL 可以为整数类型指定宽度， 例如 INT(11), 对大多数应用这是没有意义的：它不会限制值的合法范围，只是规定了MySQL 的一些交互工具（例如 MySQL 命令行客户端）用来显示字符的个数。 对于存储和计算来说， INT(1) 和 INT(20) 是相同的。</p>\n<h3>2.实数类型</h3>\n<p>实数是带有小数部分的数字。 然而， 它们不只是为了存储小数部分，也可以使用DECIMAL 存储比 BIGINT 还大的整数。</p>\n<p>FLOAT和DOUBLE类型支持使用标准的浮点运算进行近似计算。<br>\nDECIMAL类型用于存储精确的小数。<br>\n浮点和DECIMAL类型都可以指定精度。 对于DECIMAL列， 可以指定小数点前后所允许的最大位数。这会影响列的空间消耗。</p>\n<p>有多种方法可以指定浮点列所需要的精度， 这会使得MySQL选择不同的数据类型，或者在存储时对值进行取舍。 这些精度定义是非标准的，<strong>所以我们建议只指定数据类型，不指定精度。</strong></p>\n<p><strong>浮点类型在存储同样范围的值时， 通常比DECIMAL使用更少的空间。FLOAT使用4个字节存储。DOUBLE占用8个字节，相比FLOAT有更高的精度和更大的范围。和整数类型一样， 能选择的只是存储类型； MySQL使用DOUBLE作为内部浮点计算的类型。</strong></p>\n<p>因为需要额外的空间和计算开销，所以应该尽量只在对小数进行精确计算时才使用DECIMAL。<strong>但在数据最比较大的时候， 可以考虑使用BIGINT代替DECIMAL, 将需要存储的货币单位根据小数的位数乘以相应的倍数即可。</strong></p>\n<h3>3.字符串类型</h3>\n<h4>VARCHAR</h4>\n<p>用于存储可变⻓字符串，长度支持到65535<br>\n需要使用1或2个额外字节记录字符串的长度<br>\n适合：字符串的最大⻓度比平均⻓度⼤很多；更新很少</p>\n<h4>CHAR</h4>\n<p>定⻓，⻓度范围是1~255<br>\n适合：存储很短的字符串，或者所有值接近同一个长度；经常变更</p>\n<h4>慷慨是不明智的</h4>\n<p>使用VARCHAR(5)和VARCHAR(200)存储’hello’的空间开销是一样的。 那么使用更短的列有什么优势吗？</p>\n<p>事实证明有很大的优势。 更长的列会消耗更多的内存， 因为MySQL通常会分配固定大小的内存块来保存内部值。 尤其是使用内存临时表进行排序或操作时会特别糟糕。 在利用磁盘临时表进行排序时也同样糟糕。</p>\n<p>所以最好的策略是只分配真正需要的空间。</p>\n<h3>4.BLOB和TEXT类型</h3>\n<p>BLOB和 TEXT都是为存储很大的数据而设计的字符串数据类型， 分别采用 二进制和字符方式存储 。</p>\n<p>与其他类型不同， MySQL把每个BLOB和TEXT值当作一个独立的对象处理。 存储引擎在存储时通常会做特殊处理。 当BLOB和TEXT值太大时，InnoDB会使用专门的 “外部“存储区域来进行存储， 此时每个值在行内需要1 – 4个字节存储 存储区域存储实际的值。</p>\n<p>BLOB 和 TEXT 之间仅有的不同是 BLOB 类型存储的是二进制数据， 没有排序规则或字符集， 而 TEXT类型有字符集和排序规则</p>\n<h3>5.日期和时间类型</h3>\n<p>大部分时间类型都没有替代品， 因此没有什么是最佳选择的问题。 唯一的问题是保存日期和时间的时候需要做什么。 MySQL提供两种相似的日期类型： DATE TIME和 TIMESTAMP。</p>\n<p>但是目前我们更建议存储时间戳的方式，因此该处不再对 DATE TIME和 TIMESTAMP做过多说明。</p>\n<h3>5.其他类型</h3>\n<h4>5.1选择标识符</h4>\n<p>在可以满足值的范围的需求， 井且预留未来增长空间的前提下， 应该选择最小的数据类型。</p>\n<h5>整数类型</h5>\n<p>整数通常是标识列最好的选择， 因为它们很快并且可以使用AUTO_INCREMENT。</p>\n<h5>ENUM和SET类型</h5>\n<p>对于标识列来说，EMUM和SET类型通常是一个糟糕的选择， 尽管对某些只包含固定状态或者类型的静态 ”定义表” 来说可能是没有问题的。ENUM和SET列适合存储固定信息， 例如有序的状态、 产品类型、 人的性别。</p>\n<h5>字符串类型</h5>\n<p>如果可能， 应该避免使用字符串类型作为标识列， 因为它们很消耗空间， 并且通常比数字类型慢。</p>\n<p>对于完全 “随机” 的字符串也需要多加注意， 例如 MDS() 、 SHAl() 或者 UUID() 产生的字符串。 这些函数生成的新值会任意分布在很大的空间内， 这会导致 INSERT 以及一些SELECT语句变得很慢。如果存储 UUID 值， 则应该移除 “-“符号。</p>\n<h4>5.2特殊类型数据</h4>\n<p>某些类型的数据井不直接与内置类型一致。 低千秒级精度的时间戳就是一个例子，另一个例子是以个1Pv4地址，人们经常使用VARCHAR(15)列来存储IP地址，然而， 它们实际上是32位无符号整数， 不是字符串。用小数点将地址分成四段的表示方法只是为了让人们阅读容易。所以应该用无符号整数存储IP地址。MySQL提供INET_ATON()和INET_NTOA()函数在这两种表示方法之间转换。</p>\n<h2>二、表结构设计</h2>\n<h3>1.范式和反范式</h3>\n<p>对于任何给定的数据通常都有很多种表示方法， 从完全的范式化到完全的反范式化， 以及两者的折中。 在范式化的数据库中， 每个事实数据会出现并且只出现一次。 相反， 在反范式化的数据库中， 信息是冗余的， 可能会存储在多个地方。</p>\n<h4>范式的优点和缺点</h4>\n<p>为性能提升考虑时，经常会被建议对 schema 进行范式化设计，尤其是写密集的场景。</p>\n<ul>\n<li>范式化的更新操作通常比反范式化要快。</li>\n<li>当数据较好地范式化时，就只有很少或者没有重复数据，所以只需要修改更少的数据。</li>\n<li>范式化的表通常更小，可以更好地放在内存里，所以执行操作会更快。</li>\n<li>很少有多余的数据意味着检索列表数据时更少需要 DISTINCT 或者 GROUP BY语句。</li>\n</ul>\n<h4>反范式的优点和缺点</h4>\n<p>不需要关联表，则对大部分查询最差的情况——即使表没有使用索引——是全表扫描。 当数据比内存大时这可能比关联要快得多，因为这样避免了随机I/0。</p>\n<p>单独的表也能使用更有效的索引策略。</p>\n<h4>混用范式化和反范式化</h4>\n<p>在实际应用中经常需要混用，可能使用部分范式化的 schema 、 缓存表，以及其他技巧。<br>\n表适当增加冗余字段，如性能优先，但会增加复杂度。可避免表关联查询。</p>\n<h4>简单熟悉数据库范式</h4>\n</div>\n</div>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baefe92272b590668570\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n第一范式(1NF)：字段值具有原子性,不能再分(所有关系型数据库系统都满足第一范式);\r\n 例如：姓名字段,其中姓和名是一个整体,如果区分姓和名那么必须设立两个独立字段;\r\n \r\n第二范式(2NF)：一个表必须有主键,即每行数据都能被唯一的区分;\r\n 备注：必须先满足第一范式;\r\n \r\n第三范式(3NF)：一个表中不能包涵其他相关表中非关键字段的信息,即数据表不能有沉余字段;\r\n 备注：必须先满足第二范式;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baefe92272b590668570-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baefe92272b590668570-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baefe92272b590668570-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baefe92272b590668570-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59baefe92272b590668570-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baefe92272b590668570-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59baefe92272b590668570-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baefe92272b590668570-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baefe92272b590668570-1\">第一范式<span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1NF</span><span class=\"crayon-sy\">)</span>：字段值具有原子性<span class=\"crayon-sy\">,</span>不能再分<span class=\"crayon-sy\">(</span>所有关系型数据库系统都满足第一范式<span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baefe92272b590668570-2\"><span class=\"crayon-h\"> </span>例如：姓名字段<span class=\"crayon-sy\">,</span>其中姓和名是一个整体<span class=\"crayon-sy\">,</span>如果区分姓和名那么必须设立两个独立字段<span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59baefe92272b590668570-3\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baefe92272b590668570-4\">第二范式<span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2NF</span><span class=\"crayon-sy\">)</span>：一个表必须有主键<span class=\"crayon-sy\">,</span>即每行数据都能被唯一的区分<span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59baefe92272b590668570-5\"><span class=\"crayon-h\"> </span>备注：必须先满足第一范式<span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baefe92272b590668570-6\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59baefe92272b590668570-7\">第三范式<span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3NF</span><span class=\"crayon-sy\">)</span>：一个表中不能包涵其他相关表中非关键字段的信息<span class=\"crayon-sy\">,</span>即数据表不能有沉余字段<span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baefe92272b590668570-8\"><span class=\"crayon-h\"> </span>备注：必须先满足第二范式<span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p></p>\n<div>\n<div>\n<h3>2.表字段少⽽精</h3>\n<ul>\n<li>I/O高效</li>\n<li>字段分开维护简单</li>\n<li>单表1G体积 500W⾏行评估</li>\n<li>单⾏行不超过200Byte</li>\n<li>单表不超过50个INT字段</li>\n<li>单表不超过20个CHAR(10)字段</li>\n<li>建议单表字段数控制在20个以内</li>\n<li>拆分TEXT/BLOB，TEXT类型处理性能远低于VARCHAR，强制生成硬盘临时表浪费更多空间。</li>\n</ul>\n<h4>参考资料：</h4>\n<p>高性能mysql第三版</p>\n</div>\n</div>\n<hr>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112035\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112035votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112035\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 7 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 7, "create_date": "2017-09-15"},{"front_image_path": "full/eadb28355fab57e9672e5c965147ef4caca04ac4.jpg", "url_object_id": "edadb3aea0db398bd4790e74f9295bb1", "praise_nums": "6", "title": "27 个机器学习、数学、Python 速查表", "tags": "工具与资源,Python,数学,机器学习", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/04/ff247977ac3e5237654ad324e8c880ed.jpg"], "url": "http://blog.jobbole.com/112009/", "comment_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/shaozhengjiang\">iPytLab</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://unsupervisedmethods.com/cheat-sheet-of-machine-learning-and-python-and-math-cheat-sheets-a4afe4e791b6\">Robbie Allen</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>机器学习涉及到的方面非常多。当我开始准备复习这些内容的时候，我找到了许多不同的”速查表”, 这些速查表针对某一主题都罗列出了所有我需要知道的知识重点。最终我编译了超过 20 份机器学习相关的速查表，其中一些是我经常用到的而且我相信其他人也会从中受益。本文整理了我在网络上找到的 27 个速查表，我认为比较好。如果我有遗漏，欢迎补充。</p>\n<p>如今机器学习领域的发展相当迅速，我可以想象出来这些资源将会很快过时，但是至少在当前，在2017年6月1日，他们都是相当流行的。</p>\n<p>如果你们像我一样想要一次性批量下载所有资源，我已经将 27 个速查表整理打包（<a href=\"https://www.dropbox.com/s/v3yg8djhdf24g6v/UnsupervisedMethods.com%20-%20Cheat%20Sheets.zip?dl=0\" target=\"_blank\">Dropbox</a>、<a href=\"https://pan.baidu.com/s/1mi0viGS\" target=\"_blank\">百度云</a>）好了，请尽情享用吧！</p>\n<p>如果你喜欢本文，记得给我在下面点个 zan 哦。</p>\n<h2 id=\"机器学习\">机器学习\n</h2><p>这里我从一些和机器学习算法相关的流程图和表格中选择了我认为最全面的几个并在下面罗列出来。</p>\n<h3 id=\"Neural-Network-Architectures\">Neural Network Architectures\n</h3><p>链接: <a href=\"http://www.asimovinstitute.org/neural-network-zoo/\" target=\"_blank\" rel=\"external\">http://www.asimovinstitute.org/neural-network-zoo/</a><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/NN.png\" alt=\"\"></p>\n<p> </p>\n<p style=\"text-align: center;\"><em>The Neural Network Zoo</em></p>\n<h3 id=\"Microsoft-Azure-Algorithm-Flowchart\">Microsoft Azure Algorithm Flowchart\n</h3><p>链接: <a href=\"https://docs.microsoft.com/en-us/azure/machine-learning/machine-learning-algorithm-cheat-sheet\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://docs.microsoft.com/en-us/azure/machine-learning/machine-learning-algorithm-cheat-sheet</span></a></p>\n<p><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/MS.png\" alt=\"\"></p>\n<p style=\"text-align: center;\"><em>Machine learning algorithm cheat sheet for Microsoft Azure Machine Learning Studio</em></p>\n<h3 id=\"SAS-Algorithm-Flowchart\">SAS Algorithm Flowchart\n</h3><p>链接: <a href=\"http://blogs.sas.com/content/subconsciousmusings/2017/04/12/machine-learning-algorithm-use/\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">http://blogs.sas.com/content/subconsciousmusings/2017/04/12/machine-learning-algorithm-use/</span></a></p>\n<p><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/SAS.png\" alt=\"\"></p>\n<p style=\"text-align: center;\"><em>SAS: Which machine learning algorithm should I use?</em></p>\n<h3 id=\"Algorithm-Summary\">Algorithm Summary\n</h3><p>链接: <a href=\"http://machinelearningmastery.com/a-tour-of-machine-learning-algorithms/\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">http://machinelearningmastery.com/a-tour-of-machine-learning-algorithms/</span></a></p>\n<p><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/AS.png\" alt=\"\"></p>\n<p style=\"text-align: center;\"><em>A Tour of Machine Learning Algorithms</em></p>\n<p style=\"text-align: center;\"><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/best.jpeg\" rel=\"gallery0\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/best.jpeg\" alt=\"\"></a><br>\n<em>Which are the best known machine learning algorithms?</em></p>\n<h3 id=\"Algorithm-Pro-Con\">Algorithm Pro/Con\n</h3><p>链接: <a href=\"https://blog.dataiku.com/machine-learning-explained-algorithms-are-your-friend\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://blog.dataiku.com/machine-learning-explained-algorithms-are-your-friend</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/CON.jpeg\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/CON.jpeg\" alt=\"\"></span></a></p>\n<h2 id=\"Python\">Python\n</h2><p>网上在线的Python资源可以说是相当的多。在这一部分，我挑选了我遇到的几个最好的速查表呈献给大家。</p>\n<h3 id=\"ML算法\">ML算法\n</h3><p>链接: <a href=\"https://www.analyticsvidhya.com/blog/2015/09/full-cheatsheet-machine-learning-algorithms/\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://www.analyticsvidhya.com/blog/2015/09/full-cheatsheet-machine-learning-algorithms/</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/PYALGO.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/PYALGO.png\" alt=\"\"></span></a></p>\n<h3 id=\"Python基础\">Python基础\n</h3><p>链接: <a href=\"http://datasciencefree.com/python.pdf\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">http://datasciencefree.com/python.pdf</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/PYBASIC.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/PYBASIC.png\" alt=\"\"></span></a></p>\n<p>链接: <a href=\"https://www.datacamp.com/community/tutorials/python-data-science-cheat-sheet-basics#gs.0x1rxEA\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://www.datacamp.com/community/tutorials/python-data-science-cheat-sheet-basics#gs.0x1rxEA</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/PYBASIC2.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/PYBASIC2.png\" alt=\"\"></span></a></p>\n<h3 id=\"Numpy\">Numpy\n</h3><p>链接: <a href=\"https://www.dataquest.io/blog/numpy-cheat-sheet/\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://www.dataquest.io/blog/numpy-cheat-sheet/</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/NUMPY.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/NUMPY.png\" alt=\"\"></span></a></p>\n<p>链接: <a href=\"http://datasciencefree.com/numpy.pdf\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">http://datasciencefree.com/numpy.pdf</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/numpy-pdf.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/numpy-pdf.png\" alt=\"\"></span></a></p>\n<p>链接: <a href=\"https://www.datacamp.com/community/blog/python-numpy-cheat-sheet#gs.Nw3V6CE\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://www.datacamp.com/community/blog/python-numpy-cheat-sheet#gs.Nw3V6CE</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/numpy3.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/numpy3.png\" alt=\"\"></span></a></p>\n<p>链接: <a href=\"https://github.com/donnemartin/data-science-ipython-notebooks/blob/master/numpy/numpy.ipynb\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://github.com/donnemartin/data-science-ipython-notebooks/blob/master/numpy/numpy.ipynb</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/numpy4.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/numpy4.png\" alt=\"\"></span></a></p>\n<h3 id=\"Pandas\">Pandas\n</h3><p>链接: <a href=\"http://datasciencefree.com/pandas.pdf\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">http://datasciencefree.com/pandas.pdf</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/pandas.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/pandas.png\" alt=\"\"></span></a></p>\n<p>链接: <a href=\"https://www.datacamp.com/community/blog/python-pandas-cheat-sheet#gs.S4P4T=U\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://www.datacamp.com/community/blog/python-pandas-cheat-sheet#gs.S4P4T=U</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/pandas2.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/pandas2.png\" alt=\"\"></span></a></p>\n<p>链接: <a href=\"https://github.com/donnemartin/data-science-ipython-notebooks/blob/master/pandas/pandas.ipynb\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://github.com/donnemartin/data-science-ipython-notebooks/blob/master/pandas/pandas.ipynb</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/pandas3.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/pandas3.png\" alt=\"\"></span></a></p>\n<h3 id=\"Matplotlib\">Matplotlib\n</h3><p>链接: <a href=\"https://www.datacamp.com/community/blog/python-matplotlib-cheat-sheet\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://www.datacamp.com/community/blog/python-matplotlib-cheat-sheet</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/matplotlib.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/matplotlib.png\" alt=\"\"></span></a></p>\n<p>链接: <a href=\"https://github.com/donnemartin/data-science-ipython-notebooks/blob/master/matplotlib/matplotlib.ipynb\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://github.com/donnemartin/data-science-ipython-notebooks/blob/master/matplotlib/matplotlib.ipynb</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/matplotlib2.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/matplotlib2.png\" alt=\"\"></span></a></p>\n<h3 id=\"Scikit-Learn\">Scikit Learn\n</h3><p>链接: <a href=\"https://www.datacamp.com/community/blog/scikit-learn-cheat-sheet#gs.fZ2A1Jk\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://www.datacamp.com/community/blog/scikit-learn-cheat-sheet#gs.fZ2A1Jk</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/skl.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/skl.png\" alt=\"\"></span></a></p>\n<p>链接: <a href=\"http://peekaboo-vision.blogspot.de/2013/01/machine-learning-cheat-sheet-for-scikit.html\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">http://peekaboo-vision.blogspot.de/2013/01/machine-learning-cheat-sheet-for-scikit.html</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/skl2.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/skl2.png\" alt=\"\"></span></a></p>\n<p>链接: <a href=\"https://github.com/rcompton/ml_cheat_sheet/blob/master/supervised_learning.ipynb\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://github.com/rcompton/ml_cheat_sheet/blob/master/supervised_learning.ipynb</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/skl3.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/skl3.png\" alt=\"\"></span></a></p>\n<h3 id=\"Tensorflow\">Tensorflow\n</h3><p>链接: <a href=\"https://github.com/aymericdamien/TensorFlow-Examples/blob/master/notebooks/1_Introduction/basic_operations.ipynb\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://github.com/aymericdamien/TensorFlow-Examples/blob/master/notebooks/1_Introduction/basic_operations.ipynb</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/tf.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/tf.png\" alt=\"\"></span></a></p>\n<h3 id=\"Pytorch\">Pytorch\n</h3><p>链接: <a href=\"https://github.com/bfortuner/pytorch-cheatsheet\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://github.com/bfortuner/pytorch-cheatsheet</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/torch.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/torch.png\" alt=\"\"></span></a></p>\n<h2 id=\"数学\">数学\n</h2><p>如果你想真正的理解机器学习，你需要有扎实的统计学(尤其是概率论), 线性代数以及微积分基础。我在上大学的时候辅修了数学专业，但是我肯定还是需要对这些数学知识进行复习。如果你想理解常用机器学习算法背后的数学原理，那么下面的这些速查表将会是你需要的。</p>\n<h3 id=\"概率论\">概率论\n</h3><p>链接: <a href=\"http://www.wzchen.com/s/probability_cheatsheet.pdf\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">http://www.wzchen.com/s/probability_cheatsheet.pdf</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/prob.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/prob.png\" alt=\"\"></span></a></p>\n<h3 id=\"线性代数\">线性代数\n</h3><p>链接: <a href=\"https://minireference.com/static/tutorials/linear_algebra_in_4_pages.pdf\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">https://minireference.com/static/tutorials/linear_algebra_in_4_pages.pdf</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/la.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/la.png\" alt=\"\"></span></a></p>\n<h3 id=\"统计学\">统计学\n</h3><p>链接: <a href=\"http://web.mit.edu/~csvoss/Public/usabo/stats_handout.pdf\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">http://web.mit.edu/~csvoss/Public/usabo/stats_handout.pdf</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/stat.png\" rel=\"gallery0\"><span style=\"color: #0066cc;\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/stat.png\" alt=\"\"></span></a></p>\n<h3 id=\"微积分\">微积分\n</h3><p>链接: <a href=\"http://tutorial.math.lamar.edu/getfile.aspx?file=B,41,N\" target=\"_blank\" rel=\"external\"><span style=\"color: #0066cc;\">http://tutorial.math.lamar.edu/getfile.aspx?file=B,41,N</span></a></p>\n<p><a class=\"fancybox\" href=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/calculus.png\" rel=\"gallery0\"><img src=\"http://pytlab.org/assets/images/blog_img/2017-07-25-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Python-%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E9%80%9F%E6%9F%A5%E8%A1%A8/calculus.png\" alt=\"\"></a></p>\n<p>打包下载：<a href=\"https://www.dropbox.com/s/v3yg8djhdf24g6v/UnsupervisedMethods.com%20-%20Cheat%20Sheets.zip?dl=0\" target=\"_blank\">Dropbox</a>、<a href=\"https://pan.baidu.com/s/1mi0viGS\" target=\"_blank\">百度云</a></p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/05/c3d3aeee3e50259c10c3524201fc68db.jpg\">\n            \n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112009\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112009votetotal\">6</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112009\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 27 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/shaozhengjiang\">iPytLab</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/shaozhengjiang\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/d3f741a9dd5c4194b365e95b06a56c09.jpeg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            喜欢写程序的计算化学狗，Python/C/C++/Fortran, 个人博客 http://pytlab.org        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/shaozhengjiang\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/shaozhengjiang/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/shaozhengjiang/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 15</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://pytlab.org\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/shaowugui\"><i class=\"fa fa-weibo\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/PytLab\"><i class=\"fa fa-github\"></i></a> <a title=\"Stack Overflow主页\" target=\"_blank\" href=\"http://stackoverflow.com/users/4014840/pytlab\"><i class=\"fa fa-stack-overflow\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 7, "create_date": "2017-09-15"},{"front_image_path": "full/35011d6168be00e949624c665041dc724e3ad786.jpg", "url_object_id": "292ef81058f5bce6e38e7bbd0bae9103", "praise_nums": "2", "title": "MySQL 死锁与日志二三事", "tags": "IT技术,MySQL,数据库", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/11/e78e36715813f49e9e62fe0c6050075c.png"], "url": "http://blog.jobbole.com/112054/", "comment_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://my.oschina.net/leejun2005/blog/1484511\">xrzs</a>   </div><p>最近线上 MySQL 接连发生了几起数据异常，都是在凌晨爆发，由于业务场景属于典型的数据仓库型应用，白天压力较小无法复现。甚至有些异常还比较诡异，最后 root cause 分析颇费周折。那实际业务当中咱们如何能快速的定位线上 MySQL 问题，修复异常呢？下文我会根据两个实际 case，分享下相关的经验与方法。</p>\n<h3>1、Case1：部分数据更新失败</h3>\n<p>某天渠道同学反馈某报表极个别渠道数据为 0，大部分渠道数据正常。这个数据是由一个统计程序每天凌晨例行更新的，按理来说，要么全部正常，要么全部失败，那会是什么原因导致极个别数据异常呢？</p>\n<p>首先我们能想到的自然是根据统计任务日志来看了，但是看了统计程序打印的日志没有发现诸如 SQL update 失败的异常描述，那当时的数据库究竟发生了什么呢？在查看 MySQL-server 日志之前，习惯性的看了下数据库状态：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baf01a122e0438765750\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSHOW ENGINE INNODB STATUS\\G</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baf01a122e0438765750-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baf01a122e0438765750-1\"><span class=\"crayon-e\">SHOW </span><span class=\"crayon-e\">ENGINE </span><span class=\"crayon-e\">INNODB </span><span class=\"crayon-v\">STATUS</span><span class=\"crayon-sy\">\\</span><span class=\"crayon-v\">G</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>恰好看到了凌晨这个 update 发生了死锁：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baf01a122e9456716111\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n------------------------\r\nLATEST DETECTED DEADLOCK\r\n------------------------\r\n2017-07-17 04:09:01 0x7f6de03c8700\r\n*** (1) TRANSACTION:\r\nTRANSACTION 215208479, ACTIVE 0 sec fetching rows\r\nmysql tables in use 3, locked 3\r\nLOCK WAIT 5 lock struct(s), heap size 1136, 3 row lock(s)\r\nMySQL thread id 27844824, OS thread handle 140092183037696, query id 412503674 10.126.95.84 zeye Searching rows for update\r\nupdate t_channel_final_datas set nr_register=133,nr_add_goods=29,nr_order_normal=11,nr_pay_normal=8,nr_order_special=0,nr_pay_special=0,n_add_user_num=16 where count_date='2017-07-16' and channel_id='16' and channel_type='10' and terminal='26'\r\n*** (1) WAITING FOR THIS LOCK TO BE GRANTED:\r\nRECORD LOCKS space id 464 page no 5459 n bits 392 index index_countdate_type_terminal of table `db_zz_flow`.`t_channel_final_datas` trx id 215208479 lock_mode X locks rec but not gap waiting\r\nRecord lock, heap no 304 PHYSICAL RECORD: n_fields 4; compact format; info bits 0\r\n 0: len 10; hex 323031372d30372d3136; asc 2017-07-16;;\r\n 1: len 1; hex 30; asc 0;;\r\n 2: len 4; hex 80000010; asc     ;;\r\n 3: len 4; hex 8009055e; asc    ^;;\r\n\r\n*** (2) TRANSACTION:\r\nTRANSACTION 215208474, ACTIVE 0 sec fetching rows\r\nmysql tables in use 3, locked 3\r\n6 lock struct(s), heap size 1136, 7 row lock(s)\r\nMySQL thread id 27844825, OS thread handle 140109890225920, query id 412503669 10.135.6.41 zeye Searching rows for update\r\nupdate t_channel_final_datas set nr_register=24,nr_add_goods=32,nr_order_normal=0,nr_pay_normal=0,nr_order_special=0,nr_pay_special=0,n_add_user_num=11 where count_date='2017-07-16' and channel_id='114' and channel_type='10' and terminal='116'\r\n*** (2) HOLDS THE LOCK(S):\r\nRECORD LOCKS space id 464 page no 5459 n bits 392 index index_countdate_type_terminal of table `db_zz_flow`.`t_channel_final_datas` trx id 215208474 lock_mode X locks rec but not gap\r\nRecord lock, heap no 304 PHYSICAL RECORD: n_fields 4; compact format; info bits 0\r\n 0: len 10; hex 323031372d30372d3136; asc 2017-07-16;;\r\n 1: len 1; hex 30; asc 0;;\r\n 2: len 4; hex 80000010; asc     ;;\r\n 3: len 4; hex 8009055e; asc    ^;;\r\n\r\n...\r\n\r\n*** (2) WAITING FOR THIS LOCK TO BE GRANTED:\r\nRECORD LOCKS space id 464 page no 4743 n bits 264 index PRIMARY of table `db_zz_flow`.`t_channel_final_datas` trx id 215208474 lock_mode X locks rec but not gap waiting\r\nRecord lock, heap no 168 PHYSICAL RECORD: n_fields 32; compact format; info bits 0\r\n 0: len 4; hex 80090569; asc    i;;\r\n 1: len 6; hex 00000cd3b9d0; asc       ;;\r\n...\r\n\r\n*** WE ROLL BACK TRANSACTION (1)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baf01a122e9456716111-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122e9456716111-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122e9456716111-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122e9456716111-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122e9456716111-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122e9456716111-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122e9456716111-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122e9456716111-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122e9456716111-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122e9456716111-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122e9456716111-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122e9456716111-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122e9456716111-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122e9456716111-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122e9456716111-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122e9456716111-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122e9456716111-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122e9456716111-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122e9456716111-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122e9456716111-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122e9456716111-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122e9456716111-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122e9456716111-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122e9456716111-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122e9456716111-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122e9456716111-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122e9456716111-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122e9456716111-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122e9456716111-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122e9456716111-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122e9456716111-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122e9456716111-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122e9456716111-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122e9456716111-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122e9456716111-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122e9456716111-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122e9456716111-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122e9456716111-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122e9456716111-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122e9456716111-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122e9456716111-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122e9456716111-42\">42</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baf01a122e9456716111-1\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122e9456716111-2\"><span class=\"crayon-e\">LATEST </span><span class=\"crayon-e\">DETECTED </span><span class=\"crayon-v\">DEADLOCK</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122e9456716111-3\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122e9456716111-4\"><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">07</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">04</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">09</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">01</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x7f6de03c8700</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122e9456716111-5\"><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TRANSACTION</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122e9456716111-6\"><span class=\"crayon-i\">TRANSACTION</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">215208479</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ACTIVE</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sec </span><span class=\"crayon-e\">fetching </span><span class=\"crayon-e\">rows</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122e9456716111-7\"><span class=\"crayon-e\">mysql </span><span class=\"crayon-e\">tables </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">use</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">locked</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122e9456716111-8\"><span class=\"crayon-e\">LOCK </span><span class=\"crayon-i\">WAIT</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">lock </span><span class=\"crayon-t\">struct</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">heap </span><span class=\"crayon-i\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1136</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">row </span><span class=\"crayon-e\">lock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122e9456716111-9\"><span class=\"crayon-e\">MySQL </span><span class=\"crayon-e\">thread </span><span class=\"crayon-i\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">27844824</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">OS </span><span class=\"crayon-e\">thread </span><span class=\"crayon-i\">handle</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">140092183037696</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">query </span><span class=\"crayon-i\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">412503674</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.126.95.84</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">zeye </span><span class=\"crayon-e\">Searching </span><span class=\"crayon-e\">rows </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">update</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122e9456716111-10\"><span class=\"crayon-e\">update </span><span class=\"crayon-e\">t_channel_final_datas </span><span class=\"crayon-e\">set </span><span class=\"crayon-v\">nr_register</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">133</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">nr_add_goods</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">29</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">nr_order_normal</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">nr_pay_normal</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">nr_order_special</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">nr_pay_special</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">n_add_user_num</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">16</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">where </span><span class=\"crayon-v\">count_date</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'2017-07-16'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">channel_id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'16'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">channel_type</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'10'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">terminal</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'26'</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122e9456716111-11\"><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WAITING </span><span class=\"crayon-st\">FOR</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">THIS</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LOCK </span><span class=\"crayon-st\">TO</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BE </span><span class=\"crayon-v\">GRANTED</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122e9456716111-12\"><span class=\"crayon-e\">RECORD </span><span class=\"crayon-e\">LOCKS </span><span class=\"crayon-e\">space </span><span class=\"crayon-i\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">464</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">page </span><span class=\"crayon-i\">no</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5459</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">bits</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">392</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">index </span><span class=\"crayon-e\">index_countdate_type_terminal </span><span class=\"crayon-e\">of </span><span class=\"crayon-i\">table</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">db_zz_flow</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">t_channel_final_datas</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">trx </span><span class=\"crayon-i\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">215208479</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lock</span><span class=\"crayon-sy\">_</span>mode<span class=\"crayon-h\"> </span><span class=\"crayon-i\">X</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">locks </span><span class=\"crayon-e\">rec </span><span class=\"crayon-e\">but </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">gap </span><span class=\"crayon-e\">waiting</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122e9456716111-13\"><span class=\"crayon-e\">Record </span><span class=\"crayon-v\">lock</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">heap </span><span class=\"crayon-i\">no</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">304</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PHYSICAL </span><span class=\"crayon-v\">RECORD</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">_</span>fields<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">compact </span><span class=\"crayon-v\">format</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">info </span><span class=\"crayon-i\">bits</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122e9456716111-14\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">len</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">hex</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">323031372d30372d3136</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">asc</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">07</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122e9456716111-15\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">len</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">hex</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">asc</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122e9456716111-16\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">len</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">hex</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">80000010</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">asc</span><span class=\"crayon-h\">     </span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122e9456716111-17\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">len</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">hex</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8009055e</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">asc</span><span class=\"crayon-h\">    </span><span class=\"crayon-o\">^</span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122e9456716111-18\"> </div><div class=\"crayon-line\" id=\"crayon-59baf01a122e9456716111-19\"><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TRANSACTION</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122e9456716111-20\"><span class=\"crayon-i\">TRANSACTION</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">215208474</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ACTIVE</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sec </span><span class=\"crayon-e\">fetching </span><span class=\"crayon-e\">rows</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122e9456716111-21\"><span class=\"crayon-e\">mysql </span><span class=\"crayon-e\">tables </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">use</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">locked</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122e9456716111-22\"><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">lock </span><span class=\"crayon-t\">struct</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">heap </span><span class=\"crayon-i\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1136</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">row </span><span class=\"crayon-e\">lock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122e9456716111-23\"><span class=\"crayon-e\">MySQL </span><span class=\"crayon-e\">thread </span><span class=\"crayon-i\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">27844825</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">OS </span><span class=\"crayon-e\">thread </span><span class=\"crayon-i\">handle</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">140109890225920</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">query </span><span class=\"crayon-i\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">412503669</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.135.6.41</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">zeye </span><span class=\"crayon-e\">Searching </span><span class=\"crayon-e\">rows </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">update</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122e9456716111-24\"><span class=\"crayon-e\">update </span><span class=\"crayon-e\">t_channel_final_datas </span><span class=\"crayon-e\">set </span><span class=\"crayon-v\">nr_register</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">24</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">nr_add_goods</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">32</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">nr_order_normal</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">nr_pay_normal</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">nr_order_special</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">nr_pay_special</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">n_add_user_num</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">where </span><span class=\"crayon-v\">count_date</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'2017-07-16'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">channel_id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'114'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">channel_type</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'10'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">terminal</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'116'</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122e9456716111-25\"><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">HOLDS </span><span class=\"crayon-e\">THE </span><span class=\"crayon-e\">LOCK</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">S</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122e9456716111-26\"><span class=\"crayon-e\">RECORD </span><span class=\"crayon-e\">LOCKS </span><span class=\"crayon-e\">space </span><span class=\"crayon-i\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">464</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">page </span><span class=\"crayon-i\">no</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5459</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">bits</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">392</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">index </span><span class=\"crayon-e\">index_countdate_type_terminal </span><span class=\"crayon-e\">of </span><span class=\"crayon-i\">table</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">db_zz_flow</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">t_channel_final_datas</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">trx </span><span class=\"crayon-i\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">215208474</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lock</span><span class=\"crayon-sy\">_</span>mode<span class=\"crayon-h\"> </span><span class=\"crayon-i\">X</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">locks </span><span class=\"crayon-e\">rec </span><span class=\"crayon-e\">but </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">gap</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122e9456716111-27\"><span class=\"crayon-e\">Record </span><span class=\"crayon-v\">lock</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">heap </span><span class=\"crayon-i\">no</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">304</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PHYSICAL </span><span class=\"crayon-v\">RECORD</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">_</span>fields<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">compact </span><span class=\"crayon-v\">format</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">info </span><span class=\"crayon-i\">bits</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122e9456716111-28\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">len</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">hex</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">323031372d30372d3136</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">asc</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">07</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122e9456716111-29\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">len</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">hex</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">asc</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122e9456716111-30\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">len</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">hex</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">80000010</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">asc</span><span class=\"crayon-h\">     </span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122e9456716111-31\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">len</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">hex</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8009055e</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">asc</span><span class=\"crayon-h\">    </span><span class=\"crayon-o\">^</span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122e9456716111-32\"> </div><div class=\"crayon-line\" id=\"crayon-59baf01a122e9456716111-33\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122e9456716111-34\"> </div><div class=\"crayon-line\" id=\"crayon-59baf01a122e9456716111-35\"><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WAITING </span><span class=\"crayon-st\">FOR</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">THIS</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LOCK </span><span class=\"crayon-st\">TO</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BE </span><span class=\"crayon-v\">GRANTED</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122e9456716111-36\"><span class=\"crayon-e\">RECORD </span><span class=\"crayon-e\">LOCKS </span><span class=\"crayon-e\">space </span><span class=\"crayon-i\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">464</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">page </span><span class=\"crayon-i\">no</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4743</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">bits</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">264</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">index </span><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-e\">of </span><span class=\"crayon-i\">table</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">db_zz_flow</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">t_channel_final_datas</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">trx </span><span class=\"crayon-i\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">215208474</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lock</span><span class=\"crayon-sy\">_</span>mode<span class=\"crayon-h\"> </span><span class=\"crayon-i\">X</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">locks </span><span class=\"crayon-e\">rec </span><span class=\"crayon-e\">but </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">gap </span><span class=\"crayon-e\">waiting</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122e9456716111-37\"><span class=\"crayon-e\">Record </span><span class=\"crayon-v\">lock</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">heap </span><span class=\"crayon-i\">no</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">168</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PHYSICAL </span><span class=\"crayon-v\">RECORD</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">_</span>fields<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">32</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">compact </span><span class=\"crayon-v\">format</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">info </span><span class=\"crayon-i\">bits</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122e9456716111-38\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">len</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">hex</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">80090569</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">asc</span><span class=\"crayon-h\">    </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122e9456716111-39\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">len</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">hex</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00000cd3b9d0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">asc</span><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122e9456716111-40\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122e9456716111-41\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122e9456716111-42\"><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WE </span><span class=\"crayon-e\">ROLL </span><span class=\"crayon-e\">BACK </span><span class=\"crayon-e\">TRANSACTION</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0152 seconds] -->\r\n<p>篇幅所限，上下文我这里省略了很多，从这段日志里可以看到，TRANSACTION 1 和 TRANSACTION 2 分别持有一定数量的行锁，然后又等待对方的锁，最后 MySQL 检测到 deadlock ，然后选择回滚了 TRANSACTION 1：Innodb目前处理死锁的方法是将持有最少行级排他锁的事务进行回滚。</p>\n<p>那这里就有 3 个问题了：</p>\n<h4>（1）innodb 行锁不是只锁一行？</h4>\n<p>因为这张表是 innodb 引擎的，InnoDB 支持行锁和表锁。而InnoDB行锁是通过给索引上的索引项加锁来实现的，这一点MySQL与Oracle不同，后者是通过在数据块中对相应数据行加锁来实现的。InnoDB这种行锁实现特点意味着：只有通过索引条件检索数据，InnoDB才使用行级锁，否则，InnoDB将使用表锁，会把所有扫描过的行都锁定！在实际应用中，要特别注意InnoDB行锁的这一特性，不然的话，可能导致大量的锁冲突，从而影响并发性能。由于MySQL的行锁是针对索引加的锁，不是针对记录加的锁，所以虽然是访问不同行的记录，但是如果是使用相同的索引键，是会出现锁冲突的。当我们用范围条件而不是相等条件检索数据，并请求共享或排他锁时，InnoDB会给符合条件的已有数据记录的索引项加锁；另外间隙锁也会锁多行，InnoDB除了通过范围条件加锁时使用间隙锁外，如果使用相等条件请求给一个不存在的记录加锁，InnoDB也会使用间隙锁！</p>\n<p>话都说到这了，那就看下咱们业务表的索引情况：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baf01a122f0801943402\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nshow INDEX from `db_zz_flow`.`t_channel_final_datas`;\r\n+-----------------------+--------------+-------------------------------+----------------+-------------+----------+--------+--------------+-----------+-----------------+\r\n| Table | Non_unique | Key_name | Seq_in_index | Column_namt | Packed | Null | Index_type | Comment | Index_comment |\r\n|-----------------------+--------------+-------------------------------+----------------+-------------+----------+--------+--------------+-----------+-----------------|\r\n| t_channel_final_datas | 0 | PRIMARY | 1 | id &gt; | &lt;null&gt; | | BTREE | | |\r\n| t_channel_final_datas | 1 | index_countdate_type_terminal | 1 | count_date&gt; | &lt;null&gt; | YES | BTREE | | |\r\n| t_channel_final_datas | 1 | index_countdate_type_terminal | 2 | channel_ty&gt; | &lt;null&gt; | YES | BTREE | | |\r\n| t_channel_final_datas | 1 | index_countdate_type_terminal | 3 | terminal &gt; | &lt;null&gt; | YES | BTREE | | |\r\n| t_channel_final_datas | 1 | index_countdate_channelid | 1 | count_date&gt; | &lt;null&gt; | YES | BTREE | | |\r\n| t_channel_final_datas | 1 | index_countdate_channelid | 2 | channel_id&gt; | &lt;null&gt; | YES | BTREE | | |\r\n+-----------------------+--------------+-------------------------------+----------------+-------------+----------+--------+--------------+-----------+-----------------+</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baf01a122f0801943402-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122f0801943402-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122f0801943402-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122f0801943402-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122f0801943402-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122f0801943402-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122f0801943402-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122f0801943402-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122f0801943402-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122f0801943402-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122f0801943402-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baf01a122f0801943402-1\"><span class=\"crayon-e\">show </span><span class=\"crayon-e\">INDEX </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">db_zz_flow</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">t_channel_final_datas</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122f0801943402-2\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122f0801943402-3\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Table</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Non_unique</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Key_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Seq_in_index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Column_namt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Packed</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Null</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Index_type</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Comment</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Index_comment</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122f0801943402-4\"><span class=\"crayon-o\">|</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122f0801943402-5\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t_channel_final_datas</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PRIMARY</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">null</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BTREE</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122f0801943402-6\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t_channel_final_datas</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index_countdate_type_terminal</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">count_date</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">null</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">YES</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BTREE</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122f0801943402-7\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t_channel_final_datas</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index_countdate_type_terminal</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">channel_ty</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">null</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">YES</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BTREE</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122f0801943402-8\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t_channel_final_datas</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index_countdate_type_terminal</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">terminal</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">null</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">YES</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BTREE</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122f0801943402-9\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t_channel_final_datas</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index_countdate_channelid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">count_date</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">null</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">YES</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BTREE</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122f0801943402-10\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t_channel_final_datas</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index_countdate_channelid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">channel_id</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">null</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">YES</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BTREE</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122f0801943402-11\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0098 seconds] -->\r\n<p>可以看到这张表的索引极不合理：有3个索引，但是 update 却没有完全的用上索引，导致 update 没有精确的用上索引，需要锁定多行范围数据，从而引发死锁。</p>\n<p>知道原理后，咱们再精心构建一个四字段的组合索引即可让 update 精准的走 innodb 索引，实际上，我们更新索引后，这个死锁问题即得到了解决。<br>\n注：innodb不仅会打印出事务和事务持有和等待的锁，而且还有记录本身，不幸的是，它可能超过innodb为输出结果预留的长度（只能打印1M的内容且只能保留最近一次的死锁信息），如果你无法看到完整的输出，此时可以在任意库下创建innodb_monitor或innodb_lock_monitor表，这样innodb status信息会完整且每15s一次被记录到错误日志中。如：create table innodb_monitor(a int)engine=innodb;，不需要记录到错误日志中时就删掉这个表即可。</p>\n<h4>（2）回滚的话，为什么只有部分 update 语句失败，而不是整个事务里的所有 update 都失败？</h4>\n<p>这是因为咱们的 innodb 默认是自动提交的：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baf01a122f4135786619\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nshow variables like 'autocommit';\r\n+-----------------+---------+\r\n| Variable_name   | Value   |\r\n|-----------------+---------|\r\n| autocommit      | ON      |\r\n+-----------------+---------+\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baf01a122f4135786619-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122f4135786619-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122f4135786619-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122f4135786619-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122f4135786619-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122f4135786619-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122f4135786619-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baf01a122f4135786619-1\"><span class=\"crayon-e\">show </span><span class=\"crayon-e\">variables </span><span class=\"crayon-i\">like</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'autocommit'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122f4135786619-2\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122f4135786619-3\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\">   </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Value</span><span class=\"crayon-h\">   </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122f4135786619-4\"><span class=\"crayon-o\">|</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122f4135786619-5\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">autocommit</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ON</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122f4135786619-6\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122f4135786619-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>在多个 update 或 insert 语句情况下，每执行完一条 SQL，innodb 就立即 commit 一次以持久化变更，同时释放锁，这也正是本例中死锁回滚事务后只有极个别语句失败的原因。</p>\n<p>需要注意的是，通常还有另外一种情况也可能导致部分语句回滚，需要格外留意。在 innodb 里有个参数叫：innodb_rollback_on_timeout</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baf01a122f8478325095\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nshow VARIABLES LIKE 'innodb_rollback_on_timeout'\r\n+----------------------------+---------+\r\n| Variable_name              | Value   |\r\n|----------------------------+---------|\r\n| innodb_rollback_on_timeout | OFF     |\r\n+----------------------------+---------+\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baf01a122f8478325095-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122f8478325095-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122f8478325095-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122f8478325095-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122f8478325095-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122f8478325095-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122f8478325095-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baf01a122f8478325095-1\"><span class=\"crayon-e\">show </span><span class=\"crayon-e\">VARIABLES </span><span class=\"crayon-i\">LIKE</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'innodb_rollback_on_timeout'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122f8478325095-2\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122f8478325095-3\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\">              </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Value</span><span class=\"crayon-h\">   </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122f8478325095-4\"><span class=\"crayon-o\">|</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122f8478325095-5\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">innodb_rollback_on_timeout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">OFF</span><span class=\"crayon-h\">     </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122f8478325095-6\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122f8478325095-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>官方手册里这样描述：</p>\n<blockquote><p>In MySQL 5.1, InnoDB rolls back only the last statement on a transaction timeout by default. If –innodb_rollback_on_timeout is specified, a transaction timeout causes InnoDB to abort and roll back the entire transaction (the same behavior as in MySQL 4.1). This variable was added in MySQL 5.1.15.</p></blockquote>\n<p>解释：这个参数关闭或不存在的话遇到超时只回滚事务最后一个Query，打开的话事务遇到超时就回滚整个事务。</p>\n<h3>（3）怎样降低 innodb 死锁几率？</h3>\n<p>死锁在行锁及事务场景下很难完全消除，但可以通过表设计和SQL调整等措施减少锁冲突和死锁，包括：</p>\n<ul>\n<li>尽量使用较低的隔离级别，比如如果发生了间隙锁，你可以把会话或者事务的事务隔离级别更改为 RC(read committed)级别来避免，但此时需要把 binlog_format 设置成 row 或者 mixed 格式</li>\n<li>精心设计索引，并尽量使用索引访问数据，使加锁更精确，从而减少锁冲突的机会；</li>\n<li>选择合理的事务大小，小事务发生锁冲突的几率也更小；</li>\n<li>给记录集显示加锁时，最好一次性请求足够级别的锁。比如要修改数据的话，最好直接申请排他锁，而不是先申请共享锁，修改时再请求排他锁，这样容易产生死锁；</li>\n<li>不同的程序访问一组表时，应尽量约定以相同的顺序访问各表，对一个表而言，尽可能以固定的顺序存取表中的行。这样可以大大减少死锁的机会；</li>\n<li>尽量用相等条件访问数据，这样可以避免间隙锁对并发插入的影响；</li>\n<li>不要申请超过实际需要的锁级别；除非必须，查询时不要显示加锁；</li>\n<li>对于一些特定的事务，可以使用表锁来提高处理速度或减少死锁的可能。</li>\n</ul>\n<h3>2、Case2：诡异的 Lock wait timeout</h3>\n<p>连续几天凌晨6点和早上8点 都分别有一个任务失败，load data local infile 的时候报 Lock wait timeout exceeded try restarting transaction innodb 的 Java SQL 异常，和平台的同学沟通得知，这是我们自己的业务数据库的 Lock 时间太短或者锁冲突的问题。但是回头一想不应该啊？这不一直好好的吗？而且基本都是单表单任务，不存在多人冲突。</p>\n<p>甭管谁的问题，那咱们还是先看自己的数据库有没有问题：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baf01a122fd006703725\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nshow variables like 'innodb_lock_wait_timeout';\r\n+--------------------------+---------+\r\n| Variable_name            |   Value |\r\n|--------------------------+---------|\r\n| innodb_lock_wait_timeout |      50 |\r\n+--------------------------+---------+\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baf01a122fd006703725-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122fd006703725-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122fd006703725-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122fd006703725-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122fd006703725-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a122fd006703725-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a122fd006703725-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baf01a122fd006703725-1\"><span class=\"crayon-e\">show </span><span class=\"crayon-e\">variables </span><span class=\"crayon-i\">like</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'innodb_lock_wait_timeout'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122fd006703725-2\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122fd006703725-3\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\">            </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">   </span><span class=\"crayon-v\">Value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122fd006703725-4\"><span class=\"crayon-o\">|</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122fd006703725-5\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">innodb_lock_wait_timeout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">50</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a122fd006703725-6\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a122fd006703725-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p>默认 lock 超时时间 50s，这个时间真心不短了，估计调了也没用，事实上确实死马当活马医的试了下没用。。。</p>\n<p>而且这次 SHOW ENGINE INNODB STATUSG 也没出现任何死锁信息，然后又将目光转向 MySQL-server 日志，希望能从日志里看一看那个时刻前后数据究竟在做什么操作。这里先简单的介绍下MySQL日志文件系统的组成：</p>\n<p>(a) error 日志：记录启动、运行或停止 mysqld 时出现的问题，默认开启。<br>\n(b) general 日志：通用查询日志，记录所有语句和指令，开启数据库会有 5% 左右性能损失。<br>\n(c) binlog 日志：二进制格式，记录所有更改数据的语句，主要用于 slave 复制和数据恢复。<br>\n(d) slow 日志：记录所有执行时间超过 long_query_time 秒的查询或不使用索引的查询，默认关闭。<br>\n(e) Innodb日志：innodb redo log、undo log，用于恢复数据和撤销操作。</p>\n<p>从上面的介绍可以看到，目前这个问题的日志可能在 d 和 b 中，看了下 d 中没有，那就只能开启 b 了，但 b 对数据库的性能有一定损耗，由于是全量日志，量非常巨大，所以开启一定要谨慎：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baf01a12301292420134\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n-- general_log 日志默认关闭，开启会影响数据库 5% 左右性能：\r\nshow variables like 'general%';\r\n+------------------+---------------------------------+\r\n| Variable_name    | Value                           |\r\n|------------------+---------------------------------|\r\n| general_log      | OFF                             |\r\n| general_log_file | /opt/data/mysql/tjtx-103-26.log |\r\n+------------------+---------------------------------+\r\n\r\n-- 全局 session 级别开启：\r\nset global general_log=1\r\n\r\n-- 如果需要对当前 session 生效需要：\r\nset general_log=1\r\n\r\n-- set 指令设置的动态参数在 MySQL 重启后失效，如果需要永久生效需要在 /etc/my.cnf 中配置静态变量/参数。\r\n-- 如果不知道 my.cnf 位置，可以根据 mysql -? | grep \".cnf\" 查询\r\n                      order of preference, my.cnf, $MYSQL_TCP_PORT,\r\n/etc/my.cnf /etc/mysql/my.cnf /usr/etc/my.cnf ~/.my.cnf</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baf01a12301292420134-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12301292420134-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12301292420134-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12301292420134-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12301292420134-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12301292420134-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12301292420134-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12301292420134-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12301292420134-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12301292420134-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12301292420134-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12301292420134-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12301292420134-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12301292420134-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12301292420134-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12301292420134-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12301292420134-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12301292420134-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12301292420134-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baf01a12301292420134-1\"><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">general</span><span class=\"crayon-sy\">_</span>log<span class=\"crayon-h\"> </span>日志默认关闭，开启会影响数据库<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span>左右性能：</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12301292420134-2\"><span class=\"crayon-e\">show </span><span class=\"crayon-e\">variables </span><span class=\"crayon-i\">like</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'general%'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12301292420134-3\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12301292420134-4\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\">    </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Value</span><span class=\"crayon-h\">                           </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12301292420134-5\"><span class=\"crayon-o\">|</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12301292420134-6\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">general_log</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">OFF</span><span class=\"crayon-h\">                             </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12301292420134-7\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">general_log_file</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">opt</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tjtx</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">103</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">26.log</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12301292420134-8\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12301292420134-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12301292420134-10\"><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span>全局<span class=\"crayon-h\"> </span><span class=\"crayon-i\">session</span><span class=\"crayon-h\"> </span>级别开启：</div><div class=\"crayon-line\" id=\"crayon-59baf01a12301292420134-11\"><span class=\"crayon-e\">set </span><span class=\"crayon-m\">global</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">general_log</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12301292420134-12\"> </div><div class=\"crayon-line\" id=\"crayon-59baf01a12301292420134-13\"><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span>如果需要对当前<span class=\"crayon-h\"> </span><span class=\"crayon-i\">session</span><span class=\"crayon-h\"> </span>生效需要：</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12301292420134-14\"><span class=\"crayon-e\">set </span><span class=\"crayon-v\">general_log</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12301292420134-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12301292420134-16\"><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">set</span><span class=\"crayon-h\"> </span>指令设置的动态参数在<span class=\"crayon-h\"> </span><span class=\"crayon-i\">MySQL</span><span class=\"crayon-h\"> </span>重启后失效，如果需要永久生效需要在<span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">my</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">cnf</span><span class=\"crayon-h\"> </span>中配置静态变量<span class=\"crayon-o\">/</span>参数。</div><div class=\"crayon-line\" id=\"crayon-59baf01a12301292420134-17\"><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span>如果不知道<span class=\"crayon-h\"> </span><span class=\"crayon-v\">my</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">cnf</span><span class=\"crayon-h\"> </span>位置，可以根据<span class=\"crayon-h\"> </span><span class=\"crayon-v\">mysql</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\".cnf\"</span><span class=\"crayon-h\"> </span>查询</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12301292420134-18\"><span class=\"crayon-h\">                      </span><span class=\"crayon-e\">order </span><span class=\"crayon-e\">of </span><span class=\"crayon-v\">preference</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">my</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cnf</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">MYSQL_TCP_PORT</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12301292420134-19\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">my</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cnf</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">my</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cnf</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">my</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cnf</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">my</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cnf</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0052 seconds] -->\r\n<p>我这里只是每天在出问题的前后半小时开启下全量日志，结果没有发现任何 MySQL-client 请求到我们的业务数据库！该日志格式如下，记录了所有的连接与命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baf01a12305861663623\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/usr/sbin/mysqld, Version: 5.7.12-log (MySQL Community Server (GPL)). started with:\r\nTcp port: 3306  Unix socket: /opt/data/mysql/mysql.sock\r\nTime                 Id Command    Argument\r\n2017-07-20T21:45:01.880828Z28556028 Quit\r\n2017-07-20T21:45:02.708621Z28401469 Query       SELECT 1\r\n2017-07-20T21:45:02.736734Z28556029 Connect     ooxx@127.0.0.1 on db_zz_system using TCP/IP\r\n2017-07-20T21:45:02.737242Z28556029 Query       /* mysql-connector-java-5.1.6 ( Revision: ${svn.Revision} ) */SHOW VARIABLES WHERE Variable_name ='language' OR Variable_name = 'net_write_timeout' OR Variable_name = 'interactive_timeout' OR Variable_name = 'wait_timeout' OR Variable_name = 'character_set_client' OR Variable_name = 'character_set_connection' OR Variable_name = 'character_set' OR Variable_name = 'character_set_server' OR Variable_name = 'tx_isolation' OR Variable_name = 'transaction_isolation' OR Variable_name = 'character_set_results' OR Variable_name = 'timezone' OR Variable_name = 'time_zone' OR Variable_name = 'system_time_zone' OR Variable_name = 'lower_case_table_names' OR Variable_name = 'max_allowed_packet' OR Variable_name = 'net_buffer_length' OR Variable_name = 'sql_mode' OR Variable_name = 'query_cache_type' OR Variable_name = 'query_cache_size' OR Variable_name = 'init_connect'\r\n2017-07-20T21:45:02.738868Z28556029 Query       SHOW COLLATION\r\n2017-07-20T21:45:02.739941Z28556029 Query       SET character_set_results = NULL\r\n2017-07-20T21:45:02.740275Z28556029 Query       SET autocommit=1</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baf01a12305861663623-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12305861663623-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12305861663623-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12305861663623-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12305861663623-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12305861663623-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12305861663623-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12305861663623-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12305861663623-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12305861663623-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baf01a12305861663623-1\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sbin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">mysqld</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Version</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.7.12</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">log</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">MySQL </span><span class=\"crayon-e\">Community </span><span class=\"crayon-e\">Server</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">GPL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">started </span><span class=\"crayon-v\">with</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12305861663623-2\"><span class=\"crayon-e\">Tcp </span><span class=\"crayon-v\">port</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3306</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">Unix </span><span class=\"crayon-v\">socket</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">opt</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sock</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12305861663623-3\"><span class=\"crayon-e\">Time                 </span><span class=\"crayon-e\">Id </span><span class=\"crayon-e\">Command    </span><span class=\"crayon-i\">Argument</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12305861663623-4\"><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">07</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">20T21</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">01.880828Z28556028</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Quit</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12305861663623-5\"><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">07</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">20T21</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">02.708621Z28401469</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Query       </span><span class=\"crayon-i\">SELECT</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12305861663623-6\"><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">07</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">20T21</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">02.736734Z28556029</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Connect     </span><span class=\"crayon-v\">ooxx</span><span class=\"crayon-sy\">@</span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">on </span><span class=\"crayon-e\">db_zz_system </span><span class=\"crayon-e\">using </span><span class=\"crayon-v\">TCP</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">IP</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12305861663623-7\"><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">07</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">20T21</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">02.737242Z28556029</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Query</span><span class=\"crayon-h\">       </span><span class=\"crayon-c\">/* mysql-connector-java-5.1.6 ( Revision: ${svn.Revision} ) */</span><span class=\"crayon-e\">SHOW </span><span class=\"crayon-e\">VARIABLES </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'language'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">OR</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'net_write_timeout'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">OR</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'interactive_timeout'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">OR</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'wait_timeout'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">OR</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'character_set_client'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">OR</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'character_set_connection'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">OR</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'character_set'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">OR</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'character_set_server'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">OR</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'tx_isolation'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">OR</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'transaction_isolation'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">OR</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'character_set_results'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">OR</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'timezone'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">OR</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'time_zone'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">OR</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'system_time_zone'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">OR</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'lower_case_table_names'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">OR</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'max_allowed_packet'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">OR</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'net_buffer_length'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">OR</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'sql_mode'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">OR</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'query_cache_type'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">OR</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'query_cache_size'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">OR</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'init_connect'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12305861663623-8\"><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">07</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">20T21</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">02.738868Z28556029</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Query       </span><span class=\"crayon-e\">SHOW </span><span class=\"crayon-i\">COLLATION</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12305861663623-9\"><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">07</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">20T21</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">02.739941Z28556029</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Query       </span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">character_set_results</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12305861663623-10\"><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">07</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">20T21</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">02.740275Z28556029</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Query       </span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">autocommit</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0063 seconds] -->\r\n<p>那问题基本确定了，客户端请求都没到我们这边就抛出了上述的异常，和平台方再三沟通确认下，最后平台方查证是因为在执行插入前他们需要先从 SQL task 表取出 SQL 和更新 task 状态，结果这张表由于在整点存在大量 insert 和 update 并发，导致部分 SQL 等待 lock 超时了。。。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/d29579706b846656c946e30891c2c075.jpg\" alt=\"\" width=\"280\" height=\"200\"></p>\n<h3>3、MySQL 日志分析脚本</h3>\n<p>由于凌晨是数据仓库的业务高峰，很多问题都是在这个时候爆发，一些诡异的问题往往是过了这个村就没这个店了，白天无法复现。如何能捕获我们关心的日志，便于快速的定位问题，这个是重中之重，这里我写了个小脚本，crontab 部署，可以选择时间范围开启，每分钟采样一次日志，需要说明的是 general log 没事别轻易开启，否则对数据库性能损耗较大。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59baf01a12309325477897\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# crontab 部署方式：\r\n# */1 0-10 * * * cd /opt/ooxx/script &amp;&amp; bash mysql_perf.sh &gt;&gt; logs/mysql_perf.log.`date -I` 2&gt;&amp;1\r\n\r\ndate -Iseconds\r\n\r\necho '&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; top -bn1|head'\r\ntop -bn1|head \r\necho\r\n\r\necho '&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; SHOW ENGINE INNODB STATUS\\G '\r\nmysql -uroot -pooxx -h127.0.0.1 -e 'SHOW ENGINE INNODB STATUS\\G'\r\necho\r\n\r\necho '&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; show open tables where in_use&gt;0;'\r\nmysql -uroot -pooxx -h127.0.0.1 -e 'show open tables where in_use&gt;0;'\r\necho\r\n\r\necho '&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; show full processlist;'\r\nmysql -uroot -pooxx -h127.0.0.1 -e 'show full processlist;'\r\necho\r\n\r\necho '&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; SELECT * FROM `information_schema`.`innodb_trx` ORDER BY `trx_started`; '\r\nmysql -uroot -pooxx -h127.0.0.1 -e 'SELECT * FROM `information_schema`.`innodb_trx` ORDER BY `trx_started`;' \r\necho\r\n\r\necho '&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; SELECT * FROM `information_schema`.`innodb_locks`;'\r\nmysql -uroot -pooxx -h127.0.0.1 -e 'SELECT * FROM `information_schema`.`innodb_locks`;'\r\necho\r\n\r\necho \"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; show status like '%lock%';\"\r\nmysql -uroot -pooxx -h127.0.0.1 -e \"show status like '%lock%';\"\r\necho\r\n\r\necho '&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; show global status like \"table_locks%\";'\r\nmysql -uroot -pooxx -h127.0.0.1 -e 'show global status like \"table_locks%\";'\r\necho\r\n\r\necho \"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; too long omit...\"\r\nmysql -uroot -pooxx -h127.0.0.1 -e \"select r.trx_isolation_level, r.trx_id waiting_trx_id, r.trx_mysql_thread_id waiting_trx_thread, r.trx_state waiting_trx_state, lr.lock_mode waiting_trx_lock_mode, lr.lock_type waiting_trx_lock_type, lr.lock_table waiting_trx_lock_table, lr.lock_index waiting_trx_lock_index, r.trx_query waiting_trx_query, b.trx_id blocking_trx_id, b.trx_mysql_thread_id blocking_trx_thread, b.trx_state blocking_trx_state, lb.lock_mode blocking_trx_lock_mode, lb.lock_type blocking_trx_lock_type, lb.lock_table blocking_trx_lock_table, lb.lock_index blocking_trx_lock_index, b.trx_query blocking_query from information_schema.innodb_lock_waits w inner join information_schema.innodb_trx b on b.trx_id=w.blocking_trx_id inner join information_schema.innodb_trx r on r.trx_id=w.requesting_trx_id inner join information_schema.innodb_locks lb on lb.lock_trx_id=w.blocking_trx_id inner join information_schema.innodb_locks lr on lr.lock_trx_id=w.requesting_trx_id\\G\"\r\necho\r\n\r\necho \"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; too long omit...\"\r\nmysql -uroot -pooxx -h127.0.0.1 -e \"SELECT r.trx_id waiting_trx_id, r.trx_mysql_thread_id waiting_thread, r.trx_query waiting_query, b.trx_id blocking_trx_id, b.trx_mysql_thread_id blocking_thread, b.trx_query blocking_query FROM information_schema.innodb_lock_waits w INNER JOIN information_schema.innodb_trx b ON b.trx_id = w.blocking_trx_id INNER JOIN information_schema.innodb_trx r ON r.trx_id = w.requesting_trx_id\\G\"\r\necho\r\n\r\n\r\ndate -Iseconds\r\necho '&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;=================================================================================='\r\necho\r\n\r\nfile_name=mysql_perf.log.`date -I`\r\nif [[ `date +%-H%-M` == 1059 ]]\r\nthen\r\n cd /opt/ooxx/script/logs\r\n chmod 777 /home/work/ooxx/$file_name\r\n find /home/work/ooxx -name 'mysql_perf.log.*' -mtime +7 -delete\r\n \r\n cd /opt/data/mysql\r\n cp tjtx-ooxx-slow.log /home/work/ooxx/tjtx-ooxx-slow.log.`date -I`\r\n chmod 777 /home/work/ooxx/tjtx-ooxx-slow.log.`date -I`\r\n find /home/work/ooxx -name 'tjtx-ooxx-slow.log.*' -mtime +7 -delete\r\n \r\n cp mysqld.log /home/work/ooxx/mysqld.log.`date -I`\r\n chmod 777 /home/work/ooxx/mysqld.log.`date -I`\r\n find /home/work/ooxx -name 'mysqld.log.*' -mtime +7 -delete\r\nfi\r\n\r\n\r\n################\r\n# 开启 general_log 全量明细日志会降低数据库 5% 性能\r\n#if [[ \"`date +%H%M`\" == \"0545\" ]]\r\n#then\r\n# echo \"`date +%H%M` ------- set global general_log=1;\"\r\n# mysql -uroot -pooxx -h127.0.0.1 -e 'set global general_log=1;'\r\n#elif [[ \"`date +%H%M`\" == \"0630\" ]]\r\n#then\r\n# echo \"`date +%H%M` ------- set global general_log=0;\"\r\n# mysql -uroot -pooxx -h127.0.0.1 -e 'set global general_log=0;'\r\n#elif [[ \"`date +%H%M`\" == \"0745\" ]]\r\n#then\r\n# echo \"`date +%H%M` ------- set global general_log=1;\"\r\n# mysql -uroot -pooxx -h127.0.0.1 -e 'set global general_log=1;'\r\n#elif [[ \"`date +%H%M`\" == \"0830\" ]]\r\n#then\r\n# echo \"`date +%H%M` ------- set global general_log=0;\"\r\n# mysql -uroot -pooxx -h127.0.0.1 -e 'set global general_log=0;'\r\n#elif [[ \"`date +%H%M`\" == \"0001\" ]]\r\n#then\r\n# echo \"`date +%H%M` ------- set global general_log=1;\"\r\n# mysql -uroot -pooxx -h127.0.0.1 -e 'set global general_log=1;'\r\n#elif [[ \"`date +%H%M`\" == \"0002\" ]]\r\n#then\r\n# echo \"`date +%H%M` ------- set global general_log=0;\"\r\n# mysql -uroot -pooxx -h127.0.0.1 -e 'set global general_log=0;'\r\n#fi\r\n\r\n\r\n\r\n\r\n\r\n#[[ 10#`date +%H%M` -lt 10#0550 || 10#`date +%H%M` -gt 10#0830 ]] &amp;&amp; echo \"`date +%H%M` ------- set global general_log=0;\" &amp;&amp; mysql -uroot -pooxx -h127.0.0.1 -e 'set global general_log=0;'\r\n\r\n\r\n# mysql -uroot -pooxx -h127.0.0.1 -e 'show open tables where in_use&gt;0;show full processlist;SELECT * FROM `information_schema`.`innodb_trx` ORDER BY `trx_started`;SELECT * FROM `information_schema`.`innodb_locks`;SHOW ENGINE INNODB STATUS\\G'\r\n\r\n# --show variables like '%tx_isolation%';\r\n# --SELECT @@GLOBAL.tx_isolation, @@tx_isolation, @@session.tx_isolation;\r\n# -- SET GLOBAL tx_isolation = 'READ-COMMITTED';\r\n# \r\n# --show variables like '%timeout%';\r\n# --show variables like 'innodb_lock_wait_timeout';\r\n# -- SET GLOBAL innodb_lock_wait_timeout=60\r\n# \r\n# --show variables like 'long_query_time';\r\n# -- SET global long_query_time=3;\r\n\r\n\r\n# -- show variables like 'innodb_rollback_on_timeout';\r\n\r\n# -- show VARIABLES like '%max_allowed_packet%';\r\n# -- set global max_allowed_packet = 100*1024*1024;\r\n\r\n# 自动提交\r\n# -- show variables like 'autocommit';\r\n\r\n# 慢查询\r\n# -- show variables like '%slow_query_log%';\r\n# set global 只对当前数据库生效，如果MySQL重启后则会失效。如果要永久生效，就必须修改配置文件my.cnf（其它系统变量也是如此）。\r\n# set global slow_query_log=1;\r\n# -- show variables like 'long_query_time%';\r\n# set global long_query_time=4;\r\n# show global variables like 'long_query_time'; \r\n# select sleep(5);\r\n# -- show variables like 'log_queries_not_using_indexes';\r\n# set global log_queries_not_using_indexes=1;\r\n# -- show variables like 'log_slow_admin_statements';\r\n# -- show global status like '%Slow_queries%';\r\n# http://www.cnblogs.com/kerrycode/p/5593204.html\r\n\r\n\r\n\r\n# -- show variables like \"%time_zone%\";\r\n#set global time_zone = '+8:00';\r\n\r\n#开启general_log日志\r\n# -- show variables like 'general%';\r\n#可以在my.cnf里添加,1开启（0关闭）,当然了,这样要重启才能生效,有点多余了\r\n#general-log = 1\r\n#log = /log/mysql_query.log路径\r\n#也可以设置变量那样更改,1开启（0关闭）,即时生效,不用重启,首选当然是这样的了\r\n# set global general_log=1\r\n#这个日志对于操作频繁的库,产生的数据量会很快增长,出于对硬盘的保护,可以设置其他存放路径\r\n#set global general_log_file=/tmp/general_log.log\r\n\r\n#mysql记录客户端IP：init_connect，有super权限的用户是不记录的，\r\n# create table t1 ( cur_user varchar(100), n_user varchar(100),in_time timestamp default current_timestamp()) ;\r\n# set global init_connect='insert into test.t1 (cur_user,n_user) values (current_user(),user())'; \r\n# SHOW CREATE TABLE mysql.general_log\\G ，开启general_log日志也行：\r\n# https://dba.stackexchange.com/questions/33654/mysql-logging-activity-from-specific-user-or-ip \r\n#SELECT REVERSE(SUBSTRING_INDEX(REVERSE(USER()),'@',1)) as ip;\r\n#SELECT SUBSTRING(USER(), LOCATE('@', USER())+1) as ip;\r\n#select SUBSTRING_INDEX(host,':',1) as 'ip' from information_schema.processlist WHERE ID=connection_id();</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-70\">70</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-71\">71</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-72\">72</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-73\">73</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-74\">74</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-75\">75</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-76\">76</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-77\">77</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-78\">78</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-79\">79</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-80\">80</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-81\">81</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-82\">82</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-83\">83</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-84\">84</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-85\">85</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-86\">86</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-87\">87</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-88\">88</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-89\">89</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-90\">90</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-91\">91</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-92\">92</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-93\">93</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-94\">94</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-95\">95</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-96\">96</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-97\">97</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-98\">98</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-99\">99</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-100\">100</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-101\">101</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-102\">102</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-103\">103</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-104\">104</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-105\">105</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-106\">106</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-107\">107</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-108\">108</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-109\">109</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-110\">110</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-111\">111</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-112\">112</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-113\">113</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-114\">114</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-115\">115</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-116\">116</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-117\">117</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-118\">118</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-119\">119</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-120\">120</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-121\">121</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-122\">122</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-123\">123</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-124\">124</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-125\">125</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-126\">126</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-127\">127</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-128\">128</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-129\">129</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-130\">130</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-131\">131</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-132\">132</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-133\">133</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-134\">134</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-135\">135</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-136\">136</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-137\">137</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-138\">138</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-139\">139</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-140\">140</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-141\">141</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-142\">142</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-143\">143</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-144\">144</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-145\">145</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-146\">146</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-147\">147</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-148\">148</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-149\">149</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-150\">150</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-151\">151</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-152\">152</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-153\">153</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-154\">154</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-155\">155</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-156\">156</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-157\">157</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-158\">158</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-159\">159</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-160\">160</div><div class=\"crayon-num\" data-line=\"crayon-59baf01a12309325477897-161\">161</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59baf01a12309325477897-162\">162</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-1\"><span class=\"crayon-p\"># crontab 部署方式：</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-2\"><span class=\"crayon-p\"># */1 0-10 * * * cd /opt/ooxx/script &amp;&amp; bash mysql_perf.sh &gt;&gt; logs/mysql_perf.log.`date -I` 2&gt;&amp;1</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-4\"><span class=\"crayon-v\">date</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">Iseconds</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-6\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; top -bn1|head'</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-7\"><span class=\"crayon-v\">top</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bn1</span><span class=\"crayon-o\">|</span><span class=\"crayon-e\">head </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-8\"><span class=\"crayon-e\">echo</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-10\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; SHOW ENGINE INNODB STATUS\\G '</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-11\"><span class=\"crayon-v\">mysql</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">uroot</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">pooxx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">h127</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">0.0.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'SHOW ENGINE INNODB STATUS\\G'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-12\"><span class=\"crayon-e\">echo</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-14\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; show open tables where in_use&gt;0;'</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-15\"><span class=\"crayon-v\">mysql</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">uroot</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">pooxx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">h127</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">0.0.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'show open tables where in_use&gt;0;'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-16\"><span class=\"crayon-e\">echo</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-18\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; show full processlist;'</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-19\"><span class=\"crayon-v\">mysql</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">uroot</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">pooxx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">h127</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">0.0.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'show full processlist;'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-20\"><span class=\"crayon-e\">echo</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-22\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; SELECT * FROM `information_schema`.`innodb_trx` ORDER BY `trx_started`; '</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-23\"><span class=\"crayon-v\">mysql</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">uroot</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">pooxx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">h127</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">0.0.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'SELECT * FROM `information_schema`.`innodb_trx` ORDER BY `trx_started`;'</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-24\"><span class=\"crayon-e\">echo</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-25\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-26\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; SELECT * FROM `information_schema`.`innodb_locks`;'</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-27\"><span class=\"crayon-v\">mysql</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">uroot</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">pooxx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">h127</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">0.0.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'SELECT * FROM `information_schema`.`innodb_locks`;'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-28\"><span class=\"crayon-e\">echo</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-29\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-30\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; show status like '%lock%';\"</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-31\"><span class=\"crayon-v\">mysql</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">uroot</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">pooxx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">h127</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">0.0.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"show status like '%lock%';\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-32\"><span class=\"crayon-e\">echo</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-33\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-34\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; show global status like \"table_locks%\";'</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-35\"><span class=\"crayon-v\">mysql</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">uroot</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">pooxx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">h127</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">0.0.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'show global status like \"table_locks%\";'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-36\"><span class=\"crayon-e\">echo</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-37\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-38\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; too long omit...\"</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-39\"><span class=\"crayon-v\">mysql</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">uroot</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">pooxx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">h127</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">0.0.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"select r.trx_isolation_level, r.trx_id waiting_trx_id, r.trx_mysql_thread_id waiting_trx_thread, r.trx_state waiting_trx_state, lr.lock_mode waiting_trx_lock_mode, lr.lock_type waiting_trx_lock_type, lr.lock_table waiting_trx_lock_table, lr.lock_index waiting_trx_lock_index, r.trx_query waiting_trx_query, b.trx_id blocking_trx_id, b.trx_mysql_thread_id blocking_trx_thread, b.trx_state blocking_trx_state, lb.lock_mode blocking_trx_lock_mode, lb.lock_type blocking_trx_lock_type, lb.lock_table blocking_trx_lock_table, lb.lock_index blocking_trx_lock_index, b.trx_query blocking_query from information_schema.innodb_lock_waits w inner join information_schema.innodb_trx b on b.trx_id=w.blocking_trx_id inner join information_schema.innodb_trx r on r.trx_id=w.requesting_trx_id inner join information_schema.innodb_locks lb on lb.lock_trx_id=w.blocking_trx_id inner join information_schema.innodb_locks lr on lr.lock_trx_id=w.requesting_trx_id\\G\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-40\"><span class=\"crayon-e\">echo</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-41\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-42\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; too long omit...\"</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-43\"><span class=\"crayon-v\">mysql</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">uroot</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">pooxx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">h127</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">0.0.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"SELECT r.trx_id waiting_trx_id, r.trx_mysql_thread_id waiting_thread, r.trx_query waiting_query, b.trx_id blocking_trx_id, b.trx_mysql_thread_id blocking_thread, b.trx_query blocking_query FROM information_schema.innodb_lock_waits w INNER JOIN information_schema.innodb_trx b ON b.trx_id = w.blocking_trx_id INNER JOIN information_schema.innodb_trx r ON r.trx_id = w.requesting_trx_id\\G\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-44\"><span class=\"crayon-e\">echo</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-45\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-46\"> </div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-47\"><span class=\"crayon-v\">date</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">Iseconds</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-48\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;=================================================================================='</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-49\"><span class=\"crayon-e\">echo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-50\"> </div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-51\"><span class=\"crayon-v\">file_name</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">mysql_perf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">log</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">date</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">I</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-52\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">date</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">%</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">H</span><span class=\"crayon-o\">%</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">M</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1059</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-53\"><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-54\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">opt</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ooxx</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">script</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">logs</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-55\"><span class=\"crayon-e\"> </span><span class=\"crayon-i\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">777</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">work</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ooxx</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">$</span><span class=\"crayon-e\">file_name</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-56\"><span class=\"crayon-e\"> </span><span class=\"crayon-v\">find</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">work</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ooxx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'mysql_perf.log.*'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mtime</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">7</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">delete</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-57\"><span class=\"crayon-e\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-58\"><span class=\"crayon-e\"> </span><span class=\"crayon-v\">cd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">opt</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">mysql</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-59\"><span class=\"crayon-e\"> </span><span class=\"crayon-e\">cp </span><span class=\"crayon-v\">tjtx</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ooxx</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">slow</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">log</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">work</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ooxx</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tjtx</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ooxx</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">slow</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">log</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">date</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">I</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-60\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">777</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">work</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ooxx</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tjtx</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ooxx</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">slow</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">log</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">date</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">I</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-61\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">find</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">work</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ooxx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'tjtx-ooxx-slow.log.*'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mtime</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">7</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">delete</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-62\"><span class=\"crayon-e\"> </span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-63\"><span class=\"crayon-e\"> </span><span class=\"crayon-e\">cp </span><span class=\"crayon-v\">mysqld</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">log</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">work</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ooxx</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">mysqld</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">log</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">date</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">I</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-64\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">777</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">work</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ooxx</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">mysqld</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">log</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">date</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">I</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-65\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">find</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">work</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ooxx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'mysqld.log.*'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mtime</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">7</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">delete</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-66\"><span class=\"crayon-v\">fi</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-67\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-68\"> </div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-69\"><span class=\"crayon-p\">################</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-70\"><span class=\"crayon-p\"># 开启 general_log 全量明细日志会降低数据库 5% 性能</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-71\"><span class=\"crayon-p\">#if [[ \"`date +%H%M`\" == \"0545\" ]]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-72\"><span class=\"crayon-p\">#then</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-73\"><span class=\"crayon-p\"># echo \"`date +%H%M` ------- set global general_log=1;\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-74\"><span class=\"crayon-p\"># mysql -uroot -pooxx -h127.0.0.1 -e 'set global general_log=1;'</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-75\"><span class=\"crayon-p\">#elif [[ \"`date +%H%M`\" == \"0630\" ]]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-76\"><span class=\"crayon-p\">#then</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-77\"><span class=\"crayon-p\"># echo \"`date +%H%M` ------- set global general_log=0;\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-78\"><span class=\"crayon-p\"># mysql -uroot -pooxx -h127.0.0.1 -e 'set global general_log=0;'</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-79\"><span class=\"crayon-p\">#elif [[ \"`date +%H%M`\" == \"0745\" ]]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-80\"><span class=\"crayon-p\">#then</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-81\"><span class=\"crayon-p\"># echo \"`date +%H%M` ------- set global general_log=1;\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-82\"><span class=\"crayon-p\"># mysql -uroot -pooxx -h127.0.0.1 -e 'set global general_log=1;'</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-83\"><span class=\"crayon-p\">#elif [[ \"`date +%H%M`\" == \"0830\" ]]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-84\"><span class=\"crayon-p\">#then</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-85\"><span class=\"crayon-p\"># echo \"`date +%H%M` ------- set global general_log=0;\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-86\"><span class=\"crayon-p\"># mysql -uroot -pooxx -h127.0.0.1 -e 'set global general_log=0;'</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-87\"><span class=\"crayon-p\">#elif [[ \"`date +%H%M`\" == \"0001\" ]]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-88\"><span class=\"crayon-p\">#then</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-89\"><span class=\"crayon-p\"># echo \"`date +%H%M` ------- set global general_log=1;\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-90\"><span class=\"crayon-p\"># mysql -uroot -pooxx -h127.0.0.1 -e 'set global general_log=1;'</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-91\"><span class=\"crayon-p\">#elif [[ \"`date +%H%M`\" == \"0002\" ]]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-92\"><span class=\"crayon-p\">#then</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-93\"><span class=\"crayon-p\"># echo \"`date +%H%M` ------- set global general_log=0;\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-94\"><span class=\"crayon-p\"># mysql -uroot -pooxx -h127.0.0.1 -e 'set global general_log=0;'</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-95\"><span class=\"crayon-p\">#fi</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-96\"> </div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-97\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-98\"> </div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-99\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-100\"> </div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-101\"><span class=\"crayon-p\">#[[ 10#`date +%H%M` -lt 10#0550 || 10#`date +%H%M` -gt 10#0830 ]] &amp;&amp; echo \"`date +%H%M` ------- set global general_log=0;\" &amp;&amp; mysql -uroot -pooxx -h127.0.0.1 -e 'set global general_log=0;'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-102\"> </div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-103\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-104\"><span class=\"crayon-p\"># mysql -uroot -pooxx -h127.0.0.1 -e 'show open tables where in_use&gt;0;show full processlist;SELECT * FROM `information_schema`.`innodb_trx` ORDER BY `trx_started`;SELECT * FROM `information_schema`.`innodb_locks`;SHOW ENGINE INNODB STATUS\\G'</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-105\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-106\"><span class=\"crayon-p\"># --show variables like '%tx_isolation%';</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-107\"><span class=\"crayon-p\"># --SELECT @@GLOBAL.tx_isolation, @@tx_isolation, @@session.tx_isolation;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-108\"><span class=\"crayon-p\"># -- SET GLOBAL tx_isolation = 'READ-COMMITTED';</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-109\"><span class=\"crayon-p\"># </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-110\"><span class=\"crayon-p\"># --show variables like '%timeout%';</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-111\"><span class=\"crayon-p\"># --show variables like 'innodb_lock_wait_timeout';</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-112\"><span class=\"crayon-p\"># -- SET GLOBAL innodb_lock_wait_timeout=60</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-113\"><span class=\"crayon-p\"># </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-114\"><span class=\"crayon-p\"># --show variables like 'long_query_time';</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-115\"><span class=\"crayon-p\"># -- SET global long_query_time=3;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-116\"> </div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-117\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-118\"><span class=\"crayon-p\"># -- show variables like 'innodb_rollback_on_timeout';</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-119\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-120\"><span class=\"crayon-p\"># -- show VARIABLES like '%max_allowed_packet%';</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-121\"><span class=\"crayon-p\"># -- set global max_allowed_packet = 100*1024*1024;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-122\"> </div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-123\"><span class=\"crayon-p\"># 自动提交</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-124\"><span class=\"crayon-p\"># -- show variables like 'autocommit';</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-125\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-126\"><span class=\"crayon-p\"># 慢查询</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-127\"><span class=\"crayon-p\"># -- show variables like '%slow_query_log%';</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-128\"><span class=\"crayon-p\"># set global 只对当前数据库生效，如果MySQL重启后则会失效。如果要永久生效，就必须修改配置文件my.cnf（其它系统变量也是如此）。</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-129\"><span class=\"crayon-p\"># set global slow_query_log=1;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-130\"><span class=\"crayon-p\"># -- show variables like 'long_query_time%';</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-131\"><span class=\"crayon-p\"># set global long_query_time=4;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-132\"><span class=\"crayon-p\"># show global variables like 'long_query_time'; </span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-133\"><span class=\"crayon-p\"># select sleep(5);</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-134\"><span class=\"crayon-p\"># -- show variables like 'log_queries_not_using_indexes';</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-135\"><span class=\"crayon-p\"># set global log_queries_not_using_indexes=1;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-136\"><span class=\"crayon-p\"># -- show variables like 'log_slow_admin_statements';</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-137\"><span class=\"crayon-p\"># -- show global status like '%Slow_queries%';</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-138\"><span class=\"crayon-p\"># http://www.cnblogs.com/kerrycode/p/5593204.html</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-139\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-140\"> </div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-141\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-142\"><span class=\"crayon-p\"># -- show variables like \"%time_zone%\";</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-143\"><span class=\"crayon-p\">#set global time_zone = '+8:00';</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-144\"> </div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-145\"><span class=\"crayon-p\">#开启general_log日志</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-146\"><span class=\"crayon-p\"># -- show variables like 'general%';</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-147\"><span class=\"crayon-p\">#可以在my.cnf里添加,1开启（0关闭）,当然了,这样要重启才能生效,有点多余了</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-148\"><span class=\"crayon-p\">#general-log = 1</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-149\"><span class=\"crayon-p\">#log = /log/mysql_query.log路径</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-150\"><span class=\"crayon-p\">#也可以设置变量那样更改,1开启（0关闭）,即时生效,不用重启,首选当然是这样的了</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-151\"><span class=\"crayon-p\"># set global general_log=1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-152\"><span class=\"crayon-p\">#这个日志对于操作频繁的库,产生的数据量会很快增长,出于对硬盘的保护,可以设置其他存放路径</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-153\"><span class=\"crayon-p\">#set global general_log_file=/tmp/general_log.log</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-154\"> </div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-155\"><span class=\"crayon-p\">#mysql记录客户端IP：init_connect，有super权限的用户是不记录的，</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-156\"><span class=\"crayon-p\"># create table t1 ( cur_user varchar(100), n_user varchar(100),in_time timestamp default current_timestamp()) ;</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-157\"><span class=\"crayon-p\"># set global init_connect='insert into test.t1 (cur_user,n_user) values (current_user(),user())'; </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-158\"><span class=\"crayon-p\"># SHOW CREATE TABLE mysql.general_log\\G ，开启general_log日志也行：</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-159\"><span class=\"crayon-p\"># https://dba.stackexchange.com/questions/33654/mysql-logging-activity-from-specific-user-or-ip </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-160\"><span class=\"crayon-p\">#SELECT REVERSE(SUBSTRING_INDEX(REVERSE(USER()),'@',1)) as ip;</span></div><div class=\"crayon-line\" id=\"crayon-59baf01a12309325477897-161\"><span class=\"crayon-p\">#SELECT SUBSTRING(USER(), LOCATE('@', USER())+1) as ip;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59baf01a12309325477897-162\"><span class=\"crayon-p\">#select SUBSTRING_INDEX(host,':',1) as 'ip' from information_schema.processlist WHERE ID=connection_id();</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0135 seconds] -->\r\n<p></p>\n<h3>Refer：</h3>\n<p>[1] MySQL批量SQL插入性能优化</p>\n<p><a href=\"http://database.51cto.com/art/201309/411050.htm\" target=\"_blank\" rel=\"nofollow\">http://database.51cto.com/art/201309/411050.htm</a></p>\n<p>[2] MySQL 四种事务隔离级的说明</p>\n<p><a href=\"http://www.cnblogs.com/zhoujinyi/p/3437475.html\" target=\"_blank\" rel=\"nofollow\">http://www.cnblogs.com/zhoujinyi/p/3437475.html</a></p>\n<p>[3] innodb_rollback_on_timeout参数对锁的影响</p>\n<p><a href=\"http://q.fireflyclub.org/?/article/37\" target=\"_blank\" rel=\"nofollow\">http://q.fireflyclub.org/?/article/37</a></p>\n<p>[4] 日均万条数据丢失，一个隐式骚操作导致的奇葩事故！</p>\n<p><a href=\"https://mp.weixin.qq.com/s/OpPV24ILewVc2lRDrV4vvA\" target=\"_blank\" rel=\"nofollow\">https://mp.weixin.qq.com/s/OpPV24ILewVc2lRDrV4vvA</a></p>\n<p>[5] mysql之show engine innodb status解读（转）</p>\n<p><a href=\"http://www.cnblogs.com/ajianbeyourself/p/6941905.html\" target=\"_blank\" rel=\"nofollow\">http://www.cnblogs.com/ajianbeyourself/p/6941905.html</a></p>\n<p><a href=\"http://www.cnblogs.com/olinux/p/5497176.html\" target=\"_blank\" rel=\"nofollow\">http://www.cnblogs.com/olinux/p/5497176.html</a></p>\n<p>[6] Mysql 锁机制笔记</p>\n<p><a href=\"http://www.jianshu.com/p/fa28035656a9\" target=\"_blank\" rel=\"nofollow\">http://www.jianshu.com/p/fa28035656a9</a></p>\n<p><a href=\"http://www.jianshu.com/p/ec4a343c49f0\" target=\"_blank\" rel=\"nofollow\">http://www.jianshu.com/p/ec4a343c49f0</a></p>\n<p><a href=\"http://hudeyong926.iteye.com/blog/1490687\" target=\"_blank\" rel=\"nofollow\">http://hudeyong926.iteye.com/blog/1490687</a></p>\n<p>[7] MySQL索引原理及慢查询优化</p>\n<p><a href=\"https://tech.meituan.com/mysql-index.html\" target=\"_blank\" rel=\"nofollow\">https://tech.meituan.com/mysql-index.html</a></p>\n<p>[8] [译文]MySQL发生死锁肿么办？</p>\n<p><a href=\"http://www.10tiao.com/html/672/201612/2653929751/1.html\" target=\"_blank\" rel=\"nofollow\">http://www.10tiao.com/html/672/201612/2653929751/1.html</a></p>\n<p>[9] MySQL的timeout那点事</p>\n<p><a href=\"http://www.penglixun.com/tech/database/mysql_timeout.html\" target=\"_blank\" rel=\"nofollow\">http://www.penglixun.com/tech/database/mysql_timeout.html</a></p>\n<p>[10] mysql死锁(deadlock)分析及解决 （索引 间隙锁 sql顺序）</p>\n<p><a href=\"http://www.youyong.top/article/1158d0e3bcf\" target=\"_blank\" rel=\"nofollow\">http://www.youyong.top/article/1158d0e3bcf</a></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112054\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112054votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112054\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 5, "create_date": "2017-09-15"},{"front_image_path": "full/4ccab0a38c3c13879135519b200e0c60ce7498bb.jpg", "url_object_id": "5e8243d793df35a9502c06640a79ceee", "praise_nums": "1", "title": "可能是迄今为止最好的 GitHub 代码浏览插件", "tags": "工具与资源,Github", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2013/03/124.jpg"], "url": "http://blog.jobbole.com/112011/", "comment_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.geeksense.cn/plugin/\">geeksense</a>   </div><p>【伯乐在线转注】：以前曾介绍过一个 Chrome 插件 <a href=\"http://t.cn/RPZJZfD\" target=\"_blank\">Octotree</a>。安装之后，浏览托管在 Github上的项目，可看到左侧的树形结构，更方便查看代码。今天这篇文章介绍另外一个同类插接。</p>\n<hr>\n<p>GitHub是很多开发者远(tong)程(xing)协(jiao)作(you)的重要工具，其社交化编码的理念伴随着开源运动改变着整个开发社区的生态，无数优质项目依托GitHub在全球开源开发者的参与下蓬勃发展。</p>\n<p><strong>不过，讲真，你有在GitHub上好好读过代码吗？</strong></p>\n<p>对于大部分人来说恐怕是没有，GitHub作为一款基于Git的代码管理工具和协同工具是很优秀的，然而作为代码浏览和搜索工具，就和IDE差的很远了。不然为什么到今天GitHub连个侧栏的文件树没有，很多开发者要专门去下载浏览器插件才能有文件树？为什么你还是需要git clone到本地在把代码装到你的IDE里才能愉快的阅读代码？是不是有想过如果能像IDE那样在GitHub上浏览代码多好？</p>\n<p>今天我们就来介绍一款Chrome浏览器插件Insight.io，让你能像在GitHub上像你的IDE里一样浏览和搜索代码，让你的Github就像穿上了钢铁侠的战衣。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fhzg5vidjjg20dq094wp8.gif\"></p>\n<h2 id=\"\">功能总览</h2>\n<p><a href=\"https://chrome.google.com/webstore/detail/insightio/pmhfgjjhhomfplgmbalncpcohgeijonh\">下载安装</a>后，打开一个GitHub上的项目，会看到左边有个侧边栏，是不是已经有了自己在IDE里面的感觉了？插件提供以下功能</p>\n<ul>\n<li><strong>跳转到定义</strong></li>\n<li><strong>查找引用</strong></li>\n<li><strong>目录树功能</strong></li>\n<li><strong>基于符号的代码搜索</strong></li>\n</ul>\n<p><img src=\"http://wx3.sinaimg.cn/large/7cc829d3gy1fhzg5waddog21410osb29.gif\" alt=\"Glance\"></p>\n<p> </p>\n<h2 id=\"\">交叉引用</h2>\n<p>用<a href=\"https://github.com/apache/spark\">Apache Spark</a>做例子，悬浮在某个节点(类，方法，变量等)上就可以看到相应的类型和文档说明。点击左边的结构(Structure)按钮就可以看到改文件的类结构，包括成员变量，成员函数等，点击也可以跳到相应的行。</p>\n<p><img src=\"http://wx3.sinaimg.cn/large/7cc829d3gy1fhzg5y5wqwg21400ot1l0.gif\" alt=\"Cross Reference\"></p>\n<h2 id=\"\">查找引用</h2>\n<p>点击任何节点的用例就能跳到这个类，方法或者变量定义的地方（类似于IDE中的Ctrl + click）。</p>\n<p>点击类，方法和变量的定义节点，则可以找出所有该节点的使用例子。其中使用例子又会以被引用(Referenced At), 继承 (Inherit), 被继承(Inherited By), 重写(Override)等类型进一步分类方便查找。如果结果太多，用例的右上方也会有支持regular expression的文本框可以用来过滤出感兴趣的文件。</p>\n<p><img src=\"http://wx3.sinaimg.cn/large/7cc829d3gy1fhzg5zayzeg21650q4kjn.gif\" alt=\"Find References\"></p>\n<h2 id=\"\">目录树</h2>\n<p>点击文件(File)按钮你会看到树状的目录结构，忘记GitHub上切换文件的痛苦吧，文件树让你轻松的在项目之内的文件中自如切换。</p>\n<p>对于私有项目需要点击下方的<strong>Sign In</strong>按钮并到insight.io上导入私有项目文件树才会生效。</p>\n<p><img src=\"http://wx4.sinaimg.cn/large/7cc829d3gy1fhzg60wyodg21420othdv.gif\" alt=\"Directory Tree\"></p>\n<h2 id=\"\">代码搜索</h2>\n<p>GitHub只支持纯文本搜索，这时常让搜索代码变得很困难，特别是当你想搜的关键词是常用词的时候，大量的无用结果会让搜索功能完全不可用。而是用Insight.io插件，点击搜索(Search)按钮可以按类名，方法名，变量名，文件名等等搜索代码，并且有自动补全功能。试试在Insight.io和GitHub原生搜索上搜一下RDD.map对比下搜索结果吧？</p>\n<p><img src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fhzg62hd81g21660q44qr.gif\" alt=\"Code Search\"></p>\n<h2 id=\"insightio\">跳转到Insight.io</h2>\n<p>你也可以一键点击跳转到Insight.io上获得更好的浏览体验。</p>\n<p><img src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fhzg645xmfg21410oru0y.gif\" alt=\"View on insight.io\"></p>\n<h2 id=\"insightio\">提交项目给Insight.io</h2>\n<p>Insight.io目前收录了2000多个最活跃的开源项目，包括<a href=\"https://github.com/apache/kafka\">Apache Kafka</a>, <a href=\"https://github.com/torvalds/linux\">Linux-kernel</a>这样的大型项目，也有像<a href=\"https://github.com/daimajia/AndroidSwipeLayout\">AndroidSwipeLayout</a>这样优质的个人项目。如果你需要的项目并未被我们收录，点击<strong>Information</strong>栏下的<strong>Request Analyze</strong>就可以提交你目前正在浏览的项目了。</p>\n<p><img src=\"http://wx3.sinaimg.cn/large/7cc829d3gy1fhzg65lh83g213y0oru0x.gif\" alt=\"Request Analyze\"></p>\n<h2 id=\"\">快捷键</h2>\n<p>用快捷键可以快速打开关闭插件功能:</p>\n<ul>\n<li><strong>文件树</strong>: <code>⌘+⇧+f</code></li>\n<li><strong>类结构</strong>: <code>⌘+⇧+o</code></li>\n<li><strong>信息</strong>: <code>⌘+⇧+i</code></li>\n<li><strong>搜索</strong>: <code>⌘+⇧+s</code></li>\n</ul>\n<hr>\n<p><a href=\"https://chrome.google.com/webstore/detail/insightio-for-github/pmhfgjjhhomfplgmbalncpcohgeijonh/\" target=\"_blank\">插件下载传送门</a></p>\n<p>目前插件支持的语言有Java, C/C++, Scala, Python和Ruby。想跟开发团队吐个槽或者点个赞？想知道最好的编程语言PHP什么时候支持？想知道怎么让公司代码库也能用上Insight.io？欢迎邮件到 support@insight.io 。想实时吐槽的也可以加入我们的gitter房间</p>\n<p><a href=\"https://gitter.im/Insight-io/Lobby\"><img title=\"\" src=\"https://badges.gitter.im/Insight-io/Lobby.png\" alt=\"Gitter chat\"></a></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112011\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112011votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112011\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 9 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 9, "create_date": "2017-09-15"},{"front_image_path": "full/bbd3c66a3badc127bce3c714ce00a0e73265cc91.jpg", "url_object_id": "2e20cef128b8ada5093512d12980db03", "praise_nums": "1", "title": "Facebook 这类网站如何处理数十亿请求并保持高可用性的？", "tags": "IT技术,Web,负载均衡", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/03/912be8d20ca700194c3aced111cc833d1.jpg"], "url": "http://blog.jobbole.com/111996/", "comment_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/snowhere\">孙腾浩</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://blog.vivekpanyam.com/scaling-a-web-service-load-balancing/\">Vivek Panyam</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>Facebook 这类网站如何处理数十亿请求并保持高可用性呢，答案是负载均衡，本文将对其一探究竟。</p>\n<h3>什么是负载均衡</h3>\n<p>负载均衡是许多协同工作资源（通常是计算机）的分配策略。它们通常用于提高容量和可靠性。</p>\n<p>为了便于讨论负载均衡，对于服务扩展我假设以下两点：</p>\n<ul>\n<li>我可以运行任意数量实例</li>\n<li>任何请求可以到达任意实例</li>\n</ul>\n<p>第一个假设表明服务是无状态的（或者像 Redis 集群一样可以共享状态）。第二个假设实际中并不是必须的（比如粘性负载均衡），但在这片文章中做这样的假设便于讨论。</p>\n<p>下面是我将要讨论的负载均衡技术：</p>\n<ol>\n<li>应用层（OSI 第七层）负载均衡（HTTP、HTTPS、WS）</li>\n<li>传输层（OSI 第四层）负载均衡（TCP、UDP）</li>\n<li>网络层（OSI 第三层）负载均衡</li>\n<li>DNS 负载均衡</li>\n<li>多个子域手动负载均衡</li>\n<li>任播（Anycast）</li>\n</ol>\n<p>最后还有一些其他知识点：</p>\n<ul>\n<li>延迟和吞吐量</li>\n<li>服务器直接返回</li>\n</ul>\n<p>这些技术大致按照「网站流量增大时需要的操作步骤」排序。比如，应用层的负载均衡是首先要做的事（远远早于任播）。前三条技术提高吞吐量和可用性，但存在单点故障。其余的三条技术在提高吞吐量的同时避免了单点故障。</p>\n<p>为了帮助我们理解负载均衡，我们来看一个简单的服务扩展。</p>\n<p>注意：每种扩展技术都采用了非技术的比喻（在商店购物）。这些比喻仅仅是描述技术背后的思想，并不完全准确。</p>\n<h3>服务</h3>\n<p>我们假设我们正在构建大规模的服务。就像下图所示：</p>\n<p><img class=\"aligncenter\" src=\"https://blog.vivekpanyam.com/content/images/2016/02/Service-1.png\" alt=\"\"></p>\n<p>这个系统并不能处理大量通信，并且如果它宕机，整个应用就停了。</p>\n<h4>比喻：</h4>\n<ul>\n<li>你走向商店唯一一条结账的队伍。</li>\n<li>你购买你的商品，如果那里没有收银员，你无法完成购买。</li>\n</ul>\n<h3>应用层（OSI 第七层）负载均衡</h3>\n<p>为了承载更大的通信量，首先用到的就是应用层负载均衡。应用层是 OSI 第七层。它包括 HTTP、HTTPS 和 WebSockets。一款非常流行又久经考验的应用层负载均衡器就是 Nginx。让我们看看它如何帮助我们扩展服务：</p>\n<p><img src=\"https://blog.vivekpanyam.com/content/images/2016/02/L7LB.png\" alt=\"\"></p>\n<p>请注意，通过这种技术，我们能负载均衡数十或上百服务器实例。上面图片只展示两个作为例子。</p>\n<h4>比喻</h4>\n<ul>\n<li>商店员工引领你到一个特别的（有收银员的）结账队伍</li>\n<li>你购买你的商品</li>\n</ul>\n<h4>工具：</h4>\n<ul>\n<li>Nginx</li>\n<li>HAProxy</li>\n</ul>\n<h4>注意：</h4>\n<ul>\n<li>我们要在这里停止使用 SSL（分发时不用 SSL)</li>\n</ul>\n<h3>传输层（OSI 第四层）负载均衡（TCP、UDP）</h3>\n<p>上一条技术帮助我们承载大量通信，但如果我们需要承载更大的通信量，传输层负载均衡非常有用。传输层是 OSI 第四层，包括 TCP 和 UDP。流行的传输层负载均衡器有 HAProxy（这个也用于应用层负载均衡）和 IPVS。让我们看看它们如何帮助我们扩展服务：</p>\n<p><img src=\"https://blog.vivekpanyam.com/content/images/2016/02/L4LB.png\" alt=\"\"></p>\n<p>应用层负载均衡+传输层负载均衡能处理大多数情况下的通信量。然而我们我们仍要担心可用性。单点故障有可能出现在传输层的负载均衡器。我们在下面一节的 DNS 负载均衡解决这个问题。</p>\n<h4>比喻：</h4>\n<ul>\n<li>根据客户会员卡卡号有不同结账区域。举个例子，如果你的会员卡卡号是偶数，去电器区附近的结账台，否则就去食品区附近的结账台。</li>\n<li>一旦你到达正确的结账区域，商店员工引领你到一个特别的结账队伍</li>\n<li>你购买你的商品</li>\n</ul>\n<h4>工具：</h4>\n<ul>\n<li>HAProxy</li>\n<li>IPVS</li>\n</ul>\n<h3>网络层（OSI 第三层）负载均衡</h3>\n<p>如果我们要继续扩展，我们需要增加网络层负载均衡。这比上面两条技术更复杂。网络层是 OSI 第三层，包括 IPv4 和 IPv6。下面是网络层负载均衡：</p>\n<p><img src=\"https://blog.vivekpanyam.com/content/images/2016/02/L3LB.png\" alt=\"\"></p>\n<p>为了搞清楚它如何工作，我们需要一点等价路由的知识（ECMP）。当有多条等价链路到达相同地址时，我们使用等价路由。简单来说，它允许路由器或交换机通过不同链接发送数据包（支持高吞吐量），最终到达同一地址。</p>\n<p>我们可以利用这一点来实现网络层负载均衡，因为在我们看来，每个传输层负载均衡器是相同的。这意味着我们可以把从网络层负载均衡器到传输层负载均衡器的链接看做相同目的地的链路。如果我们把所有负载均衡器绑定到相同 IP 地址，我们可以使用等价路由在传输层负载均衡器之间分配通信。</p>\n<h4>比喻：</h4>\n<ul>\n<li>街对面有两家彼此分开却又一模一样的商店，你去哪一家完全取决于你的习惯。</li>\n<li>一旦你到达了商店，根据客户会员卡卡号有不同结账区域。举个例子，如果你的会员卡卡号是偶数，去电器区附近的结账台，否则就去食品区附近的结账台。</li>\n<li>一旦你到达正确的结账区域，商店员工引领你到一个特别的结账队伍</li>\n<li>你购买你的商品</li>\n</ul>\n<h4>工具：</h4>\n<ul>\n<li>通常在机柜里交换机内部的硬件中处理。</li>\n</ul>\n<h4>太长不阅：</h4>\n<ul>\n<li>除非你的服务规模相当大或有自己的硬件，否则你不需要它。</li>\n</ul>\n<h3>DNS 负载均衡</h3>\n<p>DNS 是将名称转换为 IP 地址的系统。举个例子，它可以把 example.com 转换为 93.184.216.34 。它当然也可以返回多个 IP 地址，像下面这样：</p>\n<p><img class=\"aligncenter\" src=\"https://blog.vivekpanyam.com/content/images/2016/02/Screen-Shot-2016-02-04-at-3-25-32-AM.png\" alt=\"\"></p>\n<p>如果返回了多个 IP，客户端通常会使用第一个可用的地址（然而一些应用只看第一个返回的 IP）。</p>\n<p>目前有很多 DNS 负载均衡技术，比如 GeoDNS 和轮询调度（round-robin）。GeoDNS 基于不同请求者而返回不同响应。这让我们可以将客户端路由到其最近的服务器或数据中心。轮询调度会循环所有可用的 IP 地址，对于每个响应会返回不同的 IP。如果多个 IP 可用，这两种技术仅仅改变响应里的 IP 顺序。</p>\n<p>下图展示 DNS 负载均衡如何工作：</p>\n<p><img src=\"https://blog.vivekpanyam.com/content/images/2016/02/DNS.png\" alt=\"\"></p>\n<p>在这个例子中，不同的用户被路由到不同的服务集群（随机或基于地理位置）。</p>\n<p>现在这里不再有单点故障的可能性（假设有多台 DNS 服务器）。为了进一步提高可靠性，我们可以在不同数据中心运行多个服务集群。</p>\n<h4>比喻：</h4>\n<ul>\n<li>你在网上查询购物中心，返回的列表把最近的购物中心放在第一个。你查看通往每个购物中心的路，然后选择列表中第一个营业的购物中心。</li>\n<li>街对面有两家彼此分开却又一模一样的商店，你去哪一家完全取决于你的习惯。</li>\n<li>一旦你到达了商店，根据客户会员卡卡号有不同结账区域。举个例子，如果你的会员卡卡号是偶数，去电器区附近的结账台，否则就去食品区附近的结账台。</li>\n<li>一旦你到达正确的结账区域，商店员工引领你到一个特别的结账队伍</li>\n<li>你购买你的商品</li>\n</ul>\n<h3>手动负载均衡和路由</h3>\n<p>如果你的内容在许多数据中心或服务间共享，而我们需要路由到其中特定的一个，那么这条技术就很有用了。比如 <code>cat.jpg</code> 储存在伦敦的集群中，但其他集群中没有。相似的，<code>dog.jpg</code> 储存在纽约的集群中，其他数据中心或集群中没有。举个例子，这很可能发生在内容刚刚上传，还未在数据中心之间复制的时候。</p>\n<p>然而，用户获取内容时不应该等待复制完成。这意味着我们的应用需要临时把所有 <code>cat.jpg</code> 请求发送到伦敦，所有 <code>dog.jpg</code> 请求发送到纽约。所以我们需要用 <code>https://lon-1e.static.example.net/cat.jpg</code> 代替 <code>https://cdn.example.net/cat.jpg</code>。对 <code>dog.jpg</code> 来说也一样。</p>\n<p>为了实现这一点，我们需要为每个数据中心设置子域（最好细分到每个集群每台机器）。除了上面的 DNS 负载均衡，这一点也很有必要。</p>\n<p>注意：我们的应用需要保持追踪内容的位置，以便重写请求。</p>\n<h4>比喻：</h4>\n<ul>\n<li>你拨打公司电话询问哪个购物中心提供猫粮。</li>\n<li>你查看列表上的购物中心路线，然后选择第一个营业的。</li>\n<li>街对面有两家彼此分开却又一模一样的商店，你去哪一家完全取决于你的习惯。</li>\n<li>一旦你到达了商店，根据客户会员卡卡号有不同结账区域。举个例子，如果你的会员卡卡号是偶数，去电器区附近的结账台，否则就去食品区附近的结账台。</li>\n<li>一旦你到达正确的结账区域，商店员工引领你到一个特别的结账队伍</li>\n<li>你购买你的商品</li>\n</ul>\n<h3>任播（Anycast）</h3>\n<p>这篇文章讨论的最后一种技术就是任播。首先来看一点背景知识：</p>\n<p>大多数网路使用单播。这本质上意味着每台计算机拥有独一无二的 IP 地址。有另一种称为任播的理论。通过任播，一些机器可以使用相同的 IP 地址和路由，并把请求发送到最近的一台机器。我们可以把这种技术和上面所讲的技术结合起来，构建出高可靠性和可用性，能承载巨大通信量的系统。</p>\n<p>任播根本上来说是允许互联网为我们处理部分负载均衡。</p>\n<h4>比喻：</h4>\n<ul>\n<li>你告诉别人你打算去商店，他们把你带到最近的位置。</li>\n<li>街对面有两家彼此分开却又一模一样的商店，你去哪一家完全取决于你的习惯。</li>\n<li>一旦你到达了商店，根据客户会员卡卡号有不同结账区域。举个例子，如果你的会员卡卡号是偶数，去电器区附近的结账台，否则就去食品区附近的结账台。</li>\n<li>一旦你到达正确的结账区域，商店员工引领你到一个特别的结账队伍</li>\n<li>你购买你的商品</li>\n</ul>\n<h3>杂项</h3>\n<h4>延迟和吞吐量</h4>\n<p>顺便一提的是，这些技术也可以提升低延迟服务的吞吐量。增加服务数量而不是让每个服务处理更多的通信。这样我们就可以得到低延迟、高吞吐量的系统。</p>\n<h4>服务器直接返回</h4>\n<p>在传统负载均衡系统中，请求穿过负载均衡的所有层级，响应也同样穿过它们。降低负载均衡通信量的一个优化点就是服务器直接返回。这意味着服务端的响应不通过负载均衡。如果服务端的响应十分巨大，这点尤其有用。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2017/01/5085cce1bd4e144b7d148079a34b20c1.jpg\">\n            \n                            <img src=\"http://jbcdn2.b0.upaiyun.com/2017/01/02b09a29fdb3ab5fe03d4bd1afe95664.jpg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111996\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111996votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111996\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 7 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/snowhere\">孙腾浩</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/snowhere\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/06/47765e50cfb7c4e598e72d893ab4f62f.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            毕业于郑州大学软件工程专业，身为 Java 程序猿却同样热爱着 JavaScript 。为了兴趣而写代码，做自己喜欢做的事。Keep coding ... Stay Cool ...        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/snowhere\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/snowhere/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/snowhere/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 19</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://snowhere.me/\"><i class=\"fa fa-link\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/Snowhere/\"><i class=\"fa fa-github\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 7, "create_date": "2017-09-15"},{"front_image_path": "full/71bf111fee57343e3033080c83e8e714bef0e88d.jpg", "url_object_id": "4220d150717c8d45c995d3ccaa8b8996", "praise_nums": "6", "title": "小王子之程序员版", "tags": "职场,程序员", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/06/3b102356e4b2e8b92940143a3a70bed0.png"], "url": "http://blog.jobbole.com/111959/", "comment_nums": 5, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/huangxiaofei\">黄小非</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://ferd.ca/the-little-printf.html\">Fred Hebert</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【伯乐在线提示】：本文较长，Fred Hebert 仿照《小王子》小说，写了一个小程序员在学习软件开发中的各种历险，分了 11 个小故事。正如读者 lei 的评论所言：所有程序员都是文中这些人的缩影。</p>\n<p>补充：《小王子》是法国作家安托万·德·圣·埃克苏佩里于 1942 年写成的著名儿童文学短篇小说。本书的主人公是来自外星球的小王子。书中以一位飞行员作为故事叙述者，讲述了小王子从自己星球出发前往地球的过程中，所经历的各种历险。</p>\n<p> </p>\n<p> </p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/3b102356e4b2e8b92940143a3a70bed0.png\"><img class=\"aligncenter size-full wp-image-65334\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/3b102356e4b2e8b92940143a3a70bed0.png\" alt=\"printf-nocover\" width=\"387\" height=\"424\"></a></p>\n<h3>第 0 章</h3>\n<p>我出生在电子游戏和电脑泛滥年代之前。所以我还算幸运，有足够的时间和我哥，还有小伙伴们一起做户外运动，还发明我们自己的游戏。</p>\n<p>我们自己扮演英雄，拿着一根树枝，我们就能瞬间把它想象成弓、剑、枪，甚至是望远镜，当然也可以是任何其他东西。哦，对了，唯一的例外就是你不能把它想象成回旋镖，因为真的回旋镖扔出去是会自己飞回来的，但是树枝扔出去了，你要自己去捡回来。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/f0a415ae533c3befdffdf1b417a054ae.png\"><img class=\"aligncenter size-full wp-image-65343\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/f0a415ae533c3befdffdf1b417a054ae.png\" alt=\"boomerang\" width=\"356\" height=\"230\"></a></p>\n<p>后来我们就长大了，再这么玩就有些尴尬了。要知道，在孩子们开始觉得大人的世界很精彩的阶段，你要是再玩那些把松果想象成魔法手榴弹的游戏，这就很不合群了。迟早你要面对成长的烦恼。不过，能有一个完整的童年还是很幸运。</p>\n<p>后来我就开始学会玩电子游戏了，当然也开始使用电脑。电子游戏的世界可绝对是你梦寐以求的世界，因为它能把你想象中的东西在你面前实现出来。玩游戏很消耗时间，但是它绝对会让你体验到不同的人生。</p>\n<p>不过对于电子游戏来说，有一个特点：那就是你不负责创造，你只负责响应和付出时间。我长到青少年的岁数，还当过即兴表演的演员。所以说，无论是与人相处，还是装作旁若无人，这对我都不是问题。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/c0d8cbc8c759f27640821750644a554c.png\"><img class=\"aligncenter size-full wp-image-65339\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/c0d8cbc8c759f27640821750644a554c.png\" alt=\"improv\" width=\"360\" height=\"289\"></a></p>\n<p>当然，在魁北克做即兴表演还是有点儿不同寻常，因为我们是在溜冰场地上表演——你知道冰球在加拿大多火吗。</p>\n<p>后来我去了职业学校学习多媒体，大概是 2005 年到 2008 年这个时段，我终究还是要做些编程的事情。不过我发现编程是个有意思的事情！我又感觉到了创造性！并且我还能靠这个赚钱！于是我设计了我的第一套游戏，这可让我受益匪浅。<a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/2f5fe97ea19c4f50e42da989f216c5ea.png\"><img class=\"aligncenter size-full wp-image-65337\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/2f5fe97ea19c4f50e42da989f216c5ea.png\" alt=\"game\" width=\"472\" height=\"400\"></a></p>\n<p>不过后来又有人告诉我：“你做的并不是真正的电子游戏。你做的只是一个 HTML 表单。而且你做的时候应该用数组来表示文字和选项，这样效果会更好。你写的代码应该更整洁一些。”</p>\n<p>我对这个评价觉得有点儿沮丧。我做的这个游戏是一个基于文字的游戏，文字大概有 11 页，通过选择来“进行你的冒险”。不过我意识到，如果想让大家对我做的东西更加满意，我还有很多东西要学。</p>\n<p>我应该学一些“真正的编程知识”。于是我从基于JScript 的 GUI 工具跳到了一些更牛的东西上面，例如 PHP。我学了 PHP，同时也学了 JavaScript。可是后来，我听说这些还是不行，我还得学一些“真正的编程知识”。别人跟我说，PHP 不行，我应该学的是 Python，当然后来我真的去学了。</p>\n<p>不过“真正的程序员”还会一些更时髦的东西，Python 的 Lambda 可到不了那个逼格，而且面向对象编程模式简直就是弱爆了。人家告诉我说，我应该去读一读 SICP，毕竟这是计算机科学的圣经嘛。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/88196eec64f6b673f4e1ce9ebe35eb80.png\"><img class=\"aligncenter size-full wp-image-65349\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/88196eec64f6b673f4e1ce9ebe35eb80.png\" alt=\"sicp\" width=\"309\" height=\"456\"></a></p>\n<p>然后我就接触了 Scheme。我还买了 Brian Kernighan 和 Dennis Ritchie<i><i class=\"01\"> </i></i>合写的《The C Programming Language》，因为真正的程序员就是要用 C 语言写程序的嘛。我还在本地大学报了一个业余班去上课，同时我还得去上班，因为真正的程序员都是很懂数学和算法的嘛，所以我也得学。我开始读论文，看书，因为真正的程序员在算法这件事情上肯定是与时俱进的啊。</p>\n<p>后来，我学了 Erlang 语言，而且还靠这门语言找了份工作。我写了一本 Erlang 的书。不过有意思的是，从来没人问过我是不是这本书的作者？我还有没有写其他的书？或者书里的图是不是我画的？好吧，我找到了一份教 Erlang 语言的工作，但是却从来没有在生产环境中用过这门语言。</p>\n<h3>第 1 章</h3>\n<p>我就这样一直在全世界飞来飞去，教给别人一些连我自己都没有做过的事情，结果突然之间大家就觉得我也是真正的程序员了。要知道我的工作一开始和写程序是没什么关系的。</p>\n<p>有一天，我参加完某个技术会议回家，然后被滞留在机场了，正当我气急败坏地在电脑上打字的时候，突然听到了一个奇怪的，但是很绅士的声音对我说：</p>\n<p>“能帮我设计一个系统吗？”</p>\n<p>“啥？”</p>\n<p>“设计一个系统！“</p>\n<p>我被这个请求惊呆了，于是抬起了头。我环顾四周，看到了一个小孩，他非常希望成为一名程序员，然后他说我可以叫他”printf”，当然，我觉得这肯定不是他的真名，而且这个名字也挺蠢的。他看上去长得这个样子：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/e91da181fb13d148dcb5b74e34579a96.png\"><img class=\"aligncenter size-full wp-image-65333\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/e91da181fb13d148dcb5b74e34579a96.png\" alt=\"printf-end\" width=\"393\" height=\"423\"></a></p>\n<p><q class=\"printf\"></q>”我不是很懂电脑，但是看上去你很懂。我想写一个博客程序给大家用，然后还想让大家阅读这个博客。所以麻烦你帮我写一个系统吧。”</p>\n<p>这可是一个让人吃惊的请求，可能是因为我已经 20 个小时没睡觉的原因，我还不是很理解，或者说我感觉还是很不真实。我跟他说，这可不是简单的事情。我不太清楚他到底要做什么？有没有考虑过失败了怎么办？这个博客要支持多少人同时在线阅读呢？服务器的主机放在哪儿呢？在缺乏这么多信息的前提下，我是没法设计一个合理系统的。</p>\n<p>“这些都不重要。就给我设计一个系统就好。”</p>\n<p>好吧，那么我就画了一个系统的架构图：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/23bf341a92d7e72309b27ca82f202995.png\"><img class=\"aligncenter size-full wp-image-65347\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/23bf341a92d7e72309b27ca82f202995.png\" alt=\"arch1\" width=\"467\" height=\"251\"></a></p>\n<p>他看了看，然后说：“不行，这个系统还不够好。给我再做一个吧。“</p>\n<p>然后我就又做了一个：<br>\n<a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/b9b614d4b48593d53f73e56f015f79d1.png\"><img class=\"aligncenter size-full wp-image-65346\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/b9b614d4b48593d53f73e56f015f79d1.png\" alt=\"arch2\" width=\"583\" height=\"337\"></a></p>\n<p>接着我跟他简要解释了一下这个系统是如何工作的。</p>\n<p>我的新朋友礼貌地笑了笑，说：”这不是我要的系统，它太复杂了，好多功能我其实都不需要。“</p>\n<p>我听了感觉气不打一处来啊，我可是考虑了冗余、系统监控、备份、缓存还有很多其他的机制，来降低负载，减轻额外的处理器负担，并且还能对系统进行有效保护，失效备援，易于部署等等。要知道，如果平时我给人拿出这种方案，那可是要收咨询费的！好吧我失去耐心了，然后我就画了下面这个图：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/ed300d72e9e18a9845bd8da8da96cae3.png\"><img class=\"aligncenter size-full wp-image-65344\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/ed300d72e9e18a9845bd8da8da96cae3.png\" alt=\"blackbox\" width=\"188\" height=\"176\"></a></p>\n<p>然后我还补充说：“这就是你要的设计。你要的系统就在这个黑盒子里。”我希望这个设计方案能让他放过我。不过我听到了一句非常意外的回答：</p>\n<p>“没错！这就是我要的系统！”</p>\n<p>这就是我和小 printf 初识的故事。</p>\n<h3>第 2 章</h3>\n<p>我迅速地对小 printf 做了点调查。发现他之前写的东西都是些小程序，基于表单的小网页，还有一些无关紧要的命令行工具。这些东西平淡无奇，就算是做出来了也很快会被人忘记。</p>\n<p>然后突然之间，他就开始做包含好几个模块的大项目了。这个项目要用到 sockets，要能访问本地硬盘，而且还要和数据库交互。程序刚一做出来的时候，小 printf 还觉得很神奇。但是即便如此这个项目还是差强人意。</p>\n<p>这个项目还需要重构，需要更细致的测试，需要更完备的文档，需要更好的包装和分析。项目上线已本来应该正常运行，但是某一天早上，它崩溃了。</p>\n<p>接下来就是各种崩溃，崩了又崩。</p>\n<p>系统配置不对，日志界面也不再滚动，磁盘速度忽快忽慢，网络不定时抽风，bug 开始各种出现，系统编码也让人匪夷所思，数据库需要清理，事务也被挂起，证书过期，各种漏洞开始暴露，系统监测则什么动静也没有。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/2a137d24c99e91c1d8b1d4fee8b313bb.png\"><img class=\"aligncenter size-full wp-image-65350\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/2a137d24c99e91c1d8b1d4fee8b313bb.png\" alt=\"spaghetti\" width=\"243\" height=\"143\"></a></p>\n<p>系统开始变成一锅粥了。</p>\n<p>他对我说：“事实上我什么都不懂！我本应根据我的需求来做判断的。我太想做一个完美的系统，花了这么多的时间，结果却是‘磨刀误了砍柴功’。当然，我还是知道这个系统的美妙之处的。“</p>\n<p>于是一天早晨，他决定离开办公室。他对着一大堆电脑指示灯说了「再见」。他离开是为了要看看，除了他那乱糟糟的服务器之外，软件的世界还能给他提供些什么好办法来实现他的系统。</p>\n<p>如果照现在的情况，只会是日志继续不停地累计，直到硬盘存爆了为止。</p>\n<h3>第 3 章</h3>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/72c115153857d62127329f76d4615d75.png\"><img class=\"aligncenter size-full wp-image-65342\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/72c115153857d62127329f76d4615d75.png\" alt=\"building\" width=\"394\" height=\"281\"></a></p>\n<p>他来到了一个工作区，想找个经验丰富的人指点迷津。</p>\n<p>他找的第一个人是一个超级自信的高级工程师，他看上去地位很高的样子。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/e71c20866e199431e56c0e63c09a7c93.png\"><img class=\"aligncenter size-full wp-image-65335\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/e71c20866e199431e56c0e63c09a7c93.png\" alt=\"pro\" width=\"362\" height=\"425\"></a><q class=\"other\"></q>”啊，来向我取经啊！你可找对人了，我可是这个领域的专家！“这个人说。</p>\n<p>”专家？”小 printf 问到，”这就是说你什么程序都能写，什么程序都会写？“</p>\n<p>”那当然！“专家回答到。他补充说：”总的来说，我只写那些值得写的程序。我可不写那些没意义的东西。我能写但不写的那些程序，都是因为太简单，所以不劳我动手。“</p>\n<p>”啊，那你能帮我看一下我的系统吗？”就在小 printf 开始阐述他的系统的时候，这位专家打断了他：</p>\n<p>“抱歉，我真心觉得这么做没什么意义。”</p>\n<p>“为什么？”</p>\n<p>“因为经验。我善于编写我善于的程序，我给我善于编写的东西编程。我要严格限制我只做我擅长做的事情，这样才能变得更好。我管这个叫做‘职业安全’，这就是程序界的适者生存原理，而且这一行就是这么玩的。“</p>\n<p>”那你为什么不能帮我呢？“</p>\n<p>”好吧，你看，如果我花时间帮助了你，那么我就会让我的技术自我投资的方向发生分散和偏离——这对我来说是失策。对于你来说，最好的学习方法就是我当年做的那样：通过痛苦的努力来找到解决的办法。这有助于锻造你的个性。“</p>\n<p>”但是这样效率好低。“</p>\n<p>”好吧那你就去学校学，你也可以自学。但是无论哪种做法，都只是把那些想不劳而获的懒人踢出去，让真正愿意踏实学习的人留下来。如果不是这样的话，那我坚持恪守的价值观就会随之崩溃。“</p>\n<p>”那你觉得跟人合作，或者是你的同事能不能帮助你？“</p>\n<p>”并不能。我工作状态最好的时候其实是我一个人独自待着而且没人打扰的时候。每次我被迫和别人一起工作的时候，几乎可以肯定我们做的东西没法凑到一起。最后只能是我怒了，然后把他们写的东西又自己重新再写一遍，然后这才能行。“</p>\n<p>小 printf 对这个专家不愿帮助别人的态度感到非常意外，而且也对专家描述的周围的人能力如此之差感到很困惑。专家把自己的全部视野只集中在自己擅长的领域，只解决自己能解决的问题，这听上去有点儿悲哀。</p>\n<p>”我明白了…我觉得你别给我帮助的话就最好了。“ 小 printf 说到。</p>\n<p>”你什么意思？“自带高大上光环的专家似乎感到了自己的价值观受到了挑战。”你是说我的做的工作毫无趣味可言吗？“</p>\n<p>”哦，并不是，你做的工作很有趣。不过从你的眼光中看来，我只是一个烦躁而讨厌的家伙。我是来寻求帮助的，不是来找罪受的。“</p>\n<p>小 printf 迅速地离开了这个专家，因为他明白，除非你在他的”职业安全“范围之内，否则根本就不能碰他。</p>\n<h3>第 4 章</h3>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/1ca156937bc6ffd234324776df20998e.png\"><img class=\"aligncenter size-full wp-image-65361\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/1ca156937bc6ffd234324776df20998e.png\" alt=\"books\" width=\"461\" height=\"360\"></a></p>\n<p>在继续寻找帮助的路上，小 printf 来到了一个办公室的的门口，办公室里四面都是书架，书架上放着装帧优美的硬皮书，书上有各式各样的精美图画，一个人坐在办公室里面。</p>\n<p>“先生你的书真不错啊“小 printf 说。</p>\n<p>”谢谢！我觉得这些书都是程序员必备的材料。如果你没有这些书，你都不好意思跟人家说你是真正的程序员。“</p>\n<p>”啊，那我觉得我可能就不算是真正的程序员了“，小 printf 说，”那你最喜欢哪本书呢？“</p>\n<p>”哦，大部分书我还没看过呢。“</p>\n<p>”那你不是个优秀的程序员咯？“</p>\n<p>”啊不，我不是。“这个开发者骄傲地补充到：”实际上，我是个糟糕的程序员。“</p>\n<p>”真遗憾，“，小 printf 说，”我可是不断在进步呢。“</p>\n<p>“你听说过 Dunning-Kruger 效应没？”，房间中的人问到。</p>\n<p>“没有，那是个啥玩意儿？”</p>\n<p>“就是一种认知偏差。它的意思大概就是说，那些能力不太强的人更容易高估自己，而能力很强的人更容易低估自己。”</p>\n<p>“所以按照你的意思，如果我认为我在进步，其实是因为我不够好造成的？”</p>\n<p>“是啊，就是这个意思。很可能就是你其实能力不强。而我，我公开声称自己是一个糟糕的程序员。但是根据 Dunning-Kruger 效应，我很可能是在低估我自己，这就意味着我其实是一个很棒的程序员，你还不明白吗？”</p>\n<p>“为什么会这样？”</p>\n<p>“那是因为自黑是程序员的一大法宝。当你自我感觉良好的时候，你实际上已经停滞不前了。”</p>\n<p>“但是这样一来不就意味着，一旦你自己感觉不错的时候，你就开始走下坡路了，所以你应该让自己感觉糟糕起来吗？”</p>\n<p>“对的。但是这件事情正确的做法是，你要对任何东西都说很糟糕，即便是你不知道怎么解决问题也要这么说。这样就能让你看上去很聪明，而且又并不用真的做什么。“</p>\n<p>”能具体解释一下么？“</p>\n<p>”比如我在网上看到了一个让我不爽的项目。然后我就说这个项目所有的地方都不对，但是又并不具体说哪儿不对。我只需要轻描淡写地说，因为做这个项目的人本身就是个白痴，就这样就可以了。“</p>\n<p>“但是你这么说，别人怎么会信呢？”</p>\n<p>“哈哈，我觉得他们都愿意相信他们做错了，而且他们也愿意让别人指出来。这就有点儿像烟雾或者镜子。实际上没人知道自己做的东西是啥样，他们只能知道自己做的东西看上去是啥样。”</p>\n<p>“那么如果他们说他们没法解决问题，让你来帮他们的话，那你怎么办？“</p>\n<p>”这样的话就又回到了一切事情都很糟糕的那个问题；你就说你很忙，有很多事情要做，然后你还很悲观。这样的话，他们就只能靠他们自己了。“</p>\n<p>”所以说这一切都只是摆个姿态而已？这对你来说只是一个套路？你懂的时候装作不懂，是为了让真正啥都不懂的人失去信心，你不懂的时候装懂，是为了让真正懂的人感觉糟糕。“</p>\n<p>”在大多数情况下，有能力没什么用。只有名声才是最重要的。老板招人的时候喜欢招自己的朋友，公司裁人的时候不招人喜欢的和不被重视的人会先被裁。这就是规则。如果你想改变社会的规则，你就会成为异类。这就是套路。业界就是这么运作的，学术界也大致如此，尽管这些都是潜规则，但是我还是都看出来了。一切都取决于你认识谁，如何推销自己，如果经营你的个人品牌。只有这样你才能在业界拥有一席之地。“</p>\n<p>”如果我必须要觉得自己很糟糕，而且还得让别人觉得很糟糕，这样才能找到工作的话，那我想还是算了。“小 printf 说完就走开了。</p>\n<h3>第 5 章</h3>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/27adece4ab9b8ec687df066fb64d100a.png\"><img class=\"aligncenter size-full wp-image-65348\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/27adece4ab9b8ec687df066fb64d100a.png\" alt=\"realprog\" width=\"489\" height=\"488\"></a></p>\n<p>接下来就是午餐时间了，printf打断了一个全神贯注工作忘记吃午饭的人，他一直盯着屏幕，饭都已经凉了。</p>\n<p>工作这么忙碌的人应该很擅长软件行业。于是小 printf 问到：</p>\n<p>”如果主数据库崩溃了，那从数据库也会崩溃么？“</p>\n<p>”你运行的一切东西。“这个忙碌的人回答说，”迟早都会崩溃的。“</p>\n<p>”那么那些告诉你程序崩溃的程序呢？它们也会崩溃么？“</p>\n<p>”是的，它们也会崩溃。所有的大型系统在任意时刻都处在某种部分崩溃的状态。“</p>\n<p>”那么，我们搭建可靠系统（reliable system）的意义在哪儿呢？“</p>\n<p>这个忙碌的人不知道，他也在思考同样的问题，因为就在此时，他们又接到了一个问题，说是一朵云坏掉了，造成了天空塌下来砸到了头上。</p>\n<p>”那么，搭建可靠系统的意义到底在哪儿呢？“小 printf 追问到。</p>\n<p>这个忙碌的人此时一脸的不爽，一看就是在工作遇到问题的样子。他就像一个放了学被留下来不让走的孩子，而且他的三明治显然是废了。他很不耐烦地大声回答说：</p>\n<p>“显然没有任何意义。因为程序本身就是一坨屎。”</p>\n<p>“噢！”他倒抽了一口气。</p>\n<p>接下来，就是一段完全的沉默。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/3b7432892c1dbafb839a60491ad99734.png\"><img class=\"aligncenter size-full wp-image-65351\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/3b7432892c1dbafb839a60491ad99734.png\" alt=\"trashcan\" width=\"229\" height=\"381\"></a></p>\n<p>小 printf 打破了沉默，并且带着一丝愤怒：</p>\n<p>“我不相信你说的话。程序确实是脆弱的，但是程序员能够通过努力让程序变得更好且可用。”</p>\n<p>没有回应。这个时候忙碌的人已经打开一个文档，查看如何从头启动一个集群备份，情况似乎变得越来越糟糕了。</p>\n<p>“那么你真的相信可靠的程–”</p>\n<p>“噢不！”忙碌的人说，“不不不！我不相信什么好的或者可靠的程序！再也不信了！它们都不行！我告诉你我现在脑袋里想的就是怎么处理手头的这个垃圾系统。你没看到是我在努力维持让这些东西运行吗？这些破玩意儿多么重要！”</p>\n<p>小 printf 瞪了回来，表情有些惊愕。</p>\n<p>“都坏成这样了还很重要？你的口气就像是个真正的程序员似的。“</p>\n<p>他补充说：</p>\n<p>”你把概念完全搞混了。世界上有成百上千的程序，年复一年地运行，而且总是会崩溃。但是即便如此人们还是需要这些程序，使用这些程序。而且我知道还有一种程序，它们只会在单台笔记本上运行，但是只要发生一点点错误，其结果就能瞬间毁灭整个社区。如果这样，你还认为不重要吗？“</p>\n<p>接下来这个忙碌的人就不再说话了。</p>\n<h3>第 6 章</h3>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/7350f2b08649e74bdbe6927120ebe2e3.png\"><img class=\"aligncenter size-full wp-image-65338\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/7350f2b08649e74bdbe6927120ebe2e3.png\" alt=\"frameworks\" width=\"529\" height=\"487\"></a></p>\n<p>小 printf 造访的第四个工作区有一个人，他的电脑前贴满了各种不知名的即时贴。</p>\n<p>”motor-mvc, quadrangular JS, GoQuery, cometeor, 还有一些听上去像是日语的东西, …“</p>\n<p>”Hi,“ 小 printf 打断了他，”请问你在做什么呢？“</p>\n<p>”alchemist, bongodb, mochascript, walktime.js, portasql, …“这个人不停地念叨。</p>\n<p>”请问您在做什么呢？“小 printf 又问了一遍，这次声音更大了一些。</p>\n<p>”噢，我在尝试新的框架，工具，数据库，编程语言。“</p>\n<p>”哇！你好像进度很快啊，效率和10个程序员加起来一样高。“</p>\n<p>”是啊，你看，这个行业的前进速度是非常快的！“他对着手机看了几秒，然后补充说，”这儿！cardboard.io 框架推出了 3.5 版本，这个版本和 3.4 不兼容，目前已经产生了 4 个 fork 了！我必须要把他们都试一遍，然后决定自己用哪个。“</p>\n<p>”但是你学这么多，都拿来做什么呢？“</p>\n<p>”我是一个提前学习主义者。如果你不保持着与时俱进的心态，现在你可能还要靠写 COBOL 或者 MUMPS 来过日子呢。如果你想做大事情，就要确保自己站在浪潮之巅。“</p>\n<p>”那这么做有效果么？“</p>\n<p>”有啊，我在 Rails 火起来之前就知道它要火了，我在 node.js 流行起来就知道它要流行了。我参与了 Redis、Mongodb 和 Riak早期的 beta 测试！我是第一个用 Vagrant 的人，后来又切换到了Docker上面，当然现在的潮流是 Unikernel“</p>\n<p>”酷，那么你掌握了这么多最前沿的技术，有什么回报呢？“</p>\n<p>”哦，并没有回报，Rails 变得越来越臃肿了以后，我就必须得赶快去关注别的重要技术，保证自己不要落后。其他的各种技术差不多也是这个套路。目前我希望掌握的是 Unikernel。“</p>\n<p>”明白了。“，小 printf 补充到，”那么这些新框架和技术都会用来解决哪些问题呢？“</p>\n<p>”噢，不是重大技术我们不用，我主要是要确保这一点，这样才能让我们公司不至于把资源花费到没有未来的技术上。这是很重要的，因为如果你不这么做的话，你的技术就会被那帮花白胡子的过时老程序员绑架，为了避免这样，你就必须成为一个自我驱动力强大的学习者，一个提前学习主义者。“</p>\n<p>”真有趣。“小 printf 插了一句嘴。</p>\n<p>”这可不是有趣，这是很难做到的！在创业的世界里，如果你想要吸引人才，你就必须要通过优秀的技术来招揽他们！否则你就是个不灵活的落后者。没人愿意做不灵活的落后者。“</p>\n<p>小 printf 赶紧说：”不，我不是这个意思。“，然后他补充到，”我感到有趣的地方在于，工具本来是用来给我们解决问题的，但是对于你来说，工具本身却成了问题。“</p>\n<p>接下来，这个人就站在他那个新潮的健身式办公桌前，没有任何回应了，小 printf 真希望自己赶紧出去。</p>\n<h3>第 7 章</h3>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/6a7cef8b627c1b5bbdef6056762200a1.png\"><img class=\"aligncenter size-full wp-image-65362\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/6a7cef8b627c1b5bbdef6056762200a1.png\" alt=\"ops\" width=\"363\" height=\"349\"></a></p>\n<p>在下一个办公室，坐着一个看上去很疲倦的员工，他的桌子上堆满了空咖啡杯。她无精打采地坐着，愤怒地敲击着键盘。</p>\n<p>”嗨！“小 printf 说。</p>\n<p>这个疲倦的女人并没有停下手上的动作。他继续愤怒地敲击着键盘。</p>\n<p>”你好？“小 printf 又打了一遍招呼。</p>\n<p>这个女人忽然间停了下来，从抽屉里取出一只水壶，然后大口喝起水来。</p>\n<p>”我的工作太糟糕了。“她说，”我是做 Devops 的。一开始还好，我大部分时间做开发，偶尔也做做调试的事情，但是随着时间的推移，情况变得越来越糟糕。我开始在各处救火，但是问题还是不断发生。我解决了其中的大部分问题，但是有些小毛病还是要期盼奇迹发生，这才能赶得上开发计划预定的期限，而且开发工作也是我的。“</p>\n<p>”他们没有再找个人帮帮你么？“</p>\n<p>”没有，这就是问题的所在。小问题总是到处发生，因为我必须要解决这些问题，所以我在做开发的时候就不可能像以前只做开发时那么专注，所以我本身就会制造更多的问题。现在，我每天都没日没夜地给系统灭火，我真是恨死我的工作了。“</p>\n<p>”那你的雇主为什么什么都不做呢？“</p>\n<p>”那是因为我擅长我的工作啊，我长期以来一直可以控制住局面，而且大家都已经习惯了。当你把创造奇迹变成一种习惯的时候，人们就适应了。然后你就会被困在‘总是要创造奇迹’的局面当中，否则人们就会认为是你的工作不得力。“</p>\n<p>”这听上去可真是悲哀！“</p>\n<p>”是啊。因为你是最熟悉怎么去给系统灭火的人，所以你就总得去，久而久之就是你的工作了，直到有一天老板雇了新人来替代你做你心爱的工作。如果你真的很在意你的工作的话，那么就去做那种谁都不愿意干的脏活累活，接下来所有人都会感谢你，你干得越多人们就会越感谢你，直到所有的脏活累活全都归你。当然，这样的话工作就没有什么乐趣可言了。“</p>\n<p>”那么你可真不走运。“小 printf 说。</p>\n<p>说着，她的呼叫器又响了。</p>\n<p>”那个女人，”小 printf 对自己说，就像是他父亲的口吻，“那个女人的工作被所有人轻视，专家、明星程序员、提前学习主义者，他们都看不上她的工作。但是她做的工作才是唯一有帮助的。这很可能是因为她总是在考虑别人，而不是只考虑自己吧。”</p>\n<h3>第 8 章</h3>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/e3b19d8ef4b712035dd80e8738020147.png\"><img class=\"aligncenter size-full wp-image-65363\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/e3b19d8ef4b712035dd80e8738020147.png\" alt=\"architect\" width=\"449\" height=\"377\"></a></p>\n<p>在建筑的一角，小 printf 发现了一间大办公室，办公室有巨大的落地窗，窗外视野极好。办公室内有一张非常大的办公桌，桌子上的文件堆成了小山，有一个老绅士坐在办公桌前。</p>\n<p>“啊，开发者来了”老绅士看到小 printf 走到门厅，于是就大声喊到，“进来！”</p>\n<p>透过窗户看去，小 printf 注意到窗户的玻璃上写着各种各样的字，还有用修正液涂改的痕迹，以至于窗外的风景都快被各种圈圈点点，箭头，圆柱等几何图形给盖住了，而且上面还画了云朵的图案。明明窗外就有真正的云，为什么还要在窗户上画云朵的形状？还有整个图案的含义也让人很感兴趣。</p>\n<p>”这是什么？“，小 printf 指着窗户问。</p>\n<p>”这个么？这是我们的生产系统！“那个老绅士说，一副看上去对外面事物毫不关心的样子，”我是一个软件架构师。“</p>\n<p>”软件架构师是什么？”</p>\n<p>“多数情况下，架构师是那种最了解组件之间的结构，并且最能够合理调度组件关系的人，架构师能让大型系统的各个部分完美协调地工作。同时，软件架构师也了解数据库、编程语言、框架、编辑器、序列化格式、协议以及诸如封装、协议隔离等概念。“</p>\n<p>”听上去真有趣！“小 printf 说，“终于有一个人能够回答所有的问题了！”他看了一眼架构师的图，“你的系统真是让人印象深刻啊！那么这个系统速度快么？”</p>\n<p>“我不知道，”架构师说，“应该挺快的吧。”</p>\n<p>“那系统的代码呢？写得好么？”</p>\n<p>“我也没法告诉你”</p>\n<p>“用户对系统满意么？”</p>\n<p>“恐怕我还是没法告诉你。”</p>\n<p>“但是你是软件架构师啊！”</p>\n<p>“对啊！但是我并不是开发者啊。软件架构师的任务并不是去写模块、类，也不是调用类库。软件架构师的工作相比写代码来说要重要得多。软件架构师会和开发者，程序员们聊天，问他们问题，给他们提供指导。如果程序员问的问题很有趣，那么架构师也许会亲自出马给这个问题做规划。”</p>\n<p>“为什么要这样？”</p>\n<p>“因为我们更有经验啊。我们对系统能做哪些事，不能做哪些事了解得更多。开发者则是我们知识的延伸，他们会去把优秀的系统真正做出来。”</p>\n<p>“但是你们不亲自编码，怎么能确认开发过程是顺利的呢？”</p>\n<p>“因为我们信任开发人员啊。”</p>\n<p>“所以你相信开发人员能够正确实现你的想法，并且不会产生他们自己的想法？”</p>\n<p>软件架构师听了小 printf 的话后明显有些震惊，他说：”我想我还是有点儿脱节。“，他最后承认说，“问题确实存在，别人总是跟你说要按照某种思想或者主意去做事，但是你又没法有效验证你做的事情是不是真的符合这种思想。”他低下了头，沉思着，“有的时候软件架构师既不做软件，也不做架构，这貌似是真的。”</p>\n<p>接着，小 printf 离开了坊间，然后结束了他的访问，离开了大楼。</p>\n<h3>第 9 章</h3>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/badf773e339eb22672ab17db1335c747.png\"><img class=\"aligncenter size-full wp-image-65341\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/badf773e339eb22672ab17db1335c747.png\" alt=\"charity\" width=\"410\" height=\"299\"></a></p>\n<p>小 printf 刚一走出门，就碰到了一个男人正在路边募集善款。</p>\n<p>“Hi，”那个男人说，“你今天想不想给别人献点儿爱心呢？”</p>\n<p>”好吧，这样做我感觉可能会好点儿“，小 printf 回答说，”我已经在这栋大楼里待了一整天，可是我出来的时候感觉更加困惑了。“</p>\n<p>”啊，我明白了。这些人都是开发者。他们其实一点儿也帮不上忙，对不？他们总是喊着要改变世界，而且他们确实也做到了。“</p>\n<p>”但是为什么感觉这么奇怪呢？“小 printf 回答到。</p>\n<p>”好吧，因为他们的工作就是把人们的职业转换成程序，让人们安逸的生活变得更加安逸。软件会吞噬整个世界，然后给让世界面貌一新……不过从深层次来看，面貌一新的世界还是那个旧世界，只是面貌变了而已。之所你觉得奇怪，是因为世界的改变并不一定朝好的方向改变。我们现在面临的问题其实和以前一样多，需要填的坑也和以前一样深。“</p>\n<p>”那么我怎么才能让自己感觉好一点儿呢？”小 printf 显得有些焦虑。</p>\n<p>这个男人思考了一会儿，然后希望小 printf 能和他一起来帮助别人，这是他认为的能让自己感觉变好的方式。printf用了一整个下午告诉这个人自己的问题和经历。这个人听完了以后沉默了很长一段时间，然后说：</p>\n<p>“人们在社会中相互博弈，扮演不同角色，追逐和享受的名声，解决错综复杂的问题后得到瞬间的快感，这些都只是过眼云烟。最终，如果你没有解决什么有意义的问题，如果你完全不考虑别人，那么你是无法做到内心满足的。”</p>\n<p>“得不到内心的满足也许也没什么，也许会很糟糕，在你成长的过程中，你的满足感可能来自于你的工作之外，也可能来自于工作。工作可以仅仅就是工作，也可以是单纯为了钱，也可以为了兴趣。这些都OK。只要你能从生命中的某处找到内心的满足，那就好了。”</p>\n<p>“最后，只有当你以人类的面孔去解决问题的时候，你才会觉得真的正确；真正关键的点其实和电脑没关系。”</p>\n<p>“真正的关键在于你用心花在系统上的精力，这才是最重要的。“，那个人补充到，”如果你忘记了为什么花这么多精力的初衷，当一切都变成了关乎个人骄傲的游戏，那么事情的性质就变了，从可慰变成可悲。“</p>\n<p>”开发者们常常会忘记一个事实；如果你失去了对事物的眼光，那么在开发系统本身就成为了一个问题，这样的话最有效的办法就是把系统废掉，因为系统自己就是问题的根源。“</p>\n<p>”只有当你以人类的面孔去解决问题的时候，才会觉得真的正确。“，小 printf 不断重复着这句话，他铭记在心。</p>\n<h3>第 10 章</h3>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/c3e439e098ad3e922e7c338db045c453.png\"><img class=\"aligncenter size-full wp-image-65332\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/c3e439e098ad3e922e7c338db045c453.png\" alt=\"printf\" width=\"569\" height=\"638\"></a></p>\n<p>坐在我身旁的Printf现在要起身回家了。跟他的一席对话让我意识到了我现在所做的事情和我的爱好有多么大的距离，而我的爱好才是我真正开始编程的动力。小 printf 遇到的每一个角色，我每天也都会遇到很多。我曾受到他们的鼓舞，希望成为他们的一员，我可能也鼓励过别人这么做。</p>\n<p>当我还在挣扎着成为一个真正的程序员的时候，小 printf 却没有这么做。他说他成不了一个真正的程序员也没关系，他更希望能成为一个长着人类面孔的程序员。</p>\n<p>时至今日，回首望去，我的困境并没有改变，我还是要在人类的面孔和纯粹的工作之间做出选择，我希望我能有这个能力。而且在这两者之间好像也没有什么中间地段可以让我去选择。</p>\n<p>无论如何，小 printf 觉得他不需要做一个真正的程序员了，我想我和他的感觉是一样的。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>\n                        <img src=\"http://www.jobbole.com/wp-content/uploads/2016/04/78805a221a988e79ef3f42d7c5bfd4187.jpeg\">\n            \n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111959\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111959votetotal\">6</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111959\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 12 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 5 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/huangxiaofei\">黄小非</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/huangxiaofei\">\r\n\t\t\t<img src=\"http://www.jobbole.com/wp-content/uploads/avatars/5423/Corbis-42-221258652.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            黄小非：毕业于重庆大学计算机系，南开大学软件工程硕士，SCJP。 目前在一家国企信息中心任职软件开发工程师。主要技术兴趣为Java平台相关技术、系统构架、C/C++、计算机图形学等。（新浪微博：@黄小非）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/huangxiaofei\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/huangxiaofei/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/huangxiaofei/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 65</a> · <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/huangxiaofei2002\"><i class=\"fa fa-weibo\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "fav_nums": 2, "create_date": "2017-09-15"}